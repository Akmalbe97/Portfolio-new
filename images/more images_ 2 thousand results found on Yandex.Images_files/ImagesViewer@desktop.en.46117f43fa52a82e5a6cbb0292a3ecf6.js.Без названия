!function(e){function t(t){for(var n,r,i=t[0],a=t[1],s=0,c=[];s<i.length;s++)r=i[s],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&c.push(o[r][0]),o[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={477:0},o={477:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{"2af101":1}[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="chunks/"+({}[e]||e)+"."+{"2af101":"10569cfa4b8bb24b52ad"}[e]+".css",a=i.p+o,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=(d=s[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===o||u===a))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){var d;if((u=(d=l[c]).getAttribute("data-href"))===o||u===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.request=o,delete r[e],p.parentNode.removeChild(p),n(i)},p.href=a,document.getElementsByTagName("head")[0].appendChild(p)}).then(function(){r[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+"chunks/"+({}[e]||e)+"."+{"2af101":"10569cfa4b8bb24b52ad"}[e]+".js"}(e);var u=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}o[e]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://yastatic.net/s3/fiji-static/_/",i.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=s;i(i.s=1480)}({0:function(e,t){e.exports=React},1:function(e,t,n){"use strict";e.exports=n(114)},10:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var r=n(23),o=n(9),i=function(e){var t=e.dtype,n=void 0===t?"iweb":t,o=e.path,i=e.vars,a={dtype:n,path:o,pid:e.pid,cid:e.cid},s=i&&Object(r.e)(i,!0);return s&&(a.vars=s),a},a=function(e,t){var n,r=void 0===t?{}:t,a=r.reqid,s=r.dtype,c=r.vars,u=r.pid,l=r.cid,d=r.href;if(!o.a)throw Error("Нельзя вызывать отправку счетчика на сервере");null===(n=window.c)||void 0===n||n.hit(i({path:e,reqid:a,dtype:s,vars:c,pid:u,cid:l}),d?{href:d}:void 0)},s=function(e,t){var n,r=void 0===t?{}:t,a=r.reqid,s=r.dtype,c=r.vars,u=r.pid,l=r.cid,d=r.href;if(!o.a)throw Error("Нельзя вызывать отправку счетчика на сервере");null===(n=window.c)||void 0===n||n.hitDelayed(i({path:e,reqid:a,dtype:s,vars:c,pid:u,cid:l}),d?{href:d}:void 0)}},1008:function(e,t,n){"use strict";n.d(t,"c",function(){return o.b}),n.d(t,"b",function(){return s.b}),n.d(t,"a",function(){return h});var r=n(2),o=n(234),i=n(1),a=n(273),s=n(61),c=n(0),u=n(53),l=(n(656),function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),d=Object(i.withBemMod)(Object(u.a)(),{theme:"v2"},function(e){return function(t){return c.createElement(e,l({},t))}}),p=new r.Registry({id:s.a}),f=Object(i.compose)(d)(a.b);p.set("OfferCard",f);var h=Object(r.withRegistry)(p)(o.a)},101:function(e,t,n){"use strict";function r(e){var t=function(){throw new Error("Not found base component for enhance HOC: "+e.toString())};return t.$symbol=d,t.hoc=e,t}function o(e){return e.$symbol===d}Object.defineProperty(t,"__esModule",{value:1});var i=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])({}).hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=i.createContext({}),c=s.Provider,u=s.Consumer,l=function(){return i.useContext(s)},d="RegistryHoc",p=function(){function e(e){var t=e.id,n=e.overridable,r=void 0===n?1:n;this.components={},this.id=t,this.overridable=r}return e.prototype.set=function(e,t){return this.components[e]=t,this},e.prototype.extends=function(e,t){return this.components[e]=r(t),this},e.prototype.fill=function(e){for(var t in e)this.components[t]=e[t];return this},e.prototype.get=function(e){return this.components[e]},e.prototype.snapshot=function(){return this.components},e.prototype.merge=function(t){var n=new e({id:this.id,overridable:this.overridable});if(n.fill(this.components),!t)return n;var r=t.snapshot();for(var o in r)r.hasOwnProperty(o)&&(n.components[o]=this.mergeComponents(n.components[o],r[o]));return n},e.prototype.mergeComponents=function(e,t){return o(t)&&e?o(e)?r(function(n){return t.hoc(e.hoc(n))}):t.hoc(e):t},e}();t.ComponentRegistryConsumer=function(e){return i.createElement(u,null,function(t){return e.children(t[e.id].snapshot())})},t.Registry=p,t.RegistryConsumer=u,t.registryContext=s,t.useComponentRegistry=function(e){return l()[e].snapshot()},t.useRegistries=l,t.withRegistry=function(){var e=[].slice.call(arguments);return function(t){return function(n){var r=i.useRef(null);return i.createElement(u,null,function(o){if(null===r.current){for(var s=a({},o),u=0;u<e.length;u++){var l=e[u],d=o[l.id];s[l.id]=l.overridable?d?l.merge(d):l:l&&d?d.merge(l):l}r.current=s}return i.createElement(c,{value:r.current},i.createElement(t,n))})}}}},102:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("ImagesViewer")},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(137);t.BaobabComponents=r.createContext({BaobabNode:o.BaobabNode})},105:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),i=n(136),a=n(139);t.SCHEMA_VER=0;var s=function(){function e(e,t){var n=this,r=e.prefix,o=e.senderParams;this.nextEventId=0,this.nextNodeId=0,this.rootNodes=[],this.listeners={createnode:[],removenode:[],actionnode:[]},this.childrenCreatedPerLoop={},this.resolveEvent=function(){n.actualEvent=void 0},this.baobabSender=new t(o),this.prefix=r}return e.prototype.getRootNodes=function(){return this.rootNodes},e.prototype.getRootSendNodes=function(){var e=this;return this.rootNodes.map(function(t){return e.encodeNode(t)})},e.prototype.addEventListener=function(e,t){this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){this.listeners[e]=this.listeners[e].filter(function(e){return e!==t})},e.prototype.prepareRoot=function(e){var t=this.createRootNode(e);return this.rootNodes.push(t),t},e.prototype.prepareChild=function(e,t){var n=this.createChildNode(t,e);return e.flags.logged&&!n.flags.logged&&this.appendToSubresult(n,e),n},e.prototype.attachNode=function(e){var t=this;e.flags.attached=!0,this.markAttachedNodeAsCreated(e),e.flags.logged?this.baobabSender.attachTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}}):o.isChildNode(e)?setTimeout(function(){return t.logChildNodes(e)},0):(this.markNodeAsLogged(e),this.baobabSender.createTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.createnode.forEach(function(r){return r.call(t,{logger:t,target:e,create:e,on:null,sendInfo:n})})}))},e.prototype.logChildNodes=function(e){var t=this;if(!e.flags.logged){var n=e.parent.id,r=this.childrenCreatedPerLoop[n];r&&(this.childrenCreatedPerLoop[n]=void 0,r.children.map(function(e){return t.markNodeAsLogged(e)}),this.baobabSender.appendTree({node:this.encodeNode(r),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.createnode.forEach(function(o){return o.call(t,{logger:t,target:e,create:r,on:e.parent,sendInfo:n})})}))}},e.prototype.detachNode=function(e){var t=this;e.flags.attached&&(e.flags.attached=!1,this.markNodeAsDestroyed(e),this.baobabSender.detachTree({node:this.encodeNode(e),eventData:{cts:Date.now(),triggerEvent:this.actualEvent||this.lastEvent,triggerEventTrusted:Boolean(this.actualEvent)}},function(n){t.listeners.removenode.forEach(function(r){return r.call(t,{logger:t,target:e,remove:e,sendInfo:n,from:o.isChildNode(e)?e.parent:null})})}))},e.prototype.dispatchEvent=function(e,t){var n=this;this.baobabSender.clientAction({node:this.encodeNode(e),eventData:t},function(r){n.listeners.actionnode.forEach(function(o){return o.call(n,{logger:n,target:e,action:t,sendInfo:r})})})},e.prototype.logTechEventForRoot=function(e,t){var n=this.getRootNodes(),r=n[n.length-1];if(!r)throw new i.BaobabNotInitError;var o=a.logTech(e,t),s=this.createEvent(r,o,[],{});this.dispatchEvent(r,s)},e.prototype.createEvent=function(e,t,n,r){var o={cts:Date.now(),id:this.generateEventId(),event:t.event,data:t.data,service:e.context.service,subservice:e.context.subservice};return t.type&&(o.type=t.type),t.behaviour&&(o.behaviour=t.behaviour),o},e.prototype.withEvent=function(e,t){this.lastEvent=e,this.actualEvent=e,t(this.resolveEvent)},e.prototype.encodeNode=function(e,t){var n=this;void 0===t&&(t=!1);var i={id:e.id,name:e.name},a=!t&&o.isTreeNode(e)&&!e.flags.attached;return e.attrs&&Object.keys(e.attrs).length&&(i.attrs=e.attrs),a&&(i.attrs=r(r({},i.attrs),{hidden:!0})),e.children.length&&(i.children=e.children.map(function(e){return n.encodeNode(e,a)})),i},e.prototype.generateEventId=function(){return Date.now().toString(36)+(this.nextEventId++).toString(36)},e.prototype.generateNodeId=function(){return this.prefix+(this.nextNodeId++).toString(36)},e.prototype.markAttachedNodeAsCreated=function(e){var t=this;e.flags.attached&&(e.flags.created=!0,e.children.forEach(function(e){return t.markAttachedNodeAsCreated(e)}))},e.prototype.markNodeAsDestroyed=function(e){var t=this;e.flags.created=!1,e.children.forEach(function(e){return t.markNodeAsDestroyed(e)})},e.prototype.markNodeAsLogged=function(e){var t=this;e.flags.logged=!0,e.children.forEach(function(e){return t.markNodeAsLogged(e)})},e.prototype.appendToSubresult=function(e,n){var r=this.childrenCreatedPerLoop[n.id];if(!r){var o={id:this.generateNodeId(),name:"$subresult",attrs:{"schema-ver":t.SCHEMA_VER,ui:e.context.ui,subservice:e.context.subservice,"parent-id":n.id,"trigger-event-id":this.actualEvent||this.lastEvent,"trigger-event-trusted":Boolean(this.actualEvent),"main-search":n.context.subservice!==e.context.subservice},children:[e]};return this.childrenCreatedPerLoop[n.id]=o,o}return r.children.push(e),r},e.prototype.createChildNode=function(e,t){var n={key:e.key,parent:t,id:this.generateNodeId(),name:e.name,attrs:e.attrs,children:[],mapChildren:{},flags:{logged:!1,created:!0,attached:!1},context:this.createNodeContext(e,t)};return t.children.push(n),n},e.prototype.createRootNode=function(e){return{key:e.key,id:this.generateNodeId(),name:e.name,attrs:r({},e.attrs),children:[],mapChildren:{},flags:{logged:!1,created:!0,attached:!1},context:this.createRootContext(e)}},e.prototype.createNodeContext=function(e,t){var n=r(r({},t.context),{path:t.context.path.concat(e.name)});return e.attrs&&e.attrs.subservice&&(n.subservice=e.attrs.subservice),n},e.prototype.createRootContext=function(e){var t={path:[e.name],service:e.attrs.service,ui:e.attrs.ui};return e.attrs.subservice&&(t.subservice=e.attrs.subservice),t},e}();t.Logger=s},106:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMViewerModal")},107:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement)},11:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},111:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};function o(e,t){return t.some(function(t){return r[t]===e||t===e})}},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e};t.linear=r,t.easeInOutQuad=function(e){return e<.5?2*e*e:-2*(e*(e-2)+.5)},t.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},t.animate=function(e,t,n,o){var i;void 0===n&&(n=r);var a=!1,s=function(r){if(!a){i||(i=r);var c=(r-i)/e;c>1&&(c=1);var u=n(c);t(u),c<1?requestAnimationFrame(s):o&&o()}};return requestAnimationFrame(s),function(){return a=!0}}},114:function(e,t,n){"use strict";function r(e,t,n){var r,o,i,u=function(u){var l,d;return r=r||s.cn(e),o=o||r(),function(e){if((i=i||Object.keys(t)).every(function(n){var r=t[n],o=e[n];return r===o||"*"===r&&Boolean(o)})){var s=i.reduce(function(e,n){return"*"!==t[n]&&(e[n]=t[n]),e},{});d=d||r(s);var p=Object.assign({},e);return p.className=c.classnames(d,e.className).replace(o+" ",""),"function"==typeof n?void 0===l&&(l=n(u)):l=u,a.createElement(l,p)}return a.createElement(u,e)}},l=n||{},d=l.__passToProps,p=void 0===d?1:d,f=l.__simple,h=void 0===f?0:f,m=Object.keys(t),v=m[0],g=t[m[0]];return(u.__isSimple=!n&&1===m.length||h)&&(u.__blockName=e,u.__mod=v,u.__value=g,u.__passToProps=p),u}function o(e){for(var t={},n={},r=s.cn(e[0].__blockName),o=0,i=e;o<i.length;o++){var c=i[o],l=c.__mod,d=c.__value,p=c.__passToProps;t[l]=t[l]||[],n[l]=n[l]||[],t[l].push(d),n[l].push(p)}var f=Object.keys(t);return function(e){return function(o){for(var i={},s=u({},o),c=0,l=f;c<l.length;c++){var d=l[c],p=t[d],h=o[d],m=p.indexOf(h);-1===m&&1==p[0]&&0==h&&(m=0),-1!==m?(i[d]=h,n[d][m]||delete s[d]):s.hasOwnProperty(d)&&void 0===h&&delete s[d]}return s.className=r(i,[o.className]),a.createElement(e,s)}}}function i(){for(var e=[],t=[],n=0,r=[].slice.call(arguments);n<r.length;n++){var i=r[n];i.__isSimple?e.push(i):t.push(i)}return(e.length?[o(e)].concat(t):t).reduce(function(e,t){return function(){return e(t.apply(0,arguments))}},function(e){return e})}Object.defineProperty(t,"__esModule",{value:1});var a=n(0),s=n(4),c=n(58),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])({}).hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.compose=i,t.composeU=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(void 0,e)},t.createClassNameModifier=function(e,t){return r(e,t,{__passToProps:0,__simple:1})},t.withBemMod=r},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.classnames=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=new Set,o=0,i=e.join(" ").split(" ");o<i.length;o++){var a=i[o];""===a||r.has(a)||(r.add(a),n.length>0&&(n+=" "),n+=a)}return n}},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(509);function i(e,t){return e?r.createElement("b",{key:t},e):""}t.HIGHLIGHT_OPEN="[",t.HIGHLIGHT_CLOSE="]";var a=function(e){return e};function s(e,n){void 0===n&&(n={});var r={highlighter:n.highlighter||i,delimiters:n.delimiters||{start:t.HIGHLIGHT_OPEN,end:t.HIGHLIGHT_CLOSE},textPreprocessor:n.textPreprocessor||a};return o.markup(e,r)}t.markup=s,t.makeHighlighter=function(e){return function(t){return s(t,e)}}},12:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h});var r,o=n(3),i=n(0),a=n.n(i),s=n(4),c=n(22),u=n(18),l=(n(142),function(e){var t=e.side,n=e.provider,r=Object(o.__rest)(e,["side","provider"]);return n(p("Icon",{side:t},[r.className]))}),d=(n(143),function(e){var t=e.children,n=e.className,r=Object(o.__rest)(e,["children","className"]);return a.a.createElement("span",Object(o.__assign)({},r,{className:p("Text",null,[n])}),t)}),p=(n(141),Object(s.cn)("Button2")),f={autoComplete:"off",pressKeys:[u.a.SPACE,u.a.ENTER],prvntKeys:[],as:"button",type:"button"},h=((r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=Object(i.createRef)(),t.onKeyDown=function(e){Object(u.b)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),Object(u.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){Object(u.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),Object(u.b)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/safari/i)&&e.preventDefault(),t.setState({pressed:!0}),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseLeave&&t.props.onMouseLeave(e)},t.onBlur=function(e){t.setState({pressed:!1}),void 0!==t.props.onBlur&&t.props.onBlur(e)},t}return Object(o.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,r=e.autoComplete,i=e.checked,s=e.children,u=e.icon,f=e.iconLeft,h=e.iconRight,m=e.progress,v=e.disabled,g=e.as,b=e.type,y=e.className,O=e.innerRef,w=e.controlRef,C=e.title,E=e.role,j=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,Object(o.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),S=this.state.pressed,_=g;j["string"===typeof g?"ref":"innerRef"]=Object(c.a)(this.internalInnerRef,O,w);var k=f||u;return a.a.createElement(_,Object(o.__assign)({},j,{type:b,disabled:Boolean(m||v),className:p({checked:i,progress:m,pressed:S},[y]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onBlur:this.onBlur,"aria-pressed":i,"aria-disabled":v,autoComplete:r,title:C,role:E,"aria-busy":m}),n,k&&a.a.createElement(l,{provider:k,side:s&&f?"left":void 0}),h&&a.a.createElement(l,{provider:h,side:s?"right":void 0}),s&&a.a.createElement(d,null,s),t)},t}(i.PureComponent)).displayName=p(),r.defaultProps=f,r)},121:function(e,t,n){n.r(t);var r=n(2436);n.d(t,"en",function(){return r.a})},122:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMRelatedImages")},124:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r=n(3),o=n(0),i=n(4),a=(n(147),Object(i.cn)("Link")),s=function(e){var t=e.as,n=e.children,i=e.controlRef,s=e.disabled,c=e.innerRef,u=e.role,l=(e.pseudo,e.view,Object(r.__rest)(e,["as","children","controlRef","disabled","innerRef","role","pseudo","view"])),d=t||(l.href?"a":"span"),p=l.rel;return"_blank"===l.target&&void 0!==p&&-1===p.indexOf("noopener")&&(p+=" noopener"),Object(o.createElement)(d,Object.assign(l,{"aria-disabled":s,className:a(null,[l.className]),ref:c||i,rel:p,role:u,tabIndex:s?-1:l.tabIndex}),n)};s.displayName=a()},128:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("ImagesViewerGallery")},129:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var r,o=n(257),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.timeout=0]="timeout",e[e.error=1]="error",e[e.canceled=2]="canceled"}(r||(r={}));var a=function(){},s=function(){function e(e,t){this.startLoadTime=0,this.onResult=e,this.timeout=t&&t.timeout,this.itemTimeout=t&&t.itemTimeout,this.onImageError=t&&t.onImageError}return e.prototype.stop=function(){this.destroyLoaderElement(),this.watchdog&&clearTimeout(this.watchdog),this.onResult=a},e.prototype.startLoading=function(){var e=this;this.startWatchdog(),this.tryLoadNext()||setTimeout(function(){return e.onResult(r.error)},0)},e.prototype.onLoad=function(){var e,t=this.getResultData();this.loader&&this.loader.src&&o.a.instance().addToHistory(this.loader.src),t&&!t.loadTime&&(e=i(i({},t),{loadTime:Date.now()-this.startLoadTime})),this.onResult(void 0,e),this.stop()},e.prototype.onError=function(){this.tryLoadNext()||this.onResult(r.error)},e.prototype.onItemLoadingError=function(){this.onImageError&&this.loader&&this.loader.src&&this.onImageError(this.loader.src),this.onError()},e.prototype.tryLoadNext=function(){var e=this.getUrlFromItem();return this.destroyLoaderElement(),!!e&&(this.createLoaderElement(e),!0)},e.prototype.createLoaderElement=function(e){var t=this;this.itemTimeout&&(this.itemWatchdog=window.setTimeout(function(){return t.onError()},this.itemTimeout));var n=this.loader=new Image;n.onload=function(){return t.onLoad()},n.onerror=function(){return t.onItemLoadingError()},n.src=e,this.startLoadTime=Date.now()},e.prototype.destroyLoaderElement=function(){var e=this.loader;e&&(this.itemWatchdog&&clearTimeout(this.itemWatchdog),e.onload=a,e.onerror=a,e.src="",this.loader=void 0)},e.prototype.startWatchdog=function(){var e=this;this.timeout&&!this.watchdog&&(this.watchdog=window.setTimeout(function(){var t=e.onResult;e.stop(),t(r.timeout)},this.timeout))},e}()},13:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},130:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(1),i=n(5),a=n(36),s=Object(o.compose)(Object(i.withBaobab)({name:"button"}),Object(o.withBemMod)(Object(a.c)(),{type:a.a.link},function(){return function(e){return r.createElement("a",{className:Object(a.c)({},[e.className]),href:e.url,rel:"noopener",ref:e.forwardRef,target:e.target||"_blank",onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenuCapture:e.onContextMenuCapture},e.icon&&r.createElement("span",{className:Object(a.c)("Icon")},e.icon),r.createElement("span",{className:Object(a.c)("Text")},e.text),e.rightText&&r.createElement("span",{className:Object(a.c)("RightText")},e.rightText))}}))},131:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(42),o=(n(651),Object(r.a)("Section"))},132:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement}},136:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.message="Баобаб-нода не инициализирована!",t}return r(t,e),t}(Error);t.BaobabNotInitError=o},137:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(38),c=n(5);function u(e,t,n,o){return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=e.current.childProps,l=u[t],d=r({},n);c.isEventDataAttrsConstructor(n.data)&&(d.data=n.data({props:u},a));var p,f=o(d,a,r(r({},e.current.childProps),e.current.extraChildProps));if("function"===typeof l)p=l.call.apply(l,i([this],a,[{withEvent:f}]));else if("undefined"!==typeof l)throw new Error("Вы пытаетесь вызвать событие "+t+". Но это "+typeof l+', со значением "'+l+'"');return p}}function l(e,t){var n={},r=e.current.nodeData.events;for(var o in r){var i=r[o];c.isEventDeclaration(i)&&(n[o]=u(e,o,i,t))}return n}function d(e,t,n){return!e||!c.areEqualsNodes(e,t,n)}t.wrapActions=l,t.shouldRecreateNode=d,t.BaobabNode=function(e){var t,n,o=e.nodeDeclaration,i=e.logNode,u=e.children,p=e.childProps,f=a.useContext(s.BaobabContext),h=f?function(e,t,n,r){return e.parentNode?c.createChildData(t,n,r):c.createRootData(t,n,r)}(f,p,o,i):{},m=a.useRef({node:void 0,childProps:p,extraChildProps:{},nodeData:h}),v=d(m.current.node,h,null===(t=f)||void 0===t?void 0:t.parentNode);v&&(m.current.nodeData=h),m.current.childProps=p;var g=c.useBaobab(m.current.nodeData);if(v){var b=g.node,y=g.logEvent;m.current.node=b,m.current.extraChildProps=m.current.nodeData.events?l(m,y):{};var O=o.extra;O&&(O.id&&(m.current.extraChildProps.baobabId=b&&b.id,m.current.extraChildProps.baobabNode=b),O.withLogger&&(m.current.extraChildProps.baobabNodeLogger=null===(n=f)||void 0===n?void 0:n.logger))}return f?a.createElement(s.BaobabContext.Provider,{value:g.nextContext},u(Object.assign({},p,m.current.extraChildProps))):a.createElement(a.Fragment,null,u(r({},p)))},t.BaobabNode.isBaobabNode=!0},138:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(38),a=function(e){function t(t){var n=e.call(this,t)||this,r=t.Logger,o=t.Sender,i=t.loggerProps,a=t.onLoggerInit,s=new r(i,o);return n.nextContext={logger:s},a&&a(s),n}return r(t,e),t.prototype.render=function(){var e=this.props.children;return o.createElement(i.BaobabContext.Provider,{value:this.nextContext},e)},t}(o.Component);t.BaobabRoot=a},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51);t.logClick=function(e){return e?{event:r.BaobabLogEventType.Click,data:e}:{event:r.BaobabLogEventType.Click}},t.logScroll=function(e){return e?{event:r.BaobabLogEventType.Scroll,data:e}:{event:r.BaobabLogEventType.Scroll}},t.logTech=function(e,t){return t?{event:r.BaobabLogEventType.Tech,type:e,data:t}:{event:r.BaobabLogEventType.Tech,type:e}}},14:function(e,t){e.exports=ReactDOM},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n(1),o=n(25),i=n(7),a=n(59),s=n(175),c=function(e){var t=Object(i.j)(e),n=Object(i.c)(e),r=e.config,o=r.loggedIn,a=r.imagesCbirSearchUrl,s=r.openServiceOnNewTab,c=r.isFavoritesDisabled,u=r.isDiskShareEnabled,l=r.unauthPopupSimilarFlag,d=e.globalContext,p=d.tld,f=d.isQueryPorn,h=d.isCommercialQuery,m=d.isCommercialEnabled,v=h||m?"secondary":"primary";return{tld:p,image:t,loadedThumb:Object(i.k)(e),reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,loggedIn:o,imagesCbirSearchUrl:a,openServiceOnNewTab:s,isQueryPorn:f,isFavoritesDisabled:c,isDiskShareEnabled:u,unauthPopupSimilarFlag:l,experiments:e.experiments,mainButtonTheme:v}},u=Object(r.compose)(Object(o.d)(c),Object(a.a)(["image"]))(s.a)},1480:function(e,t,n){n(85),e.exports=n(1481)},1481:function(e,t,n){"use strict";n.r(t),n.d(t,"App",function(){return i});var r=n(27),o=n(358),i=Object(r.b)("ImagesViewer")(o.a)},149:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n(28),o=n(198),i=n(107),a={images:"/images/search",video:"/video/search"};function s(e,t){if(!i.a)return"";var n=window.location.protocol,r=Object(o.getOrigin)(window.location);return new RegExp("https?://([a-z0-9-]+.)*yandex."+e+"(:[0-9]+)?").test(r)?""+r+t:""+(n+"//yandex."+e)+t}function c(e,t,n){var o=a[e];return s(t,Object(r.appendQueryString)(o,n))}},150:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(132);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},151:function(e,t,n){n.r(t);var r=n(2454);n.d(t,"en",function(){return r.a})},152:function(e,t,n){n.r(t);var r=n(2472);n.d(t,"en",function(){return r.a})},153:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(2),o=n(36),i=n(382),a=n(261),s=n(262),c=n(260),u=n(0),l=n(5),d=n(6),p=n(1),f=n(37),h=(n(625),Object(p.createClassNameModifier)(Object(f.b)(),{type:"photostock"})),m=n(35),v=n(23),g=n(130),b=n(263),y=n(16),O=n(121),w=(n(624),Object(d.i18nRaw)(O)),C=Object(g.a)(o.b),E=h(f.a);var j=u.memo(function(e){var t=e.onClick,n=e.onShow,r=e.photostockUrl,i=u.useRef(""),a=u.useRef(null);return n&&i.current!==r&&(i.current=r,n(r)),u.createElement(b.a,{text:w("На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование",{br0:u.createElement("br",{key:"0"}),br1:u.createElement("br",{key:"1"}),context:"Кнопка ведущая на сайт, где можно купить демонстрируемую картинку"}),anchor:a,directions:["left-center"],mainOffset:7,hasTail:!0},function(e,n){return u.createElement(C,{forwardRef:a,className:Object(y.a)("Photostock"),text:w("Купить оригинал картинки",{context:"Кнопка ведущая на сайт, где можно купить демонстрируемую картинку"}),onClick:function(e,t){return u.useCallback(function(n){e(),t&&t(n)},[e,t])}(n,t),onMouseEnter:e,onMouseLeave:n,url:r,icon:u.createElement(E,{type:"photostock"}),type:o.a.link})})});function S(e){return function(t){var n=t.props;if(n.counters&&n.counters[e]&&n.photostockUrl){var r=encodeURIComponent(n.photostockUrl);return Object(v.b)(n.counters[e],{"-url":r},{redirUrl:r})}}}var _=Object(m.d)(Object(l.withBaobab)({name:"MMPhotostockButton",events:{onShow:Object(l.logTech)("show",S("photostockShown")),onClick:Object(l.logClick)(S("photostockClick"))}})(j)),k=new r.Registry({id:Object(y.a)()});k.set(Object(o.c)(),o.b),k.set(Object(y.a)("AddToCollection"),i.a),k.set(Object(y.a)("OpenImage"),a.a),k.set(Object(y.a)("SearchByImage"),s.a),k.set(Object(y.a)("Photostock"),_),k.set(Object(y.a)("Share"),c.a)},154:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){var e=Object(r.useRef)(!1),t=Object(r.useCallback)(function(){return e.current},[]);return Object(r.useEffect)(function(){return e.current=!0,function(){e.current=!1}}),t}},158:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(5),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=Object(o.withBaobab)({name:"div"})(function(e){var t=e.forwardRef,n=a(e,["forwardRef"]);return r.createElement("div",i({},n,{ref:t}),n.children)});Object(o.withBaobab)({name:"img"})(function(e){var t=e.forwardRef,n=a(e,["forwardRef"]);return r.createElement("img",i({},n,{ref:t}))})},16:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMViewerButtons")},163:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(3),o=n(0),i=n.n(o),a=n(26),s=(n(271),function(e){var t=e.className,n=e.innerRef,o=e.children,s=Object(r.__rest)(e,["className","innerRef","children"]);return i.a.createElement("div",Object(r.__assign)({},s,{className:Object(a.b)("Tail",null,[t]),ref:n}),o)})},164:function(e,t,n){"use strict";var r=n(165);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},165:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},168:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(9),o=n(10),i="fiji:ls-availability-test",a=!1;try{r.a&&(window.localStorage.setItem(i,"1"),window.localStorage.removeItem(i),a=!0)}catch(e){var s=window.BEM?BEM.blocks["i-global"].param("project"):"";Object(o.a)("/"+s+"/no-localstorage")}var c=a},17:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return v});var r=n(3),o=n(0),i=n.n(o),a=n(2),s=n(4),c=n(11);function u(e){var t={state:e,setState:function(e){t.state=e,t.setters.forEach(function(e){return e(t.state)})},setters:[]};return function(){var e=Object(r.__read)(Object(o.useState)(t.state),2),n=e[0],i=e[1];return Object(o.useEffect)(function(){return function(){t.setters=t.setters.filter(function(e){return e!==i})}},[]),function(e,t){Object(c.a)()?Object(o.useLayoutEffect)(e,t):Object(o.useEffect)(e,t)}(function(){-1===t.setters.indexOf(i)&&t.setters.push(i)}),[n,t.setState]}}function l(e,t){var n=Object(o.useRef)(u([e,t])).current,i=Object(r.__read)(n(),2)[1],a=Object(o.useRef)(function(e){var t=Object(r.__read)(n(),1)[0],i=Object(r.__read)(t||[],2),a=i[0],s=i[1];return void 0===t||void 0===s?Object(o.createElement)(a,e):s(e,a)}).current;return Object(o.useEffect)(function(){i([e,t])},[i,e,t]),a}var d=n(393),p=n(392),f=n(50);n(328);var h=Object(s.cn)("Textinput"),m=function(e){var t=e.addonAfter,n=e.addonBefore,s=e.className,c=e.disabled,u=e.focused,f=e.iconLeft,m=e.iconRight,v=e.innerRef,g=e.onMouseEnter,b=e.onMouseLeave,y=e.style,O=(e.pressed,e.view,e.pin,e.size,e.theme,e.hint),w=e.state,C=e.title,E=e.renderControl,j=Object(r.__rest)(e,["addonAfter","addonBefore","className","disabled","focused","iconLeft","iconRight","innerRef","onMouseEnter","onMouseLeave","style","pressed","view","pin","size","theme","hint","state","title","renderControl"]),S=Object(a.useComponentRegistry)(h()),_=S.Control,k=S.Box,I=S.Icon,P=S.Hint,x=l(_,E),M=Object(r.__read)(Object(o.useState)(O),2),N=M[0],R=M[1],T=Object(r.__read)(Object(o.useState)(!1),2),D=T[0],L=T[1],A=Object(o.useRef)(O),B=Object(d.a)("hint");Object(p.a)(function(){O?R(O):A.current&&L(!0),A.current=O},[O]);var F=Object(o.useCallback)(function(){O||(R(""),L(!1))},[O]);return i.a.createElement("span",{className:h({disabled:c,focused:u,iconRight:void 0!==m,iconLeft:void 0!==f,state:w},[s]),onMouseEnter:g,onMouseLeave:b,ref:v,style:y,title:C},n,f&&i.a.createElement(I,{side:"left",component:f}),m&&i.a.createElement(I,{side:"right",component:m}),i.a.createElement(x,Object(r.__assign)({},j,{"aria-invalid":"error"===w,disabled:c,"aria-describedby":N?B:void 0})),i.a.createElement(k,null),t,N&&i.a.createElement(P,{leave:D,onAnimationEnd:F,id:B},N))};m.displayName=h();var v=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={focused:e.props.focused,pressed:e.props.pressed,disabled:e.props.disabled},e.onMouseDown=function(t){3!==t.nativeEvent.which&&(e.setState({pressed:!0}),e.docOnMouseDown(),void 0!==e.props.onMouseDown&&e.props.onMouseDown(t))},e.onMouseUp=function(t){e.setState({pressed:!1}),void 0!==e.props.onMouseUp&&e.props.onMouseUp(t)},e.docOnMouseDown=function(){document.addEventListener("mouseup",e.docOnMouseUp),document.addEventListener("dragend",e.docOnMouseUp)},e.docOnMouseUp=function(){e.setState({pressed:!1}),document.removeEventListener("mouseup",e.docOnMouseUp),document.removeEventListener("dragend",e.docOnMouseUp)},e.onFocus=function(t){e.setState({focused:!0}),void 0!==e.props.onFocus&&e.props.onFocus(t)},e.onBlur=function(t){e.setState({focused:!1}),void 0!==e.props.onBlur&&e.props.onBlur(t)},e}return Object(r.__extends)(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.disabled!==e.disabled&&this.setState({disabled:e.disabled}),this.props.focused!==e.focused&&this.setState({focused:e.focused}),this.props.pressed!==e.pressed&&this.setState({pressed:e.pressed}),e.disabled&&this.setState({focused:!1,pressed:!1})},n.prototype.render=function(){var t=this.state,n=t.disabled,o=t.focused,a=t.pressed,s=e;return i.a.createElement(s,Object(r.__assign)({},this.props,{focused:n?void 0:o,pressed:n?void 0:a,onMouseDown:n?void 0:this.onMouseDown,onMouseUp:n?void 0:this.onMouseUp,onFocus:n?void 0:this.onFocus,onBlur:n?void 0:this.onBlur}))},n.displayName="WithControl("+Object(f.a)(e)+")",n}(o.PureComponent)}(m)},171:function(e,t,n){"use strict";function r(e){return e.schemaOrgSnippet?e.schemaOrgSnippet:e.snippet}n.d(t,"a",function(){return r})},173:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMImageStore")},174:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n(3),o=n(0),i=n.n(o),a=n(4),s=(n(600),Object(a.cn)("Spin2")),c=function(e){var t=e.className,n=e.innerRef,o=e.progress,a=(e.view,e.position,e.size,Object(r.__rest)(e,["className","innerRef","progress","view","position","size"]));return i.a.createElement("div",Object(r.__assign)({},a,{ref:n,className:s({progress:o},[t])}))};c.displayName=s()},175:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(2),o=n(0),i=n(149),a=n(35),s=n(171),c=n(23),u=function(e){return e.w+"×"+e.h};var l=n(16),d=n(34),p=(n(638),n(153)),f=Object(r.withRegistry)(p.a)(function(e){var t=e.image,n=e.imagesCbirSearchUrl,p=e.onLog,f=e.loggedIn,h=e.pos,m=e.rimPos,v=e.reqid,g=e.loginUrl,b=e.view,y=e.isFavorite,O=e.mainButtonTheme,w=t.preview&&t.preview[0]||t.dups&&t.dups[0],C=t.extraOrigin&&t.extraOrigin.url||w&&(w.origin?w.origin.url:w.url),E=Boolean(t.origOnlyOpen),j={"-pos":h},S=t.imgHref||C,_=function(e,t){if(!e)return[];var n,r=e.dups,o=e.extraOrigin||t,i={},a=(o?[o].concat(r):r).reduce(function(e,t){var r=t&&t.origin||t;if(!r||!r.w||!r.h||!r.url)return e;var a=u(r);if(!i[a]){i[a]=!0;var s={w:r.w,url:r.url,text:a};if(o===t)return n=s,e;e.push(s)}return e},[]);return a.length>1&&a.sort(function(e,t){return e.w&&t.w?t.w-e.w:0}),n&&a.unshift(n),a}(t,e.loadedThumb);return"undefined"!==typeof m&&(j["-rim_id"]=t.rimid,j["-rim_index"]=m),o.createElement(a.a,null,function(a){return o.createElement(r.ComponentRegistryConsumer,{id:Object(l.a)()},function(r){var u=r[Object(l.a)("OpenImage")],h=r[Object(l.a)("SearchByImage")],m=r[Object(l.a)("Photostock")],w=r[Object(l.a)("AddToCollection")],k=r[Object(l.a)("Share")],I=function(){if(t.previewUrl&&k)return o.createElement(k,{view:b,link:Object(i.b)(e.tld,t.previewUrl),snippetUrl:Object(s.a)(t).url,loggedIn:f,originalUrl:C,shareClick:Object(c.b)(a.shareClick,"",{reqid:t.reqid}),popupScope:e.popupScope,tld:e.tld,isDiskShareEnabled:e.isDiskShareEnabled,diskShareDirectoryName:e.diskShareDirectoryName,isDiskShareUnauthPopupEnabled:e.isDiskShareUnauthPopupEnabled,showUnauthPopup:e.showUnauthPopup})},P=function(){if(C&&w&&!e.isFavoritesDisabled)return o.createElement(w,{view:b,isFavorite:y,loggedIn:f,loginUrl:g,image:t,reqid:v,onLog:p,tld:e.tld,showUnauthPopup:e.showUnauthPopup})},x=function(){if(C&&h)return o.createElement(h,{view:b,imagesCbirSearchUrl:n,openServiceOnNewTab:e.openServiceOnNewTab,onClickCounter:Object(c.b)(a.similar,j,{reqid:v},{href:S}),onClickLogNode:Object(c.a)(a.similar),image:t,onLog:p,tld:e.tld,isSimilarUnauthPopupEnabled:e.isSimilarUnauthPopupEnabled,showUnauthPopup:e.showUnauthPopup,experiments:e.experiments})};return o.createElement("div",{className:Object(l.a)({view:b})},function(){if(C&&u)return o.createElement(u,{view:b,url:E?t.snippet.redirUrl:C,dups:_,link:Object(i.b)(e.tld,t&&t.previewUrl||""),downloadCounter:Object(c.b)(a.buttonOpen,j,{reqid:v,redirUrl:C}),downloadLogNode:Object(c.a)(a.buttonOpen),otherSizeCounter:Object(c.b)(a.otherSize,j,{reqid:v}),otherSizeLogNode:Object(c.a)(a.buttonOpen),onLog:p,popupScope:e.popupScope,tld:e.tld,isOpenImageUnauthPopupEnabled:e.isOpenImageUnauthPopupEnabled,isOpenImageUnauthPopupStrictEnabled:e.isOpenImageUnauthPopupStrictEnabled,showUnauthPopup:e.showUnauthPopup,theme:O})}(),function(){if(m&&b!==d.b.compact&&t.photostockUrl)return o.createElement(m,{photostockUrl:t.photostockUrl})}(),b===d.b.twoLines?o.createElement("div",{className:Object(l.a)("Inline")},x(),I(),P()):o.createElement(o.Fragment,null,x(),P(),I()))})})})},176:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n(5),o=n(23),i=n(9),a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getMethods=function(){return this.handlers?this.handlers:this.handlers={hit:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e.cts=e.cts||Date.now(),window.c.hit(s(s({},e),{vars:Object(o.e)(e.vars||"")}),t)},hitDelayed:function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e.cts=e.cts||Date.now(),window.c.hitDelayed(s(s({},e),{vars:Object(o.e)(e.vars||"")}),t)}}},t.prototype.clientAction=function(t){var n=this.getMethods(),r=t.eventData;if(i.a)if(r.data&&r.data.__oldCounter__){var a=r.data,c=a.method,u=a.__oldCounter__,l=a.node;if(this.hrefPrefix){var d=Object(o.d)(u.vars||"");r.data=s(s({},d),{path:u.path}),d["-baobab-event-json"]=encodeURIComponent(JSON.stringify(r)),u.vars=Object(o.e)(d)}var p=n[c];p&&p(u,l)}else e.prototype.clientAction.call(this,t)},t.prototype.sendData=function(){if(this.hrefPrefix){this.events.length<=42&&e.prototype.sendData.call(this);for(var t=this.events;t.length;)this.events=t.splice(0,42),e.prototype.sendData.call(this)}},t.prototype.sendByAjax=function(t){return!!this.hrefPrefix&&e.prototype.sendByAjax.call(this,t)},t}(r.Sender),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.createEvent=function(t,n,r,o){var i=e.prototype.createEvent.call(this,t,n,r,o),a=o.counter;return a&&(i.data=a),i},t}(r.Logger)},179:function(e,t,n){"use strict";var r=n(0),o=function(e,t){return"boolean"===typeof t?t:!e};t.a=function(e){return Object(r.useReducer)(o,e)}},18:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r={BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46};function o(e,t){return t.some(function(t){return r[t]===e||t===e})}},19:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"p",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"m",function(){return c}),n.d(t,"l",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"g",function(){return h}),n.d(t,"f",function(){return m}),n.d(t,"j",function(){return v}),n.d(t,"n",function(){return g}),n.d(t,"h",function(){return b}),n.d(t,"o",function(){return y}),n.d(t,"i",function(){return O});var r,o=n(28),i=n(149);!function(e){e.UPDATE_CONFIG="UPDATE_CONFIG",e.UPDATE_CONTEXT="UPDATE_CONTEXT",e.ADD_IMAGES_BY_THUMB="ADD_IMAGES_BY_THUMB",e.ADD_IMAGES_BY_POS="ADD_IMAGES_BY_POS",e.SET_IMAGES_BY_POS="SET_IMAGES_BY_POS",e.SET_CURRENT_ITEM_IDX="SET_CURRENT_ITEM_IDX",e.ADD_LOADED_THUMB_DATA="ADD_LOADED_THUMB_DATA",e.ADD_LOADED_RIM_THUMB_DATA="ADD_LOADED_RIM_THUMB_DATA",e.ADD_DIRECT_DATA="ADD_DIRECT_DATA",e.ADD_FAVICON_DATA="ADD_FAVICON_DATA",e.ADD_TAGS_DATA="ADD_TAGS_DATA",e.ADD_RIM_DATA="ADD_RIM_DATA",e.SET_SELECTED_RIM="SET_SELECTED_RIM",e.REQUEST_RIM_PAGE="REQUEST_RIM_PAGE",e.ADD_CROP_OBJECT="ADD_CROP_OBJECT",e.SET_TRIMMER_AREA="SET_TRIMMER_AREA",e.SET_IMAGES_BY_ID="SET_IMAGES_BY_ID",e.SET_SELECTED_COMMERCIAL_CROP="SET_SELECTED_COMMERCIAL_CROP"}(r||(r={}));var a=function(e){return{type:r.UPDATE_CONTEXT,context:e}},s=function(e){return{type:r.ADD_IMAGES_BY_POS,items:e}},c=function(e){return{type:r.SET_IMAGES_BY_POS,items:e}},u=function(e){return{type:r.SET_IMAGES_BY_ID,items:e}},l=function(e){return{type:r.SET_CURRENT_ITEM_IDX,index:e}},d=function(e,t,n){return{type:r.ADD_LOADED_THUMB_DATA,id:e,index:n,data:t}},p=function(e,t){return{type:r.ADD_LOADED_RIM_THUMB_DATA,id:e,data:t}},f=function(e,t){return{type:r.ADD_FAVICON_DATA,id:e,data:t}},h=function(e,t){return{type:r.ADD_TAGS_DATA,id:e,data:t}},m=function(e,t){return{type:r.ADD_RIM_DATA,id:e,data:t}},v=function(){return{type:r.REQUEST_RIM_PAGE}},g=function(e){return{type:r.SET_SELECTED_RIM,idx:e}},b=function(e){return{type:r.SET_SELECTED_COMMERCIAL_CROP,idx:e}},y=function(e){return{type:r.SET_TRIMMER_AREA,area:e}},O=function(e,t,n,a){if(n&&a){var s=t.cropObjects[n];if(!(s&&s.expireTime>Date.now())){var c=t.globalContext.tld;Object(o.get)(Object(i.a)("images",c,{rpt:"cv",url:a,format:"json",request:JSON.stringify({blocks:[{block:{block:"crop-objects",mods:{ajax:"yes"}},params:{},version:2}]})}),{format:"json"},{successCallback:function(t){var o=t&&t.blocks;if(o){for(var i,a=0;a<o.length;a++){var s=o[a];if("crop-objects"===(s.name&&s.name.block)){i=s;break}}if(i){var c=i.params&&i.params.objects;c&&e(function(e,t){return{type:r.ADD_CROP_OBJECT,data:t,imageId:e,timestamp:Date.now()}}(n,c))}}}})}}}},190:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){var e=Object(r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}},192:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e}},197:function(e,t,n){"use strict";var r=n(11),o=function(){function e(){var e=this;this.onKeyDown=function(){window.clearTimeout(e.timeoutId),e.isPointer=!1},this.onMouseDown=function(){e.isPointer=!0,window.clearTimeout(e.timeoutId),e.timeoutId=window.setTimeout(function(){return e.isPointer=!1},600)},this.onFocus=function(){e.isPointer?(window.document.body.classList.add("pointerfocus"),window.document.body.classList.remove("utilityfocus")):(window.document.body.classList.add("utilityfocus"),window.document.body.classList.remove("pointerfocus"))},this.onBlur=function(){window.addEventListener("focus",e.setIsPointerOnTabFocus,!0)},this.setIsPointerOnTabFocus=function(){window.removeEventListener("focus",e.setIsPointerOnTabFocus,!0),window.document.body.classList.contains("pointerfocus")&&(e.isPointer=!0,window.setTimeout(function(){return e.isPointer=!1}))},this.timeoutId=0,this.isPointer=!1,window.addEventListener("blur",this.onBlur),window.document.addEventListener("keydown",this.onKeyDown),window.document.addEventListener("mousedown",this.onMouseDown),window.document.addEventListener("mouseup",this.onMouseDown),window.document.addEventListener("focusin",this.onFocus),window.document.body.classList.contains("pointerfocus")||window.document.documentElement.classList.contains("pointerfocus")||window.document.body.classList.add("utilityfocus")}return e.create=function(){return new e},e.prototype.dispose=function(){window.removeEventListener("blur",this.onBlur),window.document.removeEventListener("keydown",this.onKeyDown),window.document.removeEventListener("mousedown",this.onMouseDown),window.document.removeEventListener("mouseup",this.onMouseDown),window.document.removeEventListener("focusin",this.onFocus),window.document.body.classList.remove("pointerfocus","utilityfocus")},e}(),i=null;Object(r.a)()&&null===i&&(i=o.create())},198:function(e,t,n){"use strict";function r(e,t){if("function"!==typeof URL){var n=document.createElement("a");return n.href=e,{hostname:n.hostname,port:n.port,protocol:n.protocol,origin:n.origin}}try{return new URL(e,t)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=r,t.getOrigin=function(e){var t="string"===typeof e?r(e):e;if(!t)return"";if(t.origin)return t.origin;var n=t.port?":"+t.port:"";return t.protocol+"//"+t.hostname+n},t.getHostname=function(e,t){var n=r(e,t);return n?n.hostname:""}},2:function(e,t,n){"use strict";e.exports=n(101)},203:function(e,t,n){"use strict";n.d(t,"h",function(){return a}),n.d(t,"i",function(){return s}),n.d(t,"j",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"g",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"f",function(){return m});var r=n(7),o=n(48),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=Object(o.a)("tags");function s(e){return e&&e.rimid}function c(e){var t=e.query;return{tld:e.tld,text:t}}var u=Object(o.a)("rimData"),l=s;var d=Object(o.d)(function(e,t){if(void 0!==t){var n=e.rimForItem;return n&&n[t]}}),p=Object(o.c)(function(e){var t=d(e,e.rimSelectedIdx);return[t,Object(r.c)(e),t?e.loadedThumbs[t.id]:void 0]},function(e,t,n){if(e)return i(i({},e),{isRim:!0,parentPos:t&&t.pos,loadedImage:n})});function f(e,t,n){for(var r=[],o=t+n,i=t;i<o;i++){var a=l(e[i]);a&&r.push(a)}return r}function h(e,t,n){void 0===t&&(t={});var r=e.filter(function(e){var r=n&&n[e.thumb.url];return e.rimid&&(!t||!t[e.rimid])&&(!r||!r.isFailed)});return r.length===e.length?e:r}function m(e,t,n){for(var r=[],o=0;o<e.length&&(!n||r.length<n);o++){var i=e[o];i&&i.thumb&&!t[i.thumb.url]&&r.push(i.thumb)}return r}},204:function(e,t,n){n.r(t);var r=n(2499);n.d(t,"en",function(){return r.a})},205:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a});var r=n(4),o=Object(r.cn)("ShopRating"),i=o(),a=o("Icon")},206:function(e,t,n){"use strict";n.d(t,"PriceCurrency",function(){return f});var r=n(0),o=n.n(r),i=n(6),a=n.n(i),s=n(434),c=n(294),u=(n(288),a()(s)),l={RUR:"RUB",BYR:"BYN"},d={RUB:"₽",EUR:"€",USD:"$",UAH:"₴",KZT:"₸"},p={RUB:u("руб."),EUR:u("евро"),USD:u("долл."),UAH:u("грн."),KZT:u("тнг."),BYN:u("б.p."),TRY:"TL"};var f=function(e){var t=function(e){var t=e.currency,n=e.showAbbr,r=e.rurSymbolFont,i=e.key,a=l[t]||t;return r&&"RUB"===a&&!n?o.a.createElement(c.a,{key:i}):!n&&d[a]||p[a]||a}(e);return"string"===typeof t?o.a.createElement(o.a.Fragment,null,t):t}},207:function(e,t,n){n.r(t);var r=n(2527);n.d(t,"en",function(){return r.a})},208:function(e,t,n){var r,o,i;!function(n,a){o=[t],void 0===(i="function"===typeof(r=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),i=[],a=!1,s=-1,c=void 0,u=void 0,l=function(e){return i.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},d=function(e){var t=e||window.event;return!!l(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},p=function(){setTimeout(function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==c&&(document.body.style.overflow=c,c=void 0)})};e.disableBodyScroll=function(e,r){if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!i.some(function(t){return t.targetElement===e})){var p={targetElement:e,options:r||{}};i=[].concat(t(i),[p]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,o,i;1===t.targetTouches.length&&(r=e,i=(n=t).targetTouches[0].clientY-s,!l(n.target)&&(r&&0===r.scrollTop&&0<i?d(n):(o=r)&&o.scrollHeight-o.scrollTop<=o.clientHeight&&i<0?d(n):n.stopPropagation()))},a||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),a=!0)}}else{h=r,setTimeout(function(){if(void 0===u){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(u=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===c&&(c=document.body.style.overflow,document.body.style.overflow="hidden")});var f={targetElement:e,options:r||{}};i=[].concat(t(i),[f])}var h},e.clearAllBodyScrollLocks=function(){o?(i.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),a&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1),i=[],s=-1):(p(),i=[])},e.enableBodyScroll=function(e){if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,i=i.filter(function(t){return t.targetElement!==e}),a&&0===i.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),a=!1)}else(i=i.filter(function(t){return t.targetElement!==e})).length||p()}})?r.apply(t,o):r)||(e.exports=i)}()},209:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(38),a=n(136);t.useBaobab=function(e){var t=o.useContext(i.BaobabContext),n=o.useRef({logEvent:function(){return function(){}},startCreate:!1}),s=o.useMemo(function(){if(t){var o=t.logger,i=t.parentNode,a=i?o.prepareChild(i,e):o.prepareRoot(e),s=n.current;return s.startCreate=!0,s.nextContext=r(r({},t),{parentNode:a}),s.node=a,s.logEvent=function(e,t,n){if(!s.node||!s.nextContext)return function(){};var r=s.node,o=s.nextContext.logger,i=o.createEvent(r,e,t,n),a=o.withEvent.bind(o,i);return a(function(e){return setTimeout(e,0)}),o.dispatchEvent(r,i),a},a}},[t,e]);return o.useEffect(function(){var e=n.current;if(e.startCreate){if(!t||!s)throw new a.BaobabNotInitError;return t.logger.attachNode(s),e.startCreate=!1,s.__useBaobab=!0,function(){return t.logger.detachNode(s)}}},[t,e,s]),o.useMemo(function(){var e=n.current;return{logEvent:e.logEvent,nextContext:e.nextContext,node:e.node}},[])}},21:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var r=n(3),o=n(0),i=n.n(o),a=n(4),s=(n(140),Object(a.cn)("Icon")),c=function(e){var t=e.direction,n=e.size,o=e.url,a=e.style,c=void 0===a?{}:a,u=e.children,l=e.title,d=e.onClick,p=(e.type,e.glyph,Object(r.__rest)(e,["direction","size","url","style","children","title","onClick","type","glyph"])),f=s({direction:t,size:n},[p.className]);return void 0!==o&&(c.backgroundImage="url('"+o+"')"),i.a.createElement("span",Object(r.__assign)({},p,{"aria-hidden":!0,className:f,style:c,title:l,onClick:d}),u)};c.displayName=s()},210:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(104);t.withBaobab=function(e,t){var n=function(t){var n=t.displayName||t.name||"Component",s=function(n){var s=n.__forwardedRef__,c=n.logNode,u=o(n,["__forwardedRef__","logNode"]);return i.createElement(a.BaobabComponents.Consumer,null,function(n){var o=n.BaobabNode;return i.createElement(o,{nodeDeclaration:e,logNode:c,childProps:u},function(e){return i.createElement(t,r({},u,e,{ref:s}))})})};if(s.displayName="AddBaobab("+n+")",e.extra&&e.extra.ref){var c=i.forwardRef(function(e,t){return i.createElement(s,r({},e,{__forwardedRef__:t}))});return c.displayName="AddBaobab("+n+")",c}return s};return t?n(t):n}},211:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(138),s=n(104);t.withBaobabRoot=function(e,t,n,c){return function(u){return function(l){var d=l.baobab,p=l.logNode,f=o(l,["baobab","logNode"]),h=i.useContext(s.BaobabComponents).BaobabNode;return i.createElement(a.BaobabRoot,{Logger:t,Sender:n,loggerProps:d,onLoggerInit:c},e?i.createElement(h,{nodeDeclaration:e,logNode:p,childProps:f},function(e){return i.createElement(u,r({},f,e))}):i.createElement(u,r({},f)))}}}},212:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(38),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextContext={logger:t.props.logger,parentNode:t.props.parentNode},t}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.logger,r=e.parentNode;return(this.nextContext.logger!==n||this.nextContext.parentNode!==r)&&(this.nextContext={logger:n,parentNode:r}),o.createElement(i.Provider,{value:this.nextContext},t)},t}(o.Component);t.BaobabAppendTo=a},213:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getBundleUrl=function(){return"https://frontend-internal.s3.mds.yandex.net/baobab-viewer/"+t.props.version+"/button.js"},t}return r(t,e),t.prototype.componentDidMount=function(){var e=document.createElement("script");e.src=this.getBundleUrl(),e.async=!0,e.id="BaobabViewerInject",e.dataset.version=this.props.version,e.dataset.service=this.props.service,e.dataset.positionX=this.props.positionX,e.dataset.positionY=String(this.props.positionY),document.body.appendChild(e)},t.prototype.render=function(){return null},t.defaultProps={version:"0.3.0",positionX:"left",positionY:0},t.useLogger=function(e){window.__baobabLogger=e},t}(n(0).Component);t.BaobabInjectorButton=o},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.function=0]="function",e[e.class=1]="class",e[e.portalHost=4]="portalHost",e[e.host=5]="host"}(t.WorkTag||(t.WorkTag={}))},215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventDataAttrsConstructor=function(e){return"function"===typeof e},t.isEventDeclaration=function(e){return Boolean(e)},t.isNodeAttrsConstructor=function(e){return"function"===typeof e}},216:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Click="click",e.Scroll="scroll",e.Tech="tech",e.Create="show",e.Append="append",e.Visibility="visibility"}(t.BaobabLogEventType||(t.BaobabLogEventType={})),function(e){e.Show="show",e.Hide="hide"}(t.VisibilityChangeType||(t.VisibilityChangeType={})),t.isTreeNode=function(e){return"key"in e},t.isChildNode=function(e){return"parent"in e},t.isRootNode=function(e){return!("parent"in e)}},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NoSend="no send",e.SendBeacon="sendBeacon",e.Ajax="ajax",e.Img="tag img"}(t.BaobabSendWay||(t.BaobabSendWay={}))},218:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getCacheKey=function(e){if(e.key)return e.key;var t=e.attrs,n=e.name;if(t)for(var r in n+=":",t)n+=""+r+t[r];return n},t.prototype.createChildNode=function(t,n){var r,i,a=this.getCacheKey(t),s=n.mapChildren[a];if(s)try{for(var c=o(s),u=c.next();!u.done;u=c.next()){var l=u.value;if(!l.flags.created)return l.flags.created=!0,l}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var d=e.prototype.createChildNode.call(this,t,n);return s?s.push(d):n.mapChildren[a]=[d],d},t}(n(105).Logger);t.LoggerWithCache=i},219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),o=function(){function e(e){var t=e.hrefPrefix,n=e.hrefPostfix;this.events=[],this.waitTime=100,this.hrefPrefix=t,this.hrefPostfix=n}return e.prototype.clientAction=function(e,t){var n=e.eventData.event;if(n===r.BaobabLogEventType.Click)this.click(e,t);else if(n===r.BaobabLogEventType.Scroll)this.scroll(e,t);else{if(n!==r.BaobabLogEventType.Tech)throw new Error("Неподдерживаемый тип события в Баобаб: "+n);this.tech(e,t)}},e.prototype.click=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Click,service:o.service,subservice:o.subservice,"event-id":o.id,id:n.id,cts:o.cts,data:o.data,behaviour:o.behaviour},t)},e.prototype.scroll=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Scroll,service:o.service,subservice:o.subservice,"event-id":o.id,id:n.id,cts:o.cts,data:o.data},t)},e.prototype.tech=function(e,t){var n=e.node,o=e.eventData;this.logEvent({event:r.BaobabLogEventType.Tech,service:o.service,subservice:o.subservice,type:o.type,"event-id":o.id,id:n.id,cts:o.cts,data:o.data},t)},e.prototype.appendTree=function(e,t){var n=e.node,o=e.eventData;this.logShowEvent({event:r.BaobabLogEventType.Append,tree:n,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted},t)},e.prototype.createTree=function(e,t){var n=e.node,o=e.eventData;this.logShowEvent({event:r.BaobabLogEventType.Create,tree:n,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted},t)},e.prototype.detachTree=function(e,t){var n=e.node,o=e.eventData,i={event:r.BaobabLogEventType.Visibility,type:r.VisibilityChangeType.Hide,"block-id":n.id,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted};this.logEvent(i,t)},e.prototype.attachTree=function(e,t){var n=e.node,o=e.eventData,i={event:r.BaobabLogEventType.Visibility,type:r.VisibilityChangeType.Show,"block-id":n.id,cts:o.cts,"trigger-event-id":o.triggerEvent?o.triggerEvent.id:null,"trigger-event-trusted":o.triggerEventTrusted};this.logEvent(i,t)},e.prototype.logEvent=function(e,t){var n=this;this.events.push({data:e,listener:t}),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(function(){return n.sendData()},this.waitTime)},e.prototype.logShowEvent=function(e,t){this.sendByAjax([{data:e,listener:t}])},e.prototype.sendData=function(){for(var e=this,t=0;t<this.events.length;t+=42){var n=this.events.slice(t,t+42),r=n.map(function(t){return"/events="+encodeURIComponent(JSON.stringify([t.data]))+e.hrefPostfix}).join("\r\n").length>6e4;-1!==navigator.userAgent.indexOf("Chrome")&&r?this.sendByAjax(n):this.sendBySendBeacon(n)||this.sendByImg(n)}this.events=[]},e.prototype.sendBySendBeacon=function(e){var t=this;if(!navigator.sendBeacon)return!1;var n=this.getEventRecords(e).join("\r\n");return!!navigator.sendBeacon(this.hrefPrefix,n)&&(e.forEach(function(e){return t.eventSend(e,{way:r.BaobabSendWay.SendBeacon,sentContentLength:n.length,success:!0})}),!0)},e.prototype.sendByImg=function(e){var t=this;return this.getEventRecords(e).forEach(function(n,o){var i=document.createElement("img"),a=t.hrefPrefix+n;i.addEventListener("load",function(){return t.eventSend(e[o],{way:r.BaobabSendWay.Img,sentContentLength:a.length,success:!0})}),i.addEventListener("error",function(){return t.eventSend(e[o],{way:r.BaobabSendWay.Img,sentContentLength:a.length,success:!1})}),i.src=a}),!0},e.prototype.sendByAjax=function(e){var t=this,n=this.getEventRecords(e).join("\r\n"),o=new XMLHttpRequest;return o.addEventListener("readystatechange",function(){o.readyState===XMLHttpRequest.DONE&&e.forEach(function(e){return t.eventSend(e,{way:r.BaobabSendWay.Ajax,success:200===o.status,sentContentLength:n.length,status:o.status,xmlHttpRequest:o})})}),o.open("POST",this.hrefPrefix),o.send(n),!0},e.prototype.getEventRecords=function(e){var t=this;return e.map(function(e){return"/events="+encodeURIComponent(JSON.stringify([e.data]))+t.hrefPostfix})},e.prototype.eventSend=function(e,t){e.listener&&e.listener({eventData:e.data,sendInfo:t})},e}();t.Sender=o},22:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(11),o=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(r.a)()&&requestAnimationFrame(function(){t.forEach(function(t){void 0!==e&&void 0!==t&&("function"===typeof t?t(e.current):t.current=e.current)})}),e};function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){e.forEach(function(e){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)})}}},220:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(51);function a(e){return e.tag===i.WorkTag.host&&(Boolean(e.pendingProps&&e.pendingProps.onClick)||"a"===e.type||"button"===e.type)}function s(e){return Boolean(e&&"pendingProps"in e&&"sibling"in e&&"child"in e&&"return"in e&&"tag"in e&&"type"in e&&"stateNode"in e)}function c(e){var t,n,r,o=null===(r=null===(n=null===(t=e)||void 0===t?void 0:t.updateQueue)||void 0===n?void 0:n.lastEffect)||void 0===r?void 0:r.deps;if(Array.isArray(o))for(var i=0;i<o.length;i++){var a=o[i];if(a&&a.__useBaobab)return a}}function u(e){return Boolean(e&&(e.tag===i.WorkTag.function||e.tag===i.WorkTag.class)&&("isBaobabNode"in e.type&&e.type.isBaobabNode||c(e)))}function l(e){if(u(e))return e.stateNode?e.stateNode.node:c(e)}function d(e){if(e)return s(e)?e:function(e){return e._reactRootContainer&&e._reactRootContainer._internalRoot.current||void 0}(e)||function(e){var t=function(e){var t=Object.keys(e).reduce(function(e,t){return e||0===t.indexOf("__reactInternalInstance$")&&t},!1);return t?e[t]:void 0},n=t(e);if(!n&&e.firstElementChild)for(var r=t(e.firstElementChild);r;){if(r.tag===i.WorkTag.portalHost&&r.stateNode.containerInfo===e){n=r;break}r=r.return||void 0}return n}(e)}function p(e){if(e)for(var t=d(e);t;){if(u(t))return t;t=t.return||void 0}}function f(e,t){for(var n=[],r=t?d(e):p(e);r;){var o=r.child,s=l(r);if(s){var c={path:(t&&t.path?t.path+".":"")+s.name,baobab:s},u=o?f(o,c):[];u.length>0&&(c.children=u),n=n.concat(c)}else{var h=a(r);if(r.tag===i.WorkTag.host&&t&&!t.container&&(t.container=r.stateNode),h){var m=r.stateNode;t||(t={path:"",baobab:void 0}),!t.baobab||t.clickElement||t.errorElements?(t.errorElements||(t.errorElements=t.clickElement?[t.clickElement]:[],delete t.clickElement),t.errorElements.push(m)):t.clickElement=m}o&&(n=n.concat(f(o,t)))}r=r.sibling||void 0}return n}t.isClickableComponents=a,t.isReactInternalFiber=s,t.getBaobabNodeFromUseBaobab=c,t.isReactBaobabNode=u,t.getNodeFromThis=l,t.getComponent=d,t.getBaobabComponent=p,t.getNode=function(e){if(e){var t=p(e);return t?l(t):void 0}},t.findById=function e(t,n){return t.baobab&&t.baobab.id===n?t:t.children&&t.children.reduce(function(t,r){return t||e(r,n)},void 0)},t.createTree=f,t.getAllTrees=function(e){var t=document.querySelectorAll(e);return o(t).reduce(function(e,t){return t?e.concat(f(t)):e},[])},t.filterErrors=function e(t){var n=t.errorElements?[t]:[];return t.children?t.children.reduce(function(t,n){return t.concat(e(n))},n):n}},221:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(51),i=n(105);function a(e,t,n){void 0===n&&(n={});var i={name:n.name||t.name},a=n.key||t.key;if(a&&(i.key=a),(t.events||n.events)&&(i.events=r(r({},t.events),n.events)),t.attrs||n.attrs){var s=o.isNodeAttrsConstructor(t.attrs)?t.attrs(e):t.attrs,c=o.isNodeAttrsConstructor(n.attrs)?n.attrs(e):n.attrs;i.attrs=r(r({},s),c)}return i}t.createChildData=a,t.createRootData=function(e,t,n){var r=a(e,t,n);return void 0===r.attrs&&(r.attrs={}),"schema-ver"in r.attrs||(r.attrs["schema-ver"]=i.SCHEMA_VER),r},t.areEqualsNodes=function(e,t,n){var r,o;if(e.key||t.key)return e.key===t.key;if(e.name!==t.name)return!1;if("parent"in e&&e.parent.id!==(null===(r=n)||void 0===r?void 0:r.id))return!1;if(!("parent"in e)&&(null===(o=n)||void 0===o?void 0:o.id))return!1;var i=e.attrs,a=t.attrs;if(i===a)return!0;if(!i||!a)return!1;if(Object.keys(i).length!==Object.keys(a).length)return!1;for(var s in i)if(i[s]!==a[s])return!1;return!0}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBaobabInitState=function(e){return{prefix:function(e){if("string"!==typeof e)return"b-id";for(var t=0,n=0;n<e.length;n++)t^=(t<<5)+(t>>>2)+e.charCodeAt(n);return(t&=1048575).toString(36)}(e.reqId),senderParams:function(e){if("hrefPostfix"in e)return{hrefPostfix:e.hrefPostfix,hrefPrefix:e.hrefPrefix};var t=e.reqId,n=e.table,r=e.service,o=e.slots,i=Array.isArray(o)?"/slots="+o.join(";"):"";return{hrefPostfix:"/*//"+e.pageUrl,hrefPrefix:"https://yandex.ru/clck/click/reqid="+t+i+"/table="+(n||r)}}(e)}}},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={lt:"<",gt:">",quot:'"',apos:"'",amp:"&",raquo:"»",laquo:"«",ndash:"–",mdash:"—",lsquo:"‘",lsaquo:"‹",rsquo:"’",rsaquo:"›",acute:"´",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",prime:"′",Prime:"″",deg:"°",reg:"®",copy:"©",trade:"™",sup2:"²",nbsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",middot:"·",hellip:"…",Oslash:"Ø","#8381":"₽","#039":"'","#8203":"​","#092":"\\"},o=new RegExp("&(("+Object.keys(r).join("|")+")|#(x[0-9A-Fa-f]+|[0-9]+));","g");function i(e){try{return String.fromCodePoint(e)}catch(e){return""}}function a(e){if(isNaN(e)||e<0)return"";if(e>65535){if(e>1114111)return"";var t=e-65536;return String.fromCharCode(55296+(t>>10),56320+(1023&t))}return String.fromCharCode(e)}t.parseCodeToCharNative=i,t.parseCodeToCharFallback=a;var s="function"===typeof String.fromCodePoint?i:a;t.decodeHTMLEntities=function(e){return e.replace(o,function(e,t,n,o){return n?r[n]||"":o?s(Number("0"+o)):""})}},226:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(3),o=n(0),i=n.n(o),a=n(17),s=(n(329),function(e){var t=e.autoComplete,n=void 0===t?"off":t,o=e.autoFocus,s=e.className,c=e.controlRef,u=e.defaultValue,l=e.disabled,d=e.id,p=e.inputMode,f=e.max,h=e.maxLength,m=e.min,v=e.name,g=e.onBlur,b=e.onChange,y=e.onFocus,O=e.onKeyDown,w=e.onKeyPress,C=e.onKeyUp,E=e.pattern,j=e.placeholder,S=e.readOnly,_=e.required,k=e.tabIndex,I=e.type,P=e.value,x=Object(r.__rest)(e,["autoComplete","autoFocus","className","controlRef","defaultValue","disabled","id","inputMode","max","maxLength","min","name","onBlur","onChange","onFocus","onKeyDown","onKeyPress","onKeyUp","pattern","placeholder","readOnly","required","tabIndex","type","value"]);return i.a.createElement("input",Object(r.__assign)({},x,{autoComplete:n,autoFocus:o,className:Object(a.b)("Control",null,[s]),defaultValue:u,disabled:l,id:d,inputMode:p,max:f,maxLength:h,min:m,name:v,onBlur:g,onChange:b,onFocus:y,onKeyDown:O,onKeyPress:w,onKeyUp:C,pattern:E,placeholder:j,readOnly:S,ref:c,required:_,tabIndex:k,type:I,value:P}))})},227:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(3),o=n(0),i=n.n(o),a=n(17),s=(n(330),function(e){var t=e.className,n=Object(r.__rest)(e,["className"]);return i.a.createElement("span",Object(r.__assign)({},n,{className:Object(a.b)("Box",null,[t])}))})},228:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3),o=n(0),i=n(17),a=(n(331),n(332),n(333),function(e){var t=e.component,n=e.side,a=Object(r.__rest)(e,["component","side"]);return Object(o.cloneElement)(t,Object(r.__assign)(Object(r.__assign)({},a),{className:Object(i.b)("Icon",{side:n},[t.props.className])}))})},229:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=n(17),a=(n(334),function(e){var t=e.leave,n=e.onAnimationEnd,r=e.children,a=e.id;return o.a.createElement("span",{className:Object(i.b)("Hint",{leave:t}),onAnimationEnd:n,id:a},r)})},23:function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return u});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function i(e,t){if("string"===typeof e||!e)return e||"";if(Array.isArray(e))return e.join(",");var n=t?"-":"";return Object.keys(e).filter(function(t){return"undefined"!==typeof e[t]&&""!==e[t]}).map(function(t){return""+n+t+"="+e[t]}).join(",")}function a(e){if(e)return e.logNode}function s(e,t,n,o){void 0===t&&(t={}),void 0===n&&(n={}),void 0===o&&(o={href:""});var a=c(e);if(!a||!a.__oldCounter__)return a;var s=a.__oldCounter__,l=i(r(r({},u(s.vars||{})),u(t)));return r(r({},a),{__oldCounter__:r(r(r({},s),{vars:l}),n),node:o})}function c(e){if(e&&Array.isArray(e.counter)){var t=o(e.counter,2),n=t[0],r=t[1];return{__oldCounter__:{path:n||"",vars:r||""}}}return e||{}}function u(e){return void 0===e&&(e={}),"object"===typeof e?e:e.split(",").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})}},230:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),o=n(0),i=n.n(o),a=n(50),s=n(22),c=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.controlRef=Object(o.createRef)(),e}return Object(r.__extends)(n,t),n.prototype.componentDidUpdate=function(e){null!==this.controlRef.current&&this.props.focused!==e.focused&&(this.props.focused?this.controlRef.current.focus():this.controlRef.current.blur())},n.prototype.render=function(){var t=this.props.controlRef,n=void 0===t?null:t;return i.a.createElement(e,Object(r.__assign)({},this.props,{controlRef:Object(s.a)(this.controlRef,n)}))},n}(o.PureComponent)).displayName="withAutoFocus("+Object(a.a)(e)+")",t}},232:function(e,t,n){},233:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(281),Object(r.withBemMod)(Object(o.b)(),{theme:"action"}))},234:function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return O});var r=n(0),o=n(6),i=n.n(o),a=n(5),s=n(2),c=n(23),u=n(97),l=n(259),d=n(131),p=n(61),f=n(318),h=(n(654),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},g=i()(f),b=function(e){function t(t){var n=e.call(this,t)||this;return n.loadedCount=0,n.shownCounted=!1,n.onErrorHandler=n.onErrorHandler.bind(n),n.onLoadHandler=n.onLoadHandler.bind(n),n.onImageLoadingResult=n.onImageLoadingResult.bind(n),n.state={banned:{},clearOffers:t.offers},n}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.offers,n=e.className;this.prevOffers!==t&&(this.prevOffers=t,this.loadedCount=0,this.shownCounted=!1);var o=this.getRenderedOffersList();return o?r.createElement("div",{className:Object(p.b)({withMarket:this.props.isMarket,offersInRow:this.props.offersInRow||2},[d.a,n])},r.createElement("div",{className:Object(p.b)("Header",[l.a])},this.props.title),r.createElement("div",{className:Object(p.b)("Content")},o)):null},t.prototype.getRenderedOffersList=function(){var e=this,t=this.state.banned,n=this.props,o=n.offers,i=n.theme,a=n.isMarket,c=o.filter(function(e){return e.image&&e.image.url&&!t[e.image.url]});return c.length?r.createElement(s.ComponentRegistryConsumer,{id:p.a},function(t){var n=t.OfferCard;return r.createElement(r.Fragment,null,c.map(function(t,o){var s;return r.createElement(n,m({className:Object(p.b)("Offer"),key:t.link,theme:i,withMarket:a,pos:o},t,{onError:e.onErrorHandler(t),extendedClickArea:e.props.extendedClickArea,counters:null===(s=e.props.counters)||void 0===s?void 0:s.offer,onImageLoad:e.onLoadHandler}))}))}):null},t.prototype.onErrorHandler=function(e){var t=this;return function(){var n;return t.setState({banned:m(m({},t.state.banned),(n={},n[e.image&&e.image.url||""]=!0,n))},function(){t.onImageLoadingResult()})}},t.prototype.onLoadHandler=function(){this.loadedCount++,this.onImageLoadingResult()},t.prototype.onImageLoadingResult=function(){if(this.props.onShow&&!this.shownCounted){var e=this.props.offers,t=this.state.banned,n=e.reduce(function(e,n){return e+(t[n.image.url]?1:0)},0);this.loadedCount+n===e.length&&(this.shownCounted=!0,this.props.onShow({count:this.loadedCount}))}},t}(r.PureComponent),y={title:g("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},O=Object(a.withBaobab)({name:"similar-offers",events:{onShow:Object(a.logTech)("show",function(e,t){var n,r=e.props,o=v(t,1)[0];return Object(c.b)(null===(n=r.counters)||void 0===n?void 0:n.show,{"-count":String(o.count)})})}})(Object(u.a)(y)(b))},235:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(void 0,o(n)))}})}t.getDisplayName=function(e){return e.displayName||e.name||"Component"},t.compose=a,t.useHocks=function(e){return i.useMemo(function(){return a.apply(void 0,o(e))},[e])}},236:function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"===typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!==typeof document){"number"===typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!==typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})})},239:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MediaViewer")},2391:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Пожаловаться":"Report"}},24:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n(4),o=n(11),i=Object(r.cn)("Theme"),a="",s=function(e){var t=e.theme,n=e.root,r=void 0===n?Object(o.a)()?document.body:null:n;if(Object(o.a)()){if(!r)throw new Error("Значение в root не является DOM-элементом, невозможно установить глобальную тему.");var s=r.className.replace(a,"");a=i(t),r.className=s+" "+a}}},240:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e}},2400:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Открыть в полноэкранном режиме":"Open in full-screen mode","Поиск по фрагменту картинки":"Search by image fragment","Распознать товары на картинке":"Распознать товары на картинке"}},2409:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Закрыть":"Close","Запустить":"Start","Остановить":"Stop"}},2418:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Не удалось загрузить картинку, возможно, она есть на {link}":"Couldn't download image. Check if it's available on {link}","сайте":"the website","сервисе Яндекс.Картинки":"Yandex.Images"}},2427:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Искать":"Search","Отменить":"Cancel","Укажите выше область для поиска по картинке":"Select the area of the image that you want to use for image search"}},243:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return v});var r,o=n(0),i=n(113),a=n(48),s=n(158),c=n(309),u=n(67),l=(n(564),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.alwaysCenter=1]="alwaysCenter",e[e.fijiStyle=2]="fijiStyle"}(r||(r={}));var p={name:"gallery"},f=Object(u.a)("Container"),h=Object(a.d)(function(e){return Object(u.a)(null,[e])}),m=function(e){function t(t){var n=e.call(this,t)||this;return n.dragging=!1,n.wasDragging=!1,n.wasClicked=!1,n.dragStartMouseX=0,n.dragStartGalleryX=0,n.wasDraggingTime=0,n.container=o.createRef(),n.rootNode=o.createRef(),n.selectedNode=o.createRef(),n.firstNode=o.createRef(),n.onWheel=n.onWheel.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onAnimationEnd=n.onAnimationEnd.bind(n),n.renderGalleryItem=n.renderGalleryItem.bind(n),n.onItemClickHandler=n.onItemClickHandler.bind(n),n.state={},n}return l(t,e),t.prototype.getSnapshotBeforeUpdate=function(){if(!this.props.fixedPositionOnUpdate)return null;var e=this.container.current;if(!e)return null;var t=e.getBoundingClientRect(),n=t.height/2,r=t.left+t.width/2-n/2,o=t.top+n,i=document.elementFromPoint(r,o);return i===e&&(i=document.elementFromPoint(r+n,o)),i&&i!==e?{baseNode:i,wasPosition:i.getBoundingClientRect().left}:null},t.prototype.componentDidUpdate=function(e,t,n){var o=this.props.vertical,i=this.container.current;if(n&&void 0!==n.wasPosition&&n.baseNode&&i&&i.contains(n.baseNode)){var a=n.baseNode.getBoundingClientRect().left-n.wasPosition;a&&(o?i.scrollTop+=a:i.scrollLeft+=a,void 0!==this.scrollingTarget&&(this.scrollingTarget+=a))}var s=(this.props.selectedIdx||0)-(e.selectedIdx||0);s&&this.props.autoScroll&&(this.wasClicked&&this.props.autoScroll===r.fijiStyle?this.scrollItems(s>0?1:-1):this.scrollIntoCenter()),this.wasClicked=!1},t.prototype.componentDidMount=function(){this.props.autoScroll&&this.scrollIntoCenter(!0)},t.prototype.render=function(){var e=this,t={},n=this.props,r=n.selectedIdx,i=n.vertical,a=this.cachedSelectedItemIdx;return this.cachedChildrenSrc&&this.cachedChildrenSrc===this.props.children?a!==r&&this.cachedChildren&&this.props.children&&(void 0!==a&&(this.cachedChildren[a]=this.renderGalleryItem(this.props.children[a],a,t)),void 0!==r&&(this.cachedChildren[r]=this.renderGalleryItem(this.props.children[r],r,t)),this.cachedSelectedItemIdx=this.props.selectedIdx):(this.cachedChildrenSrc=this.props.children,this.cachedSelectedItemIdx=r,this.cachedChildren=this.props.children?this.props.children.map(function(n,r){return e.renderGalleryItem(n,r,t)}):[]),o.createElement(s.a,{className:h(this.props.className),style:{height:this.props.height,width:this.props.width},onWheel:i?void 0:this.onWheel,forwardRef:this.rootNode,logNode:p},o.createElement("div",{className:f,onScroll:this.props.onScroll,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,ref:this.container},this.cachedChildren))},t.prototype.scrollItems=function(e){var t=this.props.vertical,n=this.selectedNode.current||this.firstNode.current;if(this.container.current&&n&&e){for(var r=n,o=t?r.offsetTop:r.offsetLeft,i=Math.floor(e),a=e>0?1:-1,s=r;0!==i&&r;)(r=i>0?r.nextElementSibling:r.previousElementSibling)&&(s=r),i-=a;o=(t?s.offsetTop:s.offsetLeft)-o,this.animateScrollBy(o)}},t.prototype.scrollIntoCenter=function(e){void 0===e&&(e=!1);var t=this.props.vertical;if(this.container.current&&this.selectedNode.current){var n=this.container.current,r=this.selectedNode.current,o=(t?n.offsetHeight:n.offsetWidth)/2,i=(t?r.offsetTop:r.offsetLeft)-o;e?t?this.container.current.scrollTop=i:this.container.current.scrollLeft=i:this.animateScrollTo(i)}},t.prototype.getScrollPosition=function(){var e=this.props.vertical,t=this.container.current;if(t)return e?{scrollWidth:t.scrollHeight,offsetWidth:t.offsetHeight,totalWidth:t.scrollHeight-t.offsetHeight,rightEdgeOffset:t.scrollHeight-1.5*t.offsetHeight,currentPosition:t.scrollTop}:{scrollWidth:t.scrollWidth,offsetWidth:t.offsetWidth,totalWidth:t.scrollWidth-t.offsetWidth,rightEdgeOffset:t.scrollWidth-1.5*t.offsetWidth,currentPosition:t.scrollLeft}},t.prototype.getNode=function(){return this.rootNode},t.prototype.getContainerNode=function(){return this.container},t.prototype.animateScrollBy=function(e){var t,n=this.props.vertical;this.container.current&&(t=void 0!==this.scrollingTarget?this.scrollingTarget:n?this.container.current.scrollTop:this.container.current.scrollLeft,this.animateScrollTo(t+e))},t.prototype.animateScrollTo=function(e){var t=this,n=this.props.vertical;this.animationStop&&this.animationStop();var r=this.container.current;if(r){this.scrollingTarget=e;var o=e-(n?r.scrollTop:r.scrollLeft);this.animationStop=Object(i.animate)(200,function(e){if(void 0!==t.scrollingTarget){var i=t.scrollingTarget-o*(1-e);n?r.scrollTop=i:r.scrollLeft=i}},i.linear,this.onAnimationEnd)}},t.prototype.onAnimationEnd=function(){this.animationStop=void 0,this.scrollingTarget=void 0},t.prototype.onMouseDown=function(e){var t=this.props.vertical;this.container.current&&(this.wasDragging=!1,this.dragging=!0,this.dragStartMouseX=e.screenX,this.dragStartGalleryX=t?this.container.current.scrollTop:this.container.current.scrollLeft)},t.prototype.onMouseUp=function(){this.wasDragging&&(this.wasDraggingTime=Date.now()),this.dragging=!1},t.prototype.onMouseMove=function(e){var t=this.props.vertical;if(this.dragging&&e.buttons&&this.container.current){var n=this.dragStartMouseX-e.screenX;if(this.wasDragging||!(Math.abs(n)<=3)){this.wasDragging=!0;var r=this.dragStartGalleryX+n;t?this.container.current.scrollTop=r:this.container.current.scrollLeft=r}}else this.dragging=!1},t.prototype.onWheel=function(e){if(this.dragging)e.preventDefault();else{var t=this.container.current;if(!(Math.abs(e.deltaX)>Math.abs(e.deltaY))&&e.deltaY&&t){var n=e.deltaY;e.deltaMode>0&&(n*=16),t.scrollLeft=t.scrollLeft+n}}},t.prototype.onItemClickHandler=function(e){var t=Date.now()-this.wasDraggingTime<10;this.wasDragging=!1,this.props.onClick&&!t&&(this.wasClicked=!0,this.props.onClick(e))},t.prototype.getItemKey=function(e,t,n){for(var r,o=(null===(r=e)||void 0===r?void 0:r.key)||t;n[o];)o+="#"+t;return n[o]=!0,o},t.prototype.getItemRef=function(e){return this.isItemSelected(e)?this.selectedNode:0===e?this.firstNode:void 0},t.prototype.isItemSelected=function(e){return e===this.props.selectedIdx},t.prototype.renderGalleryItem=function(e,t,n){var r=this.isItemSelected(t),i={key:this.getItemKey(e,t,n),idx:t,selected:r,forwardRef:this.getItemRef(t),onClick:this.onItemClickHandler},a="function"===typeof e?e(i):e;return this.props.disableItemWrap?a:o.createElement(c.a,d({},i,{image:a}))},t}(o.Component),v=function(e){return o.createElement(m,d({},e,{ref:e.forwardRef}))}},2436:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В коллекцию":"Add to collection","Добавить в коллекцию":"Add to collection","Другие размеры и похожие":"Other sizes and similar images","Купить оригинал картинки":"Buy image","На сайте фотобанка можно{br0}купить оригинал изображения{br1}и права на его использование":"Go to the photo bank website to{br0}purchase the original image{br1}and the rights to use it","Открыть":"Open","Отправить":"Share","Перейти":"Go to site","Перейти в коллекции":"Go to collections","Похожие":"Similar"}},2445:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Добавлено в":"Added to","Войдите, чтобы добавить в другую коллекцию":"Log in to add it to another collection","Войти и изменить":"Log in and change","Добавляем в коллекцию...":"Adding to the collection...","Изменить":"Change","Не сейчас":"Not now","Не удалось добавить в коллекцию":"Unable to add to the collection","Перейти":"Go"}},2454:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Картинка сохранена":"Image saved","Купить еще место":"Buy more space","Не получается, попробуйте позже или сохраните картинку на компьютер":"Something went wrong. Try again later or save the image on your computer","Нет места на Яндекс.Диске":"Not enough space on Yandex.Disk","Сохранить":"Save","Сохранить на диск":"Save on Yandex.Disk","Сохраняем картинку":"Saving image"}},2463:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Скопировать ссылку":"Copy link","Ссылка скопирована":"Link copied"}},2472:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Войдите в Яндекс, и поиск станет лучше":"Log in to Yandex to improve your search experience","Войдите в Яндекс, чтобы сохранить картинку":"Log in to Yandex to save this image","Мои Яндекс.Картинки":"My Yandex.Images","Не сейчас":"Not now","Пожаловаться":"Report"}},2481:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В других магазинах":"In other stores"}},249:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(26),i=n(163),a=new r.Registry({id:Object(o.b)()});a.set("Tail",i.a);var s=Object(r.withRegistry)(a)(o.a)},2490:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"Go to store"}},2499:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"Go to store","Купить на Маркете":"Купить на Маркете","Магазин на Маркете":"Store on Yandex.Market","Покупка на Маркете":"Покупка на Маркете","Яндекс.Маркет":"Yandex.Market","в магазине":"Buy in store"}},25:function(e,t,n){"use strict";n.d(t,"b",function(){return re}),n.d(t,"d",function(){return ae}),n.d(t,"c",function(){return se}),n.d(t,"a",function(){return ue});var r=n(0),o=n(2),i=n(28),a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=function(){function e(e){this.isLoading=!1,this.chain=[];var t=e.forceFailedReload,n=void 0!==t&&t,r=e.multiRequestLimit,o=void 0===r?1:r,s=e.requestFunction,c=void 0===s?i.get:s,u=e.storeGetter,l=e.storeSetter,d=a(e,["forceFailedReload","multiRequestLimit","requestFunction","storeGetter","storeSetter"]);this.request=c,this.ajaxOptions=d,this.storeGetter=u,this.storeSetter=l,this.loadingParams={forceFailedReload:n},this.multiRequestLimit=o>1?Math.floor(o):1}return e.prototype.precache=function(e,t){var n=this;e.forEach(function(e,r){var o=n.getItemID(e);n.getFromStore(o)||n.chain.push({id:o,data:e,opts:t&&t[r]})}),this.isLoading||this.loadChainItem()},e.prototype.load=function(e,t){void 0===t&&(t={});var n=this.getItemID(e);this.getFromStore(n)||(this.isLoading&&this.currentLoadingItems&&this.currentLoadingItems.some(function(e){return e.id===n})||(t.cleanChain&&this.cleanChain(),t.preempt?(this.chain.unshift({id:n,data:e,opts:t}),this.currentRequest&&(this.currentRequest.abort(),this.loadChainItem())):this.chain.push({id:n,data:e,opts:t}),this.isLoading||this.loadChainItem()))},e.prototype.cleanChain=function(){this.chain.length=0},e.prototype.getFromStore=function(e){return this.storeGetter(e)},e.prototype.setInStore=function(e,t){return this.storeSetter(e,t)},e.prototype.onRequestFinish=function(e,t){var n=this;this.currentRequest=void 0,this.currentLoadingItems=void 0,e.forEach(function(e,r){var o=t[r];n.setInStore(e.id,o);var i=e.opts&&e.opts.callback;i&&i(o)})},e.prototype.extractNextChainItems=function(){for(var e,t=this.multiRequestLimit,n=[],r={};this.chain.length&&n.length<t;)if(e=this.chain.shift()){var o=this.getFromStore(e.id),i=!(!o||!o.isFailed)&&Boolean(this.loadingParams.forceFailedReload||(e.opts||{}).forceFailedReload);o&&!i&&(e=void 0),e&&!r[e.id]&&(r[e.id]=!0,n.push(e))}return n},e.prototype.loadChainItem=function(){var e=this,t=this.extractNextChainItems();if(!t.length)return this.isLoading=!1,this.currentLoadingItems=void 0,void(this.currentRequest=void 0);this.isLoading=!0,this.currentLoadingItems=t;var n=this.getUrl(t);this.currentRequest=this.request(n,this.ajaxOptions,{successCallback:function(n){var r=e.extractResponseData(n).map(function(e){return{data:e,isFailed:!1}});e.onRequestFinish(t,r),e.loadChainItem()},failureCallback:function(){var n=t.map(function(){return{isFailed:!0}});e.onRequestFinish(t,n),e.loadChainItem()}})},e}(),c=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e){function t(t){var n=e.call(this,{format:"json",credentials:"same-origin",storeGetter:t.storeGetter,storeSetter:t.storeSetter})||this;return n.instagramUrl=/^https:\/\/(www\.)?instagram.com\//,n.path=t.path,n.config=t.config,n}return c(t,e),t.prototype.getItemID=function(e){return e},t.prototype.isDownloadNotAvailable=function(e){return this.instagramUrl.test(e)},t.prototype.extractResponseData=function(e){var t=this;if(!e.rld||!e.rld.length)return[];var n=this.config.justifier.baseRowHeight;return[e.rld.map(function(e,r){var o=e.s[0],i=e.s[0],a=t.isDownloadNotAvailable(o.pu),s=e.bid&&e.btw&&e.bth?[{w:e.btw,h:e.bth,url:t.buildThumbUrl(e.bid,{n:13,w:e.btw,h:e.bth}),origin:a?void 0:{w:i.iw,h:i.ih,url:i.iu},isMixedImage:!0}]:null,c=e.tw,u=e.th,l=n*t.getPixelDensity(),d=t.thumbSize33(c,u,l),p=e.s.map(function(e){return{w:e.iw,h:e.ih,url:e.iu}}),f=s||p;return a&&s&&p.length&&(p[0].origin=s[0]),{id:e.id,rimid:e.id,pos:r,docid:e.zid,thumb:{url:t.buildThumbUrl(e.tid,{n:33,w:d.width,h:d.height}),size:{w:e.tw,h:e.th}},width:e.bth,height:e.btw,preview:f,dups:p,images:[],origOnlyOpen:a,snippet:{text:"",title:o.t,url:o.pu,redirUrl:o.pu,domain:o.ph,hasTitle:!0}}})]},t.prototype.buildThumbUrl=function(e,t){var n=this.config,r=this.getThumbHostNum(n),o=n.thumb.hosts[r],a=t||n.thumb.params;return Object(i.appendQueryString)("https://"+o+"/i",u({id:e,ref:"rim"},a))},t.prototype.getThumbHostNum=function(e){return e.thumb.hosts.length>=2?1:0},t.prototype.getUrl=function(e){var t=this.config,n=t.loader.tld||"ru",r=t.loader.host||"yandex."+n+"/images-apphost";return Object(i.appendQueryString)("https://"+r+"/"+this.path,u({docid:e[0].data,lang:n},t.loader.urlParams))},t.prototype.thumbSize33=function(e,t,n){var r=Math.max(e/480,t/n);return{width:Math.round(e/r),height:Math.round(t/r)}},t.prototype.getPixelDensity=function(){return window.devicePixelRatio||1},t}(s),d=n(236),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(e){function t(t){var n=e.call(this,{format:"json",credentials:"same-origin",storeGetter:t.storeGetter,storeSetter:t.storeSetter})||this;return n.uniqueHandler=!0,n.tagsCount=5,n.params={text:t.text,tld:t.tld,duckParams:t.duckParams},n}return p(t,e),t.prototype.updateParams=function(e){this.params=Object.assign(this.params,e)},t.prototype.getUrl=function(e){var t=this.params,n=t.tld,r=void 0===n?"ru":n,o=t.text,a=this.params.duckParams||{},s=a.urlParams||void 0,c={};return void 0!==a.family&&(c.family=a.family,c.pornowhitelist=a.isPornoWhitelistQuery?1:0,c.ipnd=this._getIpnd()),Object(i.appendQueryString)("https://yandex."+r+"/images-apphost/duck",f(f({docid:e[0].data,count:this.tagsCount,lang:r,text:o},c),s))},t.prototype.extractResponseData=function(e){return Array.isArray(e)?[e.filter(function(e){return"string"===typeof e})]:[]},t.prototype.getItemID=function(e){return e},t.prototype._getIpnd=function(){return d.get("ipnd")||"1"},t}(s),m=n(48),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(t){var n=t.storeGetter,r=t.storeSetter,o=t.multiRequestLimit,i=e.call(this,{credentials:"omit",format:"json",storeGetter:n,storeSetter:r,multiRequestLimit:o})||this;return i.getItemID=Object(m.d)(i.getItemID),i}return v(t,e),t.prototype.getItemID=function(e){return e.toLowerCase()},t.prototype.getUrl=function(e){return"https://favicon.yandex.net/favicon/"+e.map(function(e){return e.data}).join("/").toLowerCase()+"?size=16&json=1"},t.prototype.extractResponseData=function(e){return e.map(function(e){var t=e.image;return t?"data:image/png;base64,"+t:null})},t}(s),b=n(173),y=new o.Registry({id:Object(b.a)()});function O(e,t){y.set(e,t)}O("RimLoader",l),O("TagsLoader",h),O("FaviconLoader",g);var w=n(203),C=n(257),E=n(129),j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=/^(https?:)?\/\/(avatars\.mds\.yandex|im[0-9]+-tub-ru\.yandex)\.net/i,_=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o.idx=0,o.validateImages=!r||void 0===r.validateImages||r.validateImages,o.onImageSizeError=r&&r.onImageSizeError,o.onImageFileSizeError=r&&r.onImageFileSizeError,o.item=t,o.startLoading(),o}return j(t,e),t.prototype.getUrlFromItem=function(){return this.currentThumb=this.switchToNextThumb(),this.currentThumb?this.currentThumb.url:void 0},t.prototype.getResultData=function(){return this.currentThumb},t.prototype.onLoad=function(){return this.validateImages&&this.loader&&this.currentThumb&&!this.isValidImage(this.loader,this.currentThumb)?this.onError():e.prototype.onLoad.call(this)},t.prototype.onError=function(){if(!this.tryLoadNext()){if(this.thumbWithWrongFileSize)return this.currentThumb=this.thumbWithWrongFileSize,e.prototype.onLoad.call(this);this.onResult(E.b.error)}},t.prototype.isValidImage=function(e,t){var n=this.getImageInfo(e);return this.isSizeMatch(n,t,2)?(this.currentThumb&&(this.currentThumb.noncachable=!C.a.instance().isUrlCachable(n.url)),!!(t.isMixedImage||this.isWhiteListUrl(n.url)||this.isFileSizeMatch(e,t.fileSizeInBytes))||(this.onImageFileSizeError&&this.onImageFileSizeError(n.url),this.currentThumb&&(this.thumbWithWrongFileSize=this.currentThumb),!1)):(this.onImageSizeError&&this.onImageSizeError(n.url),!1)},t.prototype.getImageInfo=function(e){return{url:e.src,w:e.width,h:e.height}},t.prototype.isFileSizeMatch=function(e,t){if(!t||!window.yandex)return!0;var n,r=window.yandex.publicFeature;if(!r||!r.getImageOriginalSize||!r.getImageSize)return!0;try{n=r.getImageOriginalSize(e)}catch(t){try{n=r.getImageSize(e)}catch(e){return!0}}return n===t},t.prototype.isSizeMatch=function(e,t,n){return void 0===n&&(n=0),!t.w&&!t.h||Math.abs(e.w-t.w)<=n&&Math.abs(e.h-t.h)<=n},t.prototype.isWhiteListUrl=function(e){return S.test(e)},t.prototype.switchToNextThumb=function(){var e,t=this.idx;if(this.item.preview){if(t<(e=this.item.preview.length))return this.idx++,this.item.preview[t];for(t-=e;t<e;){var n=this.item.preview[t].origin;if(this.idx++,n)return n;t++}t-=e}if(t<(e=this.item.dups.length))return this.idx++,this.item.dups[t];for(t-=e;t<e;){n=this.item.dups[t].origin;if(this.idx++,n)return n;t++}},t}(E.a),k=function(){function e(e){this.currentWorkersData=[],this.imagesCache={},this.resultHandler=this.resultHandler.bind(this),this.validateImages=e&&e.validateImages,this.onImageLoaded=e&&e.onImageLoaded,this.onImageSizeError=e&&e.onImageSizeError,this.onImageFileSizeError=e&&e.onImageFileSizeError,this.onImageError=e&&e.onImageError}return e.prototype.load=function(e,t){var n=this,r=this.imagesCache[e.id];if(!this.currentWorkersData.some(function(t){return t.item.id===e.id})&&!r){var o;this.stop();o={item:e,onResultHandler:t,loader:new _(e,function(e,t){n.resultHandler(e,t,o)},{itemTimeout:15e3,timeout:9e4,validateImages:this.validateImages,onImageSizeError:this.onImageSizeError,onImageFileSizeError:this.onImageFileSizeError,onImageError:this.onImageError})},this.currentWorkersData.push(o)}},e.prototype.stop=function(){return this.currentWorkersData.length&&(this.currentWorkersData.forEach(function(e){return e.loader.stop()}),this.currentWorkersData.length=0),this},e.prototype.removeItemFromQueue=function(e){var t=this.currentWorkersData.indexOf(e);-1!==t&&this.currentWorkersData.splice(t,1)},e.prototype.resultHandler=function(e,t,n){var r=n.item,o=n.onResultHandler;if(this.removeItemFromQueue(n),!e&&t&&(this.imagesCache[r.id]=t),this.onImageLoaded&&this.onImageLoaded(r,t),o)return e||!t?o(e||E.b.error):void o(void 0,t)},e}(),I=n(7),P=n(19),x=6;function M(e,t){var n=Object(I.j)(t),r=void 0!==t.rimSelectedIdx,o=t.config.imagesLoadingParams.numImagesPreload||0;if(n){if(n&&!t.loadedThumbs[n.id])return e.rimThumbsLoader&&e.rimThumbsLoader.stop(),T(e,n,r?void 0:t.currentItemIdx);var i=t.config.imagesLoadingParams.rimPreloadImagesCount||0;if(!R(e,t,t.rimForItem))for(var a=1;a<=o;a++){var s=t.currentItemIdx+a,c=Object(I.f)(t,s);if(c){if(!t.loadedThumbs[c.id])return T(e,c,s);if(a<=i&&N(e,t,c))return}}}}function N(e,t,n){if(!e.rimThumbsLoader)return!1;var r=Object(w.d)(t,Object(w.e)(n));if(!r||!r.data)return!1;var o=t.config.imagesLoadingParams.rimPreloadPerImage||x;return R(e,t,r.data,o)}function R(e,t,n,r){if(!e.rimThumbsLoader)return!1;var o=Object(w.f)(n,t.loadedRimThumbs,r);return!!o.length&&(e.rimThumbsLoader.precache(o),!0)}function T(e,t,n){e.imageLoader.load(t,function(r,o){e.dispatch(Object(P.e)(t.id,{data:o,isFailed:!o},n))})}var D=function(e,t){var n=Object(I.c)(t);if(n){var r=L(t,n);r.length&&e.faviconLoader&&(e.faviconLoader.cleanChain(),r.forEach(function(t){var n;null===(n=e.faviconLoader)||void 0===n||n.load(t)}))}};function L(e,t,n){var r;void 0===n&&(n={isPreloading:!1});var o=Object(I.e)(t),i=[];return i.push(o),t&&t.schemaOrgSnippet&&i.push(t.schemaOrgSnippet.punycode||t.schemaOrgSnippet.domain),t&&t.marketSnippet&&i.push(t.marketSnippet.punycode||t.marketSnippet.domain),t&&(null===(r=e.experiments)||void 0===r?void 0:r.similarOffersFavicons)&&t.similarOffers&&!n.isPreloading&&t.similarOffers.forEach(function(e){i.push(e.domain)}),t&&t.otherOffers&&t.otherOffers.forEach(function(e){i.push(e.punycode||e.domain)}),i.filter(function(e){return null!=e})}var A=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},B=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e};function F(e,t){var n=Object(I.c)(t),r=Object(w.e)(n);D(e,t),r&&e.tagsLoader&&e.tagsLoader.load(r,{preempt:!0,cleanChain:!0})}function U(e,t,n){var r=e.rimLoader;if(r){var o=t.rimData[n];o?e.dispatch(Object(P.f)(n,o)):r.load(n,{preempt:!0})}}function H(e,t){var n=Object(I.c)(t),r=Object(w.e)(n);r&&U(e,t,r)}function z(e,t){for(var n=Object(I.i)(t),r=t.images,o=[],i=[],a=0;a<n.length;a++){var s=r[n[a]];if(s){var c=Object(w.e)(s),u=L(t,s,{isPreloading:!0});u&&i.push.apply(i,B(u)),c&&o.push(c)}}e.faviconLoader&&e.faviconLoader.precache(i),e.tagsLoader&&e.tagsLoader.precache(o),e.rimLoader&&(e.rimLoader.cleanChain(),e.rimLoader.precache(o))}var q=n(83);function W(e,t){return function(e,t,n,r){if(!r)return{images:t.concat(n),loadedPagesCount:e+1};var o=t.slice(0);return n.forEach(function(e){var t=r[e.docid];"undefined"!==typeof t?(o[t]=e,delete r[e.docid]):o.push(e)}),{loadedPagesCount:e+1,images:o,emptyImagesMap:Object.keys(r).length?r:void 0}}(e.loadedPagesCount,e.images,Object(I.h)(e.config.viewerDataLoadingType||0,t,e.images.length),e.emptyImagesMap)}var G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},V=5,Y=Z("favicons"),K=Z("tags"),X=Z("rimData");var Q=3e5;function Z(e){return function(t,n,r){var o,i;return(o={})[e]=G(G({},t[e]),((i={})[n]=r,i)),o}}var J,$=function(e,t){switch(void 0===e&&(e=re),t.type){case P.a.UPDATE_CONFIG:return function(e,t){return{config:G(G({},e.config),t)}}(e,t.config);case P.a.UPDATE_CONTEXT:return function(e,t){return{globalContext:G(G({},e.globalContext),t)}}(e,t.context);case P.a.ADD_FAVICON_DATA:return Y(e,t.id,t.data);case P.a.ADD_TAGS_DATA:return K(e,t.id,t.data);case P.a.ADD_RIM_DATA:return function(e,t,n){var r=e.imagesByRimId,o=e.rimForItem,i=e.rimLoadingId,a=e.rimPageItems,s=e.rimPageItemsMap,c=e.rimLoadingIdx,u=e.rimPagesCount,l=e.loadedRimThumbs,d=e.rimEmptyPageLoadCount,p=X(e,t,n),f=Object(w.e)(Object(I.c)(e)),h=Object(w.a)(n&&n.data||[],s,l);if(f===t){var m=Object(I.c)(e);m&&(s=Object(q.c)([m],s)),s=Object(q.c)(h,s),o=h,u++}else if(i===t){var v=e.config.rim,g=v?v.loader.itemsOnPage:8;a=a.concat(h),s=Object(q.c)(h,s),a.length>=g?(o=o.concat(a),a=[],i="",u++):(c++,i=Object(w.e)(o[c])||"")}return r=Object(q.c)(h,r),G(G({},p),{rimForItem:o,rimPageItems:a,rimPageItemsMap:s,rimPagesCount:u,rimLoadingId:i,rimLoadingIdx:c,imagesByRimId:r,rimEmptyPageLoadCount:h.length>0||i!==t?0:d+1})}(e,t.id,t.data);case P.a.REQUEST_RIM_PAGE:return function(e){var t=e.config.rim;if(!t)return null;var n=t.loader.pagesMaxCount,r=e.rimLoadingIdx,o=e.rimLoadingId,i=e.rimForItem,a=e.rimPagesCount,s=e.rimEmptyPageLoadCount;return o||a>n||s>V?null:(r++,{rimLoadingId:o=Object(w.e)(i[r])||"",rimLoadingIdx:r})}(e);case P.a.SET_SELECTED_RIM:return function(e,t){var n,r=Object(w.c)(e,t),o={rimSelectedIdx:t,commercialCropSelectedIdx:void 0};if(r){var i=e.loadedThumbs[r.id];i&&!i.data&&(o.loadedThumbs=G(G({},e.loadedThumbs),((n={})[r.id]=void 0,n)))}return o}(e,t.idx);case P.a.SET_CURRENT_ITEM_IDX:return function(e,t){var n,r=t!==e.currentItemIdx;if(!r)return{rimSelectedIdx:void 0,commercialCropSelectedIdx:void 0};var o={currentItemIdx:t,rimSelectedIdx:void 0,rimForItem:[],rimLoadingId:"",rimLoadingIdx:-1,rimPagesCount:0,rimEmptyPageLoadCount:0,rimPageItemsMap:{}};r&&(o.preloadImagesIndexes=Object(I.g)(e,t),o.commercialCropSelectedIdx=void 0);var i=Object(I.f)(e,t),a=i&&e.loadedThumbs[i.id];return a&&!a.data&&(o.loadedThumbs=G(G({},e.loadedThumbs),((n={})[i.id]=void 0,n))),o}(e,t.index);case P.a.ADD_IMAGES_BY_THUMB:return W(e,t.items);case P.a.ADD_IMAGES_BY_POS:return function(e,t){return{images:Object(q.b)(t,e.images),imagesByRimId:Object(q.c)(t,e.imagesByRimId)}}(e,t.items);case P.a.SET_IMAGES_BY_POS:return function(e,t){return{images:Object(q.b)(t),imagesByRimId:Object(q.c)(t)}}(0,t.items);case P.a.SET_IMAGES_BY_ID:return function(e,t){return{images:Object(q.a)(t,e.images),imagesByRimId:Object(q.c)(t,e.imagesByRimId)}}(e,t.items);case P.a.ADD_LOADED_THUMB_DATA:return function(e,t,n,r){var o,i={loadedThumbs:G(G({},e.loadedThumbs),(o={},o[t]=n,o))};if(void 0===r)return i;var a=e.images[r];return a&&(i.images=e.images.slice(),i.images[r]=G(G({},a),{loadedImage:n})),i}(e,t.id,t.data,t.index);case P.a.ADD_CROP_OBJECT:return function(e,t){var n;return{cropObjects:G(G({},e.cropObjects),(n={},n[t.imageId]={data:t.data,expireTime:t.timestamp+Q},n))}}(e,t);case P.a.SET_TRIMMER_AREA:return function(e,t){return{trimmerArea:t}}(0,t.area);case P.a.ADD_LOADED_RIM_THUMB_DATA:return function(e,t,n){var r,o=G(G({},e.loadedRimThumbs),((r={})[t]=n,r)),i={loadedRimThumbs:o};return i.rimForItem=Object(w.a)(e.rimForItem,void 0,o),i}(e,t.id,t.data);case P.a.SET_SELECTED_COMMERCIAL_CROP:return function(e,t){return{commercialCropSelectedIdx:t}}(0,t.idx);default:return e}},ee={reqid:"#invalid-value-error",query:"#invalid-value-error",yandexuid:"#invalid-value-error",lr:-100500,tld:"#invalid-value-error",lang:"#invalid-value-error"},te=((J=r.createContext(ee)).Provider,J.Consumer,function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},re={images:[],loadedThumbs:{},loadedRimThumbs:{},imagesByRimId:{},currentItemIdx:-1,preloadImagesIndexes:[],loadedPagesCount:0,wizardThumbs:[],favicons:{},tags:{},rimData:{},rimLoadingId:"",rimLoadingIdx:-1,rimPagesCount:0,rimForItem:[],rimPageItems:[],rimPageItemsMap:{},rimEmptyPageLoadCount:0,config:{preloadLeftBorder:1,preloadRightBorder:5,imagesCbirSearchUrl:"",openServiceOnNewTab:!1,imagesLoadingParams:{},rim:{justifier:{baseRowHeight:150},loader:{pagesMaxCount:1,itemsOnPage:8,preloadCountOnInit:5,preloadCountOnMore:1},thumb:{hosts:["im0-tub-ru.yandex.net"]}}},globalContext:ee,cropObjects:{}},oe=r.createContext({state:re,dispatch:function(){return{}}});function ie(e,t){if(e===t)return!0;if(null===e||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(n){return e[n]===t[n]})}function ae(e){return function(t){var n=function(n){function o(t){var r=n.call(this,t)||this;return r.state=e(t.state,t.dispatch,t.ownProps),r}return te(o,n),o.prototype.shouldComponentUpdate=function(e,t){return!ie(t,this.state)||!ie(e.ownProps,this.props.ownProps)},o.prototype.render=function(){return r.createElement(t,ne({},this.props.ownProps,this.state))},o.getDerivedStateFromProps=function(t,n){var r=e(t.state,t.dispatch,t.ownProps);return Object.keys(n).forEach(function(e){void 0===r[e]&&void 0!==n[e]&&(r[e]=void 0)}),r},o.displayName="Connected-"+(t.displayName||t.name||"Component"),o}(r.Component);return function(e){return r.createElement(oe.Consumer,null,function(t){var o=t.state,i=t.dispatch;return r.createElement(n,{state:o,dispatch:i,ownProps:e})})}}}var se=function(e){var t=r.useContext(oe);return e(t.state,t.dispatch)},ce=function(e){function t(t){var n=e.call(this,t)||this;n.componentIsMounted=!1,n.state=ne(ne({},re),t.initialState);var r=n.state.config;n.props.TagsLoader||(r.isDuckEnabled=!1),n.props.RimLoader||(r.rim=void 0),n.dispatch=n.dispatch.bind(n);var o=r.imagesLoadingParams;n.imageLoader=new k(o),void 0!==o.rimPreloadImagesCount&&n.props.ThumbsLoader&&(n.rimThumbsLoader=new n.props.ThumbsLoader({onImageError:o.onRimLoadingError,onImageLoaded:function(e,t){n.dispatch(Object(P.d)(e.url,{data:t,isFailed:!t}))}})),!1!==r.isDuckEnabled&&n.props.TagsLoader&&(n.tagsLoader=new n.props.TagsLoader(ne(ne({},Object(w.j)(n.state.globalContext)),{duckParams:r.duckParams,storeGetter:function(e){return Object(w.h)(n.getState(),e)},storeSetter:function(e,t){var r=t&&t.data||[];n.dispatch(Object(P.g)(e,{data:r}))}}))),n.props.FaviconLoader&&(n.faviconLoader=new n.props.FaviconLoader({multiRequestLimit:r.preloadRightBorder+r.preloadLeftBorder,storeGetter:function(e){return n.getState().favicons[e]},storeSetter:function(e,t){n.dispatch(Object(P.b)(e,t))}}));var i=r.rim;return i&&n.props.RimLoader&&(n.rimLoader=new n.props.RimLoader({path:"rim",config:i,storeGetter:function(e){return n.getState().rimData[e]},storeSetter:function(e,t){t&&!t.isFailed&&t.data&&(t.data=Object(m.b)("docid",t.data)),n.dispatch(Object(P.f)(e,t))}})),n}return te(t,e),t.prototype.render=function(){return r.createElement(oe.Provider,{value:{state:this.getState(),dispatch:this.dispatch}},this.props.children)},t.prototype.componentDidMount=function(){var e;this.componentIsMounted=!0;var t=this.getState();(null===(e=t.experiments)||void 0===e?void 0:e.preloadImagesOnMount)&&(M(this,t),H(this,t))},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1},t.prototype.componentDidUpdate=function(e,t){var n=this.getState(),r=n.currentItemIdx!==t.currentItemIdx,o=void 0!==n.rimSelectedIdx,i=n.globalContext!==t.globalContext,a=!r&&n.rimLoadingId!==t.rimLoadingId,s=n.rimPagesCount!==t.rimPagesCount,c=Boolean(n.rimForItem.length);n.loadedThumbs===t.loadedThumbs&&n.loadedRimThumbs===t.loadedRimThumbs&&n.rimForItem===t.rimForItem&&n.images===t.images||(M(this,n),F(this,n),z(this,n)),r&&(this.rimThumbsLoader&&this.rimThumbsLoader.stop(),M(this,n),F(this,n),c||H(this,n),z(this,n)),o&&(!function(e,t){var n=Object(I.j)(t);if(n){var r={preempt:!0},o=Object(w.e)(n),i=Object(I.e)(n);o&&e.tagsLoader&&e.tagsLoader.load(o,r),i&&e.faviconLoader&&e.faviconLoader.load(i,r)}}(this,n),M(this,n)),i&&function(e,t){e.tagsLoader&&e.tagsLoader.updateParams(Object(w.j)(t.globalContext))}(this,n),a&&function(e,t){var n=t.rimLoadingId;n&&U(e,t,n)}(this,n),(a||s)&&(!function(e,t){var n=e.rimLoader;if(n){var r=t.config.rim;if(r&&r.loader.pagesMaxCount){var o=r.loader,i=o.preloadCountOnInit,a=void 0===i?1:i,s=o.preloadCountOnMore,c=void 0===s?1:s,u=t.rimPagesCount,l=t.rimLoadingIdx,d=t.rimLoadingId,p=t.rimForItem,f=!d&&1===u,h=f?a:c,m=f?0:a+l,v=Object(w.b)(p,m,h);v.length&&n.precache(v)}}}(this,n),R(this,n,n.rimForItem)),this.props.onStateChange&&this.props.onStateChange(n,t)},t.prototype.dispatch=function(e){this.componentIsMounted&&this.setState($(this.getState(),e))},t.prototype.getState=function(){return this.state},t}(r.Component),ue=Object(o.withRegistry)(y)(function(e){return r.createElement(o.ComponentRegistryConsumer,{id:Object(b.a)()},function(t){var n=t.RimLoader,o=t.TagsLoader,i=t.FaviconLoader,a=t.ThumbsLoader;return r.createElement(ce,ne({ref:e.forwardRef,RimLoader:n,TagsLoader:o,FaviconLoader:i,ThumbsLoader:a},e))})})},2509:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"б.p.":"Belarusian rubles","грн.":"hryvnas","долл.":"dollars","евро":"euros","руб.":"rub.","тнг.":"tenge"}},2518:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Похожие товары":"Similar products"}},2527:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"В магазин":"Go to store","В наличии":"In stock","Предзаказ":"Pre-order","Скрыть":"Hide","Товар закончился":"Out of stock","Читать еще":"Read more"}},2536:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Цена и наличие товара могли измениться":"Price and availability may change"}},2545:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={"Связанные картинки":"Related images"}},255:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});var r=n(3),o=n(0),i=n.n(o),a=i.a.createContext({cache:{},changeStatus:function(){return{}}}),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={cache:{}},n.changeStatus=n.changeStatus.bind(n),n}return Object(r.__extends)(t,e),t.prototype.changeStatus=function(e,t){var n=this.state.cache;n[e]=Object(r.__assign)(Object(r.__assign)({},n[e]),t),this.setState({cache:n})},t.prototype.render=function(){var e={cache:this.state.cache,changeStatus:this.changeStatus};return i.a.createElement(a.Provider,{value:e},this.props.children)},t}(i.a.Component)},256:function(e,t,n){
/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},n=e.exports,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,o=n.length,i={};r<o;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)i[n[0][r]]=e[r];return i}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},i={request:function(e){return new Promise(function(n,o){var i=function(){this.off("change",i),n()}.bind(this);this.on("change",i);var a=(e=e||t.documentElement)[r.requestFullscreen]();a instanceof Promise&&a.then(i).catch(o)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);this.on("change",o);var i=t[r.exitFullscreen]();i instanceof Promise&&i.then(o).catch(n)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=o[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=o[e];r&&t.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},257:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(579);var r=function(){function e(){this.history=document.createElement("div"),this.cachableImg=new Image,this.history.className="image_history_cache",document.body.appendChild(this.history)}return e.prototype.addToHistory=function(e){var t=document.createElement("img");t.src=e,this.history.appendChild(t)},e.prototype.isUrlCachable=function(e){this.cachableImg.src=e;var t=this.cachableImg.complete;return this.cachableImg.src="",t},e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},258:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d});var r=n(0),o=n.n(r),i=n(262),a=n(8),s=n(93),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},l="openSimilarShown";var d=function(e){return function(t){var n=u(t,[]),i=n.isSimilarUnauthPopupEnabled,d=n.showUnauthPopup,p=n.tld,f=void 0===p?"ru":p,h=Object(r.useCallback)(function(e){var t="images_viewer_similar";i&&d&&d(e,l,{loginUrl:Object(s.a)(f,t),registrationUrl:Object(s.b)(f,t)})},[i,d,f]),m=Object(r.useCallback)(function(e){e.preventDefault(),Object(a.a)().emit("location:change",{url:e.currentTarget.href})},[]);return i&&d?o.a.createElement(e,c({},n,{onClick:h})):o.a.createElement(e,c({},n,{onClick:m}))}}(i.a)},259:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(42),o=(n(655),Object(r.a)("SectionHeader"))},26:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return v});var r=n(3),o=n(0),i=n.n(o),a=n(14),s=n(2),c=n(4),u=n(11),l=n(22),d=(n(270),n(392)),p=n(456),f=n(393),h=function(e){var t=e.visible,n=e.onClose,a=e.children,s=e.essentialRefs,c=Object(f.a)("layer"),u=Object(p.a)(t),l=Object(p.a)(n),d=Object(o.useCallback)(function(e){var t=e.key;if("Escape"===t||"Esc"===t){var n=Object(r.__read)(h.stack[h.stack.length-1]||[],2),o=n[0],i=n[1];o===c&&void 0!==i&&i(e,"esc")}},[]),m=Object(o.useCallback)(function(e){var t=Object(r.__read)(h.stack[h.stack.length-1]||[],3),n=t[0],o=t[1],i=t[2];n===c&&void 0!==o&&void 0!==i&&(i.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||o(e,"click"))},[]);return Object(o.useEffect)(function(){(n!==l&&void 0!==n&&h.stack.forEach(function(e,t){Object(r.__read)(e,2)[1]===l&&(h.stack[t][1]=n)}),t!==u&&void 0!==n)&&(t?(h.stack.push([c,n,s]),document.addEventListener("keyup",d),document.addEventListener("mousedown",m)):(Object(r.__read)(h.stack[h.stack.length-1]||[],1)[0]===c&&requestAnimationFrame(function(){return h.stack.pop()}),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",m)))},[u,t,n,l]),Object(o.useEffect)(function(){return function(){requestAnimationFrame(function(){return h.stack.pop()}),document.removeEventListener("keyup",d),document.removeEventListener("mousedown",m)}},[]),i.a.createElement(i.a.Fragment,null,a)};h.stack=[],h.displayName="LayerManager";var m=Object(c.cn)("Popup2"),v=function(e){var t=e.addonAfter,n=e.addonBefore,c=e.children,p=e.className,f=e.direction,v=e.forceRender,g=e.hasTail,b=e.innerRef,y=e.keepMounted,O=void 0===y||y,w=e.position,C=e.scope,E=void 0===C?{current:Object(u.a)()?document.body:null}:C,j=e.style,S=e.tailPosition,_=e.tailRef,k=e.tailSize,I=e.visible,P=e.zIndex,x=e.unstable_onRenderTail,M=e.onClose,N=e.unstable_essentialRefs,R=void 0===N?[]:N,T=e.unstable_hostRef,D=e.onOutsideClick,L=e.onEscapeKeyDown,A=e.onClick,B=(e.theme,e.view,e.nonvisual,Object(r.__rest)(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),F=Object(r.__read)(Object(o.useState)(!0),2),U=F[0],H=F[1],z=Object(o.useRef)(null);Object(d.a)(function(){U&&I&&H(!1)},[]),Object(o.useEffect)(function(){console.assert(void 0===D||void 0===L,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),U&&(v||I)&&H(!1)},[]);var q=Object(o.useCallback)(function(e,t){"esc"===t?void 0!==L&&L(e):void 0!==D&&D(e),void 0!==M&&M(e,t)},[L,D,M]),W=Object(s.useComponentRegistry)(m()).Tail,G=T||z;return!I&&!O||!Object(u.a)()||null===E.current||U?null:Object(a.createPortal)(i.a.createElement(h,{visible:I,onClose:q,essentialRefs:Object(r.__spread)([G],R)},i.a.createElement("div",Object(r.__assign)({},B,{className:m({visible:I,direction:f},[p]),ref:Object(l.a)(z,b),style:Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},j),w),{zIndex:P}),onClick:A}),n,"function"===typeof c?c({tailRef:_}):c,t,x&&x(i.a.createElement(W,{innerRef:_,style:Object(r.__assign)(Object(r.__assign)({},S),{height:k,width:k})})),!x&&g&&i.a.createElement(W,{innerRef:_,style:Object(r.__assign)(Object(r.__assign)({},S),{height:k,width:k})}))),E.current)};v.displayName=m()},260:function(e,t,n){"use strict";n.d(t,"a",function(){return nt});var r,o,i=n(0),a=n(6),s=n.n(a),c=n(5),u=n(1),l=n(37),d=(n(627),Object(u.createClassNameModifier)(Object(l.b)(),{type:"side-left"})),p=n(4),f=n(451),h=n(721),m=n(452),v=n(249),g=n(527),b=n(537),y=n(81),O=n(107),w=function(){function e(){this.readyCallback=y.a,this.failCallback=y.a,O.a&&(this.isLoaded()||this.isScriptExists()||this.loadScript())}return e.prototype.whenScriptReady=function(e){void 0===e&&(e=y.a),this.readyCallback=e,this.isScriptExists()&&this.isLoaded()&&this.runReadyCallback()},e.prototype.whenScriptFail=function(e){void 0===e&&(e=y.a),this.failCallback=e,this.isScriptExists()&&!this.isLoaded()&&this.runFailCallback()},e.prototype.isLoaded=function(){return Boolean(this.getYaShare())},e.prototype.isScriptExists=function(){return Boolean(document.getElementById("ya-share-script"))},e.prototype.getYaShare=function(){var e;if(O.a)return null===(e=window.Ya)||void 0===e?void 0:e.share2},e.prototype.runReadyCallback=function(){var e=this,t=this.getYaShare();t&&setTimeout(function(){return e.readyCallback(t)})},e.prototype.runFailCallback=function(){var e=this;setTimeout(function(){return e.failCallback()})},e.prototype.loadScript=function(){var e=this,t=document.createElement("script");t.id="ya-share-script",t.src="//yastatic.net/share2/share.js",t.async=!0,t.crossOrigin="",t.onload=function(){return e.waitForInit()},t.onerror=function(){return e.onLoadingFail()},document.body.appendChild(t)},e.prototype.onLoadingFail=function(){throw this.runFailCallback(),new Error("failed to load ya-share2")},e.prototype.waitForInit=function(){var e=this,t=0,n=setInterval(function(){10===++t?(clearInterval(n),e.runFailCallback()):e.isLoaded()&&(clearInterval(n),e.runReadyCallback())},50)},e}(),C=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},E=0,j=function(e){var t=e.url,n=e.direction,o=e.services,a=e.onShare,s=e.lang,c=void 0===s?"ru":s,u=e.onLoadingStart,l=void 0===u?y.a:u,d=e.onLoadingEnd,p=void 0===d?y.a:d,f=i.useRef(),h=function(){var e=C(i.useState(),2),t=e[0],n=e[1];return i.useEffect(function(){n(function(e){return"ya-share2-instance-"+e}(E++))},[]),t}();return i.useEffect(function(){r||(r=new w)},[]),i.useEffect(function(){return h&&!f.current&&(l(),r.whenScriptReady(function(e){p(),f.current=e(h,{services:o,hooks:{onshare:a},content:{url:t}})}),r.whenScriptFail(function(){p()})),function(){f.current&&(f.current.destroy(),f.current=void 0)}},[a,l,p,o,t,h]),i.useEffect(function(){f.current&&f.current.updateContent({url:t})},[t]),h?i.createElement("div",{id:h,"data-services":o,"data-size":"s","data-lang":c,"data-direction":n}):null},S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=Object(u.compose)(f.a,h.a,b.a,m.a,g.a)(v.a),k=function(e){return i.createElement(_,S({hasTail:!0,theme:"normal",view:"default",target:"anchor",className:e.className,onOutsideClick:e.onOutsideClick},e.popup),e.header,i.createElement(j,{url:e.link,onShare:e.onShare,onLoadingStart:e.onLoadingStart,onLoadingEnd:e.onLoadingEnd,services:e.services||"vkontakte,odnoklassniki,facebook,twitter",direction:"vertical",lang:e.lang}),e.footer)},I=n(25),P=n(35),x=n(23),M=n(2),N=n(28),R=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(e){function t(t){var n,r=this.constructor.prototype;return n=e.call(this,t)||this,Object.setPrototypeOf(n,r),n}return R(t,e),t}(Error),D=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: пользователь неавторизован")||this;return n.status=401,n.stack=t.stack,n}return R(t,e),t}(T),L=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: неизвестная ошибка")||this;return t&&Object.assign(n,t),n}return R(t,e),t}(T),A=function(e){function t(t){var n=e.call(this,"Ошибка при работе с Яндекс.Диском: не хватает места")||this;return n.status=507,n.stack=t.stack,n}return R(t,e),t}(T),B="ru",F={info:"/",resources:"/resources/",operations:"/operations/",upload:"/resources/upload/"},U={POST:function(e,t,n){return Object(N.sendRequest)(e,Object.assign({method:"post"},t),n,t&&t.body||null)},PUT:N.put,DELETE:N.del,PATCH:function(e,t,n){return Object(N.sendRequest)(e,Object.assign({method:"patch"},t),n,t&&t.body)}},H=function(){function e(e){void 0===e&&(e={}),this.tld=e.tld||B,this.baseUrl="https://cloud-api.yandex."+this.tld+"/images/v1/disk",this.endpoints=e.endpoints||F}return e.prototype.info=function(){return this.callMethod({url:this.getMethodEndpoint("info"),method:"GET",format:"json"})},e.prototype.status=function(e){return this.callMethod({url:e,method:"GET",format:"json"})},e.prototype.setMeta=function(e,t){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"PATCH",format:"json",headers:{"content-type":"application/json"},queryParams:{path:e},body:JSON.stringify({custom_properties:t})})},e.prototype.isPathExists=function(e){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"GET",format:"json",queryParams:{path:e,limit:1}})},e.prototype.mkdir=function(e){return this.callMethod({url:this.getMethodEndpoint("resources"),method:"PUT",format:"json",queryParams:{path:e}})},e.prototype.upload=function(e,t){return this.callMethod({url:this.getMethodEndpoint("upload"),method:"POST",format:"json",queryParams:{url:t,path:e,disable_redirects:"true"}})},e.prototype.callMethod=function(e){var t=e.method,n=e.url,r="GET"===t?N.get:U[t];return new Promise(function(t,o){r(n,e,{successCallback:function(e){return t(e)},failureCallback:function(e,t,n){switch(t.status){case 401:return o(new D(n));case 507:return o(new A(n));default:return o(new L({response:n,status:t.status}))}}})})},e.prototype.getMethodEndpoint=function(e){var t=this.endpoints[e];return this.baseUrl+t},e}(),z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.active="active",e.loading="loading",e.uploaded="uploaded",e.failed="failed"}(o||(o={}));var W={},G=function(e){function t(t){var n=e.call(this,t)||this;return n.defaults=q(q({},n.props),{maxPollingRequests:15,pollingTimeout:300,fileName:"Image.jpg",dirName:"Images"}),n.retriesCount={},n.mounted=!0,n.api=new H(t),n.state={status:W[t.fileUrl]||o.active},n}return z(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.upload=function(){var e=this,t=this.props.fileUrl,n=this.props.dirName||this.defaults.dirName,r=n+"/"+(this.props.fileName||this.getFileName(t));return!this.props.loggedIn&&this.props.requestAuthorization?this.props.requestAuthorization():(this.setState({status:o.loading,error:void 0}),this.ensureDirectory(n).then(function(){return e.api.upload(r,t)}).then(function(t){return e.waitForUpload(t.href)}).then(function(){e.props.fileMeta&&e.setMeta(r,e.props.fileMeta)}).then(function(){e.mounted&&(W[e.props.fileUrl]=o.uploaded,e.setState({status:o.uploaded,error:void 0}),e.props.onSuccess&&e.props.onSuccess())}).catch(function(t){e.mounted&&e.setState({status:o.failed,error:t})}))},t.prototype.ensureDirectory=function(e){var t=this;return this.api.isPathExists(e).catch(function(n){if(!n||404!==n.status)throw n;return t.api.mkdir(e)})},t.prototype.setMeta=function(e,t){return this.api.setMeta(e,t)},t.prototype.waitForUpload=function(e){var t=this;return new Promise(function(n,r){t.checkOperationStatus(e).then(function(o){t.mounted||r(new L),"pending"===o.status&&setTimeout(function(){return n(t.waitForUpload(e))},t.defaults.pollingTimeout),"failed"===o.status&&r(o.error),"success"===o.status&&n()})})},t.prototype.checkOperationStatus=function(e){var t=this;return this.api.status(e).then(function(e){return null==e||"failed"===e.status?{status:"failed",error:new L}:"success"===e.status?{status:"success"}:{status:"pending"}}).catch(function(n){var r=null==t.retriesCount[e]?t.defaults.maxPollingRequests:t.retriesCount[e];return 0!==r&&n instanceof L?(t.retriesCount[e]=r-1,{status:"pending"}):{status:"failed",error:n}})},t.prototype.getFileName=function(e){var t=e.substring(e.lastIndexOf("/")+1,e.length),n=t.indexOf("#"),r=t.indexOf("?");-1!==r?t=t.substring(0,r):-1!==n&&(t=t.substring(0,n));try{t=decodeURIComponent(t)}catch(e){}return t.length>250&&(t=t.substr(0,250)),(t=t.replace(/(\*|\||\\|:|"|<|>)/gi,"-"))||this.defaults.fileName},t.prototype.render=function(){return this.props.children({fileName:this.props.fileName||this.getFileName(this.props.fileUrl),status:this.state.status,uploaded:this.state.status===o.uploaded,loading:this.state.status===o.loading,failed:this.state.status===o.failed,error:this.state.error,upload:this.upload.bind(this)})},t}(i.Component),V=Object(p.cn)("MMShareDisk"),Y=(n(633),Object(c.withBaobab)({name:"MMShareDisk",events:{onSuccess:Object(c.logClick)(function(e){return e.props.counter})}})(function(e){return i.createElement(M.ComponentRegistryConsumer,{id:V()},function(t){return i.createElement(G,{key:e.fileUrl,tld:e.tld,fileUrl:e.fileUrl,dirName:e.dirName,fileMeta:e.fileMeta,loggedIn:e.loggedIn,requestAuthorization:e.requestAuthorization,onSuccess:e.onSuccess},function(n){var r=n.status,o=function(e,t){return t[V("Presenter",{status:e})]}(r,t);return i.createElement(o,{status:n.status,loading:n.loading,uploaded:n.uploaded,failed:n.failed,error:n.error,upload:n.upload,fileName:n.fileName,fileUrl:e.fileUrl,tld:e.tld||"ru",requestAuthorization:e.requestAuthorization,errorTooltipTimeout:e.errorTooltipTimeout||5e3,popupScope:e.popupScope,className:V("Presenter",{status:r}),counter:e.counter})})})})),K=(n(629),Object(u.createClassNameModifier)(Object(l.b)(),{type:"disk"})),X=(n(630),Object(p.cn)("Share")),Q=Object(c.withBaobab)({name:"ShareItem",events:{onClick:Object(c.logClick)(function(e){return e.counter})}})(function(e){var t=e.icon,n=e.title,r=e.onClick,o=e.className,a=void 0===o?"":o;return i.createElement("li",{className:X("Item",{more:!0},["ya-share2__item ya-share2__container ya-share2__container_size_s",a]),onClick:r},i.createElement("span",{className:"ya-share2__badge"},i.createElement("span",{className:"ya-share2__icon"},t)),i.createElement("span",{className:"ya-share2__title"},n))}),Z=n(151),J=s()(Z),$=K(l.a),ee=i.createElement($,{className:V("Icon",{type:"disk"}),type:"disk"}),te=n(65),ne=(n(631),s()(Z)),re=i.createElement(function(){return i.createElement(te.b,{className:V("Spinner")})},null),oe=n(841),ie=n(755),ae=n(357),se=n(364),ce=n(442),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},le=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},de=s()(Z),pe=Object(u.compose)(f.a,h.a,m.a,b.a)(v.a),fe=Object(u.compose)(Object(u.composeU)(oe.a,ie.a),ae.a,se.a)(ce.a),he=function(e){return function(t){var n=t.props,r=n.counters&&n.counters.tuneDiskPopup;if(r)return Object(x.b)(r[e])}},me=Object(u.compose)(P.d,Object(c.withBaobab)({name:"MMShareDiskTuneDisk",events:{onLinkClick:Object(c.logClick)(he("click")),onCloseClick:Object(c.logClick)(he("close")),onShow:Object(c.logTech)("shown",he("shown"))}}))(function(e){var t=e.onCloseClick,n=e.onLinkClick,r=e.onShow,o=e.tld,a=de("Нет места на Яндекс.Диске",{context:"Надпись на тултипе рядом с кнопкой сохранения на диск при нехватке места на Яндекс.Диске"}),s=function(e){return"https://disk.yandex."+e+"/tuning"}(o);return i.useEffect(function(){r&&r()},[r]),i.createElement("div",{className:V("TooltipContent")},i.createElement("div",{className:V("TooltipDescription")},a),i.createElement("div",{className:V("TooltipCloseIcon"),onClick:t}),i.createElement("div",{className:V("TooltipButtons")},i.createElement(fe,{className:V("TooltipButton",{pinned:"bottom-right"}),size:"m",theme:"action",type:"link",target:"_blank",onClick:n,url:s},de("Купить еще место",{context:'Кнопка "купить еще место" при нехватке места для сохранения картинки на Яндекс.Диск'}))))}),ve=function(e){var t=de("Не получается, попробуйте позже или сохраните картинку на компьютер",{context:"Надпись на тултипе рядом с кнопкой сохранения на диск при ошибке"}),n=i.useCallback(function(){!function(e,t){var n=e;-1!==n.indexOf("?")?n+="&download="+t:n+="?download="+t;var r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),r.setAttribute("target","_blank"),document.body.appendChild(r),setTimeout(function(){r.click(),document.body.removeChild(r)},0)}(e.fileUrl,e.fileName)},[e.fileName,e.fileUrl]);return i.createElement("div",{className:V("TooltipContent")},i.createElement("div",{className:V("TooltipDescription")},t),i.createElement("div",{className:V("TooltipCloseIcon"),onClick:e.onCloseClick}),i.createElement("div",{className:V("TooltipButtons")},i.createElement(fe,{className:V("TooltipButton",{pinned:"bottom-right"}),size:"m",theme:"action",onClick:n},de("Сохранить",{context:'Кнопка "сохранить картинку на компьютер" при неудачном сохранении на Яндекс.Диск'}))))},ge=(n(632),Object(u.createClassNameModifier)(Object(l.b)(),{type:"check"})),be=s()(Z),ye=ge(l.a),Oe=i.createElement(ye,{className:V("Icon",{type:"check"}),type:"check"}),we=new M.Registry({id:V()});we.set(V("Presenter",{status:o.active}),function(e){var t=e.upload,n=i.useCallback(function(){setTimeout(t,0)},[t]);return i.createElement(Q,{className:e.className,onClick:n,icon:ee,title:J("Сохранить на диск",{context:"Кнопка для сохранения картинки на Яндекс.Диск"})})}),we.set(V("Presenter",{status:o.loading}),function(e){return i.createElement(Q,{className:e.className,icon:re,title:ne("Сохраняем картинку",{context:"Кнопка для сохранения картинки на Яндекс.Диск во время загрузки"})})}),we.set(V("Presenter",{status:o.failed}),function(e){var t=i.createRef(),n=le(i.useState(!0),2),r=n[0],o=n[1];!function(e,t,n,r){i.useEffect(function(){e();var r=setTimeout(t,n);return function(){t(),clearTimeout(r)}},[e,t,n].concat(r))}(i.useCallback(function(){return o(!0)},[o]),i.useCallback(function(){return o(!1)},[o]),e.errorTooltipTimeout||5e3,[]);var a=e.error,s=e.requestAuthorization;i.useEffect(function(){a instanceof D&&s&&s()},[a,s]);var c=i.createElement(ve,{tld:e.tld,onCloseClick:function(){return o(!1)},fileUrl:e.fileUrl,fileName:e.fileName});return a instanceof A&&(c=i.createElement(me,{tld:e.tld,onCloseClick:function(){return o(!1)}})),i.createElement(M.ComponentRegistryConsumer,{id:V()},function(n){var o=n[V("Presenter",{status:"active"})];return i.createElement(i.Fragment,null,i.createElement("div",{ref:t},i.createElement(o,ue({},e))),c&&i.createElement(pe,{view:"default",target:"anchor",className:V("Tooltip",{theme:"dark"}),keepMounted:!1,hasTail:!0,visible:r,anchor:t,zIndexGroupLevel:20,mainOffset:0,scope:e.popupScope,directions:["bottom-center","top-center"]},c))})}),we.set(V("Presenter",{status:o.uploaded}),function(e){return i.createElement(Q,{className:e.className,icon:Oe,title:be("Картинка сохранена",{context:"Кнопка для сохранения картинки на Яндекс.Диск после успешной загрузки"})})});var Ce=Object(M.withRegistry)(we)(Y),Ee=n(421),je=(n(635),Object(u.createClassNameModifier)(Object(l.b)(),{type:"chain"})),Se=n(831),_e=n(17),ke=(n(636),Object(u.withBemMod)(Object(_e.b)(),{theme:"normal"})),Ie=(n(637),n(901)),Pe=n(832),xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Me=Object(u.compose)(Se.a,ke,Ie.a)(Pe.a),Ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=i.createRef(),t}return xe(t,e),t.prototype.componentDidMount=function(){this.selectAll()},t.prototype.componentDidUpdate=function(){this.selectAll()},t.prototype.render=function(){return i.createElement(Me,{view:"default",theme:"normal",size:"m",value:this.props.value,controlRef:this.inputRef})},t.prototype.selectAll=function(){var e=this.inputRef.current;setTimeout(function(){return e&&e.select()})},t}(i.Component),Re=n(681),Te=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=je(l.a),Le=ge(l.a),Ae=i.createElement(De,{type:"chain"}),Be=i.createElement(Le,{type:"check"}),Fe=s()(Re),Ue=function(e){return i.createElement(Q,{logNode:e.logNode,counter:e.counter,icon:Ae,title:Fe("Скопировать ссылку",{context:"Кнопка для коппирования ссылки на картинку https://nda.ya.ru/3UYbpX"}),onClick:e.onClick})},He=function(e){function t(t){var n=e.call(this,t)||this;return n.state={fallback:!1,copied:!1},n.onClick=n.onClick.bind(n),n}return Te(t,e),t.prototype.componentDidUpdate=function(){this.state.copied&&!this.props.active&&this.setState({fallback:!1,copied:!1})},t.prototype.render=function(){return this.state.fallback?i.createElement(Ne,{value:this.props.link}):this.state.copied?i.createElement(Q,{icon:Be,title:Fe("Ссылка скопирована",{context:"Надпись оповещающая о успешном копировании ссылки https://nda.ya.ru/3UYbot"})}):i.createElement(Ue,{onClick:this.onClick,logNode:this.props.logNode,counter:this.props.counter})},t.prototype.onClick=function(){var e=this,t=Object(Ee.copyToBuffer)(this.props.link);setTimeout(function(){e.setState({copied:t,fallback:!t})},0)},t}(i.Component),ze=(n(634),function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),qe=Object(p.cn)("MMSharePopup"),We=function(e){return ze({lang:e.globalContext.lang},e.config.shareConfig)},Ge=Object(c.withBaobab)({name:"share"})(function(e){var t=Object(I.c)(We),n=t.services,r=t.lang,o=Object(P.b)(),a={page_url:e.snippetUrl,yaimages_search_url:"",yaimages_search_request:""},s=o.shareClick;return i.createElement(k,{link:e.link,popup:{anchor:e.anchor,visible:e.visible,secondaryOffset:e.secondaryOffset||3,zIndex:e.zIndex,zIndexGroupLevel:e.zIndexGroupLevel,scope:e.popupScope},services:n,onShare:e.onShare,onLoadingStart:e.onLoadingStart,onLoadingEnd:e.onLoadingEnd,className:qe({hidden:!e.ready}),onOutsideClick:e.onOutsideClick,lang:r,footer:i.createElement(i.Fragment,null,i.createElement(He,{link:e.link,active:Boolean(e.visible),counter:s&&Object(x.b)(s,{"-name":"copylink"}),logNode:s&&Object(x.a)(s)}),e.isDiskShareEnabled&&i.createElement("hr",{className:"MMShare-Spacer"}),e.isDiskShareEnabled&&e.originalUrl&&i.createElement(Ce,{tld:e.tld,fileUrl:e.originalUrl,loggedIn:Boolean(e.loggedIn),dirName:e.diskShareDirectoryName,fileMeta:a,requestAuthorization:e.requestAuthorization,popupScope:e.popupScope,counter:s&&Object(x.b)(s,{"-name":"disk"})}))})}),Ve=n(36),Ye=n(34),Ke=(n(628),function(){return(Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)});function Xe(e){return i.createElement(te.b,Ke({size:te.a.xs},e))}var Qe=n(16),Ze=n(121),Je=(n(626),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),$e=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},et=Object(u.compose)(d)(l.a),tt=s()(Ze),nt=function(e){function t(t){var n=e.call(this,t)||this;return n.popupTarget=i.createRef(),n.state={popupVisible:!1,isLoading:!1,isReady:!1},n.toggleShare=n.toggleShare.bind(n),n.onLoadingStart=n.onLoadingStart.bind(n),n.onLoadingEnd=n.onLoadingEnd.bind(n),n.onOutsideSharePopupClick=n.onOutsideSharePopupClick.bind(n),n}return Je(t,e),t.prototype.toggleShare=function(){this.setState({popupVisible:!this.state.popupVisible})},t.prototype.onLoadingStart=function(){this.setState({isLoading:!0})},t.prototype.onLoadingEnd=function(){this.setState({isLoading:!1,isReady:!0})},t.prototype.closeShare=function(){this.setState({popupVisible:!1})},t.prototype.componentDidUpdate=function(e){e.link!==this.props.link&&this.closeShare()},t.prototype.render=function(){var e=this.props,t=e.link,n=e.shareClick,r=this.state.isLoading?i.createElement(Xe,{className:Object(Qe.a)("ShareSpinner")}):i.createElement(et,{type:"side-left"});return i.createElement(i.Fragment,null,i.createElement(Ve.b,{className:Object(Qe.a)("Share"),text:tt("Отправить",{context:"Кнопка в просмотрщике картинки, позволяющая поделиться ссылкой на текущую картинку, то есть отправить информацию о ней другим пользователям"}),icon:r,onClick:this.toggleShare,logNode:{name:"share-button"},forwardRef:this.popupTarget}),i.createElement(Ge,{link:t,tld:this.props.tld,originalUrl:this.props.originalUrl,loggedIn:this.props.loggedIn,snippetUrl:this.props.snippetUrl,anchor:this.popupTarget,logNode:{events:{onShare:Object(c.logTech)("share",function(e,r){var o=$e(r,1)[0];return Object(x.b)(n,{"-name":o},void 0,{href:t})})}},popupScope:this.props.popupScope,zIndexGroupLevel:20,zIndex:20,secondaryOffset:this.props.view===Ye.b.twoLines?-50:void 0,visible:this.state.popupVisible,ready:this.state.isReady,onOutsideClick:this.onOutsideSharePopupClick,onLoadingStart:this.onLoadingStart,onLoadingEnd:this.onLoadingEnd,isDiskShareEnabled:this.props.isDiskShareEnabled,diskShareDirectoryName:this.props.diskShareDirectoryName,requestAuthorization:this.props.requestAuthorization}))},t.prototype.onOutsideSharePopupClick=function(e){this.popupTarget.current&&this.popupTarget.current.contains(e.target)||this.closeShare()},t}(i.Component)},261:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var r=n(0),o=n(1),i=n(6),a=n.n(i),s=n(5),c=n(37),u=(n(619),Object(o.createClassNameModifier)(Object(c.b)(),{type:"download"})),l=n(36),d=n(130),p=n(121),f=n(451),h=n(721),m=n(452),v=n(249),g=n(527),b=n(537),y=(n(621),Object(o.createClassNameModifier)(Object(c.b)(),{type:"more-sizes"})),O=n(23),w=n(7),C=n(16),E=(n(620),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=y(c.a),k=Object(o.compose)(f.a,h.a,b.a,m.a,g.a,function(e){return function(t){var n=t.contentRef,o=t.targetRef,i=S(t,["contentRef","targetRef"]);return r.useEffect(function(){n&&"object"===typeof n&&n.current&&"function"===typeof o&&o(n.current)},[n,o]),r.createElement(e,j({},i))}})(v.a),I=Object(C.a)("ImageSizesPopup"),P=Object(C.a)("ImageSizesList"),x=function(e){function t(t){var n=e.call(this,t)||this;return n.popupTarget=r.createRef(),n.popupContentRef=r.createRef(),n.state={popupVisible:!1},n.togglePopup=n.togglePopup.bind(n),n.onOutsideSizesPopupClick=n.onOutsideSizesPopupClick.bind(n),n}return E(t,e),t.prototype.openPopup=function(){this.setState({popupVisible:!0})},t.prototype.closePopup=function(){this.setState({popupVisible:!1})},t.prototype.componentDidUpdate=function(e){e.link!==this.props.link&&this.closePopup()},t.prototype.render=function(){return r.createElement(r.Fragment,null,r.createElement(l.b,{className:Object(C.a)("ImageSizes",{theme:this.props.theme||"primary"}),text:this.props.dups[0].text,rightIcon:r.createElement(_,{type:"more-sizes"}),onClick:this.togglePopup,forwardRef:this.popupTarget,logNode:{name:"other"}}),r.createElement(k,{className:I,hasTail:!0,secondaryOffset:15,theme:"normal",view:"default",target:"anchor",onOutsideClick:this.onOutsideSizesPopupClick,anchor:this.popupTarget,visible:this.state.popupVisible,zIndexGroupLevel:20,scope:this.props.popupScope,innerRef:this.popupContentRef,contentRef:this.popupContentRef,ignoreRefs:[this.popupTarget]},r.createElement("ul",{className:P},this.renderDups())))},t.prototype.togglePopup=function(){this.setState({popupVisible:!this.state.popupVisible})},t.prototype.onOutsideSizesPopupClick=function(e){this.popupTarget.current&&this.popupTarget.current.contains(e.target)||this.closePopup()},t.prototype.renderDups=function(){var e=this,t=this.props.dups;if(t){var n=this.props.otherSizeCounter?void 0:{events:{}};return t.slice(1).map(function(t,o){var i=t.url,a=t.text;return r.createElement(M,{key:i,url:i,clickCounter:e.props.otherSizeCounter,logNode:j({name:"size-"+o,attrs:e.props.otherSizeLogNode&&e.props.otherSizeLogNode.attrs},n),onSizeClick:e.props.onSizeClick,idx:o},a)})}},t}(r.Component),M=Object(s.withBaobab)({name:"ImageSizesListItem",events:{onClick:Object(s.logClick)(function(e){var t=e.props,n=t.idx,r=t.clickCounter,o=t.url;return r?Object(O.b)(r,{"-p":n+1},{path:Object(w.b)(r)+"/p"+(n+1)},{href:o}):void 0})}})(function(e){var t=e.onClick,n=e.onSizeClick,o=e.url,i=r.useCallback(function(e){n?n(e,o,t):t&&t(e)},[n,t,o]);return r.createElement("li",null,r.createElement("a",{className:Object(C.a)("ImageSizesListItem"),href:e.url,target:"_blank",rel:"noopener",onClick:i,onContextMenuCapture:i},e.children))}),N=Object(s.withBaobab)({name:Object(C.a)("ImageSizes")})(x),R=n(34),T=(n(618),a()(p)),D=Object(d.a)(l.b),L=Object(o.compose)(u)(c.a),A=Object(C.a)("OpenImageSizes"),B=Object(s.withBaobab)({name:"open-image"})(function(e){var t=e.url,n=e.dups,o=e.link,i=e.downloadCounter,a=e.downloadLogNode,c=e.otherSizeCounter,u=e.otherSizeLogNode,d=e.popupScope,p=e.view,f=e.isOpenImageUnauthPopupEnabled,h=e.onOpenButtonClick,m=e.onSizeClick,v=e.theme,g=void 0===v?"primary":v,b=p===R.b.twoLines&&n.length>1,y=r.useMemo(function(){return Object(s.logClick)(i)},[i]),O=r.useCallback(function(e){h&&h(e,t,y)},[y,h,t]),w=r.useMemo(function(){return f?{name:"button-with-unauthpopup"}:{name:"button",attrs:a&&a.attrs,events:{onClick:y,onContextMenuCapture:y}}},[f,y,a]);return r.createElement("div",{className:A},r.createElement(D,{className:Object(C.a)("OpenImage",{isOtherSizesEnabled:b,theme:g}),text:T("Открыть",{context:'Кнопка "Открыть" картинку'}),rightText:n&&n[0]&&n[0].text,url:f?"#":t,icon:r.createElement(L,{type:"download"}),type:l.a.link,logNode:w,onClick:f?O:void 0}),b&&r.createElement(N,{logNode:f?void 0:{name:"sizes"},dups:n,link:o,otherSizeCounter:c,otherSizeLogNode:u,popupScope:d,onSizeClick:m,theme:g}))})},262:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n(0),o=n(6),i=n.n(o),a=n(28),s=n(5),c=n(1),u=n(37),l=(n(623),Object(c.createClassNameModifier)(Object(u.b)(),{type:"similar-search"})),d=n(36),p=n(130),f=n(34),h=n(16),m=n(121),v=(n(622),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),g=i()(m),b=Object(p.a)(d.b),y=l(u.a),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.render=function(){var e=this.props,t=e.onLog,n=e.onClickCounter,o=e.onClickLogNode,i=e.view,a=e.isSimilarUnauthPopupEnabled,c=e.onClick,u=e.experiments,l=this.getUrl();if(!l)return null;var p=i===f.b.compact||i===f.b.twoLines;return r.createElement(b,{className:Object(h.a)("SearchByImage",{view:i,similarButtonIcon:u&&u.similarButtonIcon}),logNode:a?void 0:{name:"cbir1",attrs:o&&o.attrs,events:{onClick:Object(s.logClick)(n)}},text:p?g("Похожие",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqn"}):g("Другие размеры и похожие",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqn"}),url:a?"#":l,target:this.getTarget(),icon:r.createElement(y,{type:"similar-search"}),type:d.a.link,onLog:a?void 0:t,onClick:c})},t.prototype.getUrl=function(){var e,t,n,r,o,i,s=this.props,c=s.image,u=s.imagesCbirSearchUrl,l=c.extraOrigin||(null===(t=null===(e=c.preview)||void 0===e?void 0:e[0])||void 0===t?void 0:t.origin)||(null===(r=null===(n=c.dups)||void 0===n?void 0:n[0])||void 0===r?void 0:r.origin)||(null===(o=c.preview)||void 0===o?void 0:o[0])||(null===(i=c.dups)||void 0===i?void 0:i[0]),d=(null===l||void 0===l?void 0:l.url)||c.imgHref;if(d)return Object(a.appendQueryString)(u,{url:d,rpt:"imageview"})},t.prototype.getTarget=function(){return this.props.openServiceOnNewTab?"_blank":"_self"},t}(r.PureComponent)},263:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n(1),i=n(451),a=n(721),s=n(452),c=n(249),u=n(537),l=n(4),d=Object(l.cn)("MMViewerButtonTooltip"),p=(n(575),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),f=Object(o.compose)(i.a,a.a,s.a,u.a)(c.a),h=function(e){var t=e.hasTail,n=void 0!==t&&t,o=e.anchor,i=e.mainOffset,a=void 0===i?0:i,s=e.zIndexGroupLevel,c=void 0===s?20:s,u=e.text,l=e.children,h=e.initialVisibility,m=void 0!==h&&h,v=p(r.useState(m),2),g=v[0],b=v[1],y=r.useCallback(function(){return b(!0)},[]),O=r.useCallback(function(){return b(!1)},[]);return r.useEffect(function(){b(m)},[m]),r.createElement(r.Fragment,null,l(y,O),u?r.createElement(f,{theme:"normal",view:"default",target:"anchor",className:d(),directions:e.directions,keepMounted:!1,hasTail:n,visible:g,anchor:o,mainOffset:a,zIndexGroupLevel:c},r.createElement("div",{className:d("Text")},e.text)):null)}},265:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(3),o=n(0),i=n.n(o),a=n(50);function s(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hovered:e.props.hovered},e.onMouseEnter=function(t){e.setState({hovered:!0}),void 0!==e.props.onMouseEnter&&e.props.onMouseEnter(t)},e.onMouseLeave=function(t){e.setState({hovered:!1}),void 0!==e.props.onMouseLeave&&e.props.onMouseLeave(t)},e}return Object(r.__extends)(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({hovered:!e.disabled&&(this.state.hovered||e.hovered)})},n.prototype.render=function(){var t=this.state.hovered,n=this.props.disabled,o=e;return i.a.createElement(o,Object(r.__assign)({},this.props,{hovered:n?void 0:t,onMouseEnter:n?void 0:this.onMouseEnter,onMouseLeave:n?void 0:this.onMouseLeave}))},n.displayName="WithControl@desktop("+Object(a.a)(e)+")",n}(o.PureComponent)}},266:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),o=n(17),i=n(226),a=n(227),s=n(228),c=n(229),u=new r.Registry({id:Object(o.b)()});u.set("Control",i.a).set("Box",a.a).set("Icon",s.a).set("Hint",c.a)},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(448);t.default=function(e,t){var n=o.useFirstMountState();r.useEffect(function(){if(!n)return e()},t)}},27:function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return w});var r,o,i=n(0),a=n.n(i),s=n(14),c=n.n(s),u=n(41),l=n.n(u),d=n(24),p=n(29),f=(n(55),n(8)),h=n(9);function m(e){var t=function(){return"undefined"!==typeof window&&(r=window.innerHeight,o=window.innerWidth),{height:r,width:o}}(),n=e.getBoundingClientRect();return 0!==n.width&&0!==n.height&&(!(n.bottom<=0||n.right<=0)&&(n.top<t.height&&n.left<t.width))}n(86),n(56);var v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object(d.b)({theme:p.theme});var g,b="Root",y=Object(d.a)(p.theme),O=b+"_inited";function w(e,t){void 0===t&&(t={});var n={},r=t.hydratePriority,o=void 0===r?g.force:r;return function(t){var r;if(h.a){var i=function(e,t,n){return function(r){for(var o=r?r.getElementsByClassName(b):document.getElementsByClassName(b),i=new RegExp("^"+t+"-"),a=0;a<o.length;a+=1){var s=o[a],c=s.id;c&&i.test(c)&&C(e,s,n)}}}(t,e,n);Object(f.a)()&&(Object(f.a)().on("react-adapter:unmount",function(e){return function(e,t){Object.keys(e).forEach(function(n){var r=e[n];t&&!t.contains(r)||(c.a.unmountComponentAtNode(r),r.classList.remove(O),delete e[n])})}(n,e)}),Object(f.a)().on("react-adapter:mount",function(e){return i(e)}));var s=(null===(r=window.Ya)||void 0===r?void 0:r.SerpContext)||{};(s&&s.expFlags||{}).react_init_on_page_load||s.reactInitOnPageLoad?"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("DOMContentLoaded",function(){return i()}):window.BEM&&BEM.DOM.ready(function(){return i()})}return function(n){return a.a.createElement("div",{className:b+" "+y,id:e+"-"+l()(),"data-state":JSON.stringify(n),"data-hydrate-priority":o},a.a.createElement(t,v({},n)))}}}function C(e,t,n){var r=function(e){return e.getAttribute("data-hydrate-priority")}(t),o=function(){return function(e,t,n){var r=t.id;if(n[r])return;var o=function(e){return JSON.parse(e.getAttribute("data-state")||"{}")}(t);n[r]=t,Object(d.b)({theme:p.theme,root:t}),c.a.hydrate(a.a.createElement(e,v({},o)),t,function(){t.classList.add(O)})}(e,t,n)};if(r!==g.force)if(r!==g.checkVisible){if(r!==g.deferred)return o();window.requestAnimationFrame(o)}else{m(t)?o():window.requestAnimationFrame(o)}else o()}!function(e){e.force="force",e.checkVisible="check-visible",e.deferred="deferred"}(g||(g={}))},270:function(e,t,n){},271:function(e,t,n){},273:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return g});var r,o=n(0),i=n(5),a=n(781),s=n(777),c=n(292),u=n(780),l=n(82),d=n(10);!function(e){e.image="image",e.path="path",e.title="title",e.container="container"}(r||(r={}));var p=n(53),f=n(23),h=(n(416),Object(s.a)(c.a)),m=function(e){var t=e.className,n=e.image,r=e.title,i=e.domain,s=e.price,c=e.currency,f=void 0===c?"RUB":c,m=e.link,v=e.favicon,g=e.extendedClickArea,b=void 0===g||g,y=e.withMarket,O=void 0!==y&&y,w=e.counter,C=void 0===w?{path:""}:w,E=e.onError,j=e.onImageLoad,S=e.onImageClick,_=e.onPathClick,k=e.onTitleClick,I=e.onContainerClick,P=e.onPriceClick,x=o.useCallback(function(e){C.path&&Object(d.a)(e,{vars:{pos:C.pos}})},[C.path,C.pos]),M=o.useCallback(function(){x(C.path+"/click/item"),I&&I()},[C.path,I,x]),N=o.useCallback(function(e){x(C.path+"/click/thumb"),e.stopPropagation(),S&&S()},[C.path,S,x]),R=o.useCallback(function(e){x(C.path+"/click/title"),e.stopPropagation(),k&&k()},[C.path,k,x]),T=o.useCallback(function(e){x(C.path+"/click/url"),e.stopPropagation(),_&&_()},[C.path,_,x]),D=o.useCallback(function(e){x(C.path+"/click/price"),e.stopPropagation(),P&&P()},[C.path,P,x]),L=o.useMemo(function(){return[{url:b?void 0:m,text:i,onClick:T}]},[b,m,i,T]);return o.createElement(h,{className:Object(p.a)({extendedClickArea:b,withMarket:O},[t]),theme:b?"normal":void 0,url:b?m:void 0,onClick:b?M:void 0,as:b?"a":"div"},o.createElement(h,{className:Object(p.a)("ImageLink"),url:b?void 0:m,onClick:N,rel:"noopener",target:"_blank"},o.createElement("img",{className:Object(p.a)("Image"),key:n.url,src:n.url,alt:r,onError:E,onLoad:j})),o.createElement("div",{className:Object(p.a)("Content")},o.createElement(h,{className:Object(p.a)("Title"),theme:"normal",url:b?void 0:m,onClick:R},r),o.createElement(u.a,{favicon:v?o.createElement(l.a,{className:Object(p.a)("Favicon"),favicon:v}):void 0,className:Object(p.a)("GreenUrl"),items:L,boldCount:0}),o.createElement("div",{className:Object(p.a)("Spacer")}),s&&o.createElement("div",{className:Object(p.a)("Price"),onClick:D},o.createElement(a.a,{value:s,currency:f,rurSymbolFont:!0}))))};function v(e,t){return Object(i.logClick)(function(n){var r=n.props,o=r.extendedClickArea,i=r.counters,a=r.source,s=r.pos,c=r.link;if(o&&t||!o&&!t)return Object(f.b)(null===i||void 0===i?void 0:i.click,{"-action-type":"greenurl","-click-source":"similar_offers","-data-source":a,"-click-area":e,"-pos":String(s)},void 0,{href:encodeURIComponent(c)})})}var g=Object(i.withBaobab)({name:"offer",events:{onImageClick:v(r.image,!1),onPathClick:v(r.path,!1),onTitleClick:v(r.title,!1),onContainerClick:v(r.container,!0)}})(m)},28:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(306);t.appendQueryString=o.appendQueryString,t.stringifyUrlParams=o.stringifyUrlParams;var i,a=n(307),s="application/json; charset=utf-8",c={Accept:s},u=function(){};function l(e,t,n,o){void 0===t&&(t={});var i=r({},"json"===t.format?c:{},t.headers),a=t.body,u="";return Object.keys(i).some(function(e){return"content-type"===e.toLowerCase()})?u=String(a||""):(i["content-type"]=s,"string"!==typeof a&&(u=JSON.stringify(a))),d(e,r({},t,{method:o,headers:i}),n,u)}function d(e,t,n,r){var s=n.successCallback,c=void 0===s?u:s,l=n.failureCallback,d=void 0===l?u:l,p=t.headers,f=void 0===p?{}:p,h=t.queryParams,m=void 0===h?{}:h,v=t.timeout,g=void 0===v?3e4:v,b=t.credentials,y=void 0===b?"include":b,O=t.method,w=void 0===O?"GET":O,C=function(e,n){var r=e.response;if("json"===t.format)try{r=JSON.parse(r)}catch(t){return void d(i.JSON_PARSE_ERROR,e)}n?d(n,e,r):c(r,e)},E=new XMLHttpRequest;return E.open(w,o.appendQueryString(e,m)),E.withCredentials=a.shouldSendCredentials(e,y),E.timeout=g,Object.keys(f).forEach(function(e){return E.setRequestHeader(e,f[e])}),E.onload=function(){E.status>=200&&E.status<300?C(E):C(E,i.ERROR_STATUS_CODE)},E.onerror=function(){d(i.REQUEST_FAILED,E)},E.ontimeout=function(){d(i.TIMEOUT,E)},E.send(r),E}!function(e){e.TIMEOUT="TIMEOUT",e.REQUEST_FAILED="REQUEST_FAILED",e.JSON_PARSE_ERROR="JSON_PARSE_ERROR",e.ERROR_STATUS_CODE="ERROR_STATUS_CODE"}(i=t.AjaxError||(t.AjaxError={})),t.get=function(e,t,n){return void 0===t&&(t={}),d(e,r({},t,{method:"GET"}),n)},t.post=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"POST")},t.put=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"PUT")},t.del=function(e,t,n){return void 0===t&&(t={}),l(e,t,n,"DELETE")},t.sendRequest=d},281:function(e,t,n){},287:function(e,t,n){},288:function(e,t){},289:function(e,t,n){"use strict";n.d(t,"b",function(){return Je}),n.d(t,"a",function(){return et});var r=n(0),o=n.n(r),i=n(4),a=n(256),s=n.n(a),c=n(2),u=n(57),l=n(5),d=n(24),p=n(338),f=(n(583),n(65)),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function m(e){return r.createElement(f.b,h({size:f.a.m},e))}var v=n(6),g=n.n(v),b=n(857),y=Object(i.cn)("FullscreenControls"),O=n(678),w=(n(577),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),C=s.a,E=g()(O),j=function(e){function t(t){var n=e.call(this,t)||this;return n.hideDelayTimeout=2e3,n.slideshowDelayInterval=4e3,n.isComponentMounted=!1,n.onActionClick=function(e){n.slideshowToggle(),e.stopPropagation()},n.onCloseClick=function(e){n.exitFullscreen(),e.stopPropagation()},n.onTitleClick=function(e){n.props.onTitleClick&&n.props.onTitleClick(),e.stopPropagation()},n.onDomainClick=function(e){n.props.onDomainClick&&n.props.onDomainClick(),e.stopPropagation()},n.state={hidden:!1,isSlideshowPlay:!1,isFullscreen:Boolean(C&&C.isFullscreen)},n.showInfoPanel=n.showInfoPanel.bind(n),n.showInfoPanelThrottle=Object(u.throttle)(n.showInfoPanel.bind(n),n.hideDelayTimeout/2,{delayedLastCall:!0}),n.hideInfoPanel=n.hideInfoPanel.bind(n),n.onFullscreenChange=n.onFullscreenChange.bind(n),n.onTitleClick=n.onTitleClick.bind(n),n.onDomainClick=n.onDomainClick.bind(n),n.goNext=n.goNext.bind(n),n}return w(t,e),t.prototype.componentDidUpdate=function(){this.state.isSlideshowPlay&&this.restartSlideshowTimer()},t.prototype.componentDidMount=function(){this.showInfoPanel(),this.isComponentMounted=!0,C&&C.on("change",this.onFullscreenChange)},t.prototype.componentWillUnmount=function(){this.exitFullscreen(),this.isComponentMounted=!1,window.removeEventListener("mousemove",this.showInfoPanelThrottle),C&&C.off("change",this.onFullscreenChange)},t.prototype.render=function(){var e=this.props,t=e.title,n=e.domain,o=e.url,i=e.nextItemHandler,a=e.prevItemHandler;return this.state.isFullscreen?r.createElement("div",{className:y({hidden:this.state.hidden})},a&&r.createElement("div",{className:y("PrevArrow"),onClick:a}),i&&r.createElement("div",{className:y("NextArrow"),onClick:i}),r.createElement("div",{className:y("Main")},i&&r.createElement("button",{className:y("Action",{stop:this.state.isSlideshowPlay}),onClick:this.onActionClick,"aria-label":this.state.isSlideshowPlay?E("Остановить",{context:"Кнопка остановки режима слайдшоу картинок"}):E("Запустить",{context:"Кнопка запуска режима слайдшоу картинок"})}),r.createElement("div",{className:y("Info")},r.createElement("a",{className:y("Title"),href:o,rel:"noopener",target:"_blank",onClick:this.onTitleClick},r.createElement(b.a,null,t)),r.createElement("a",{className:y("Domain"),href:o,rel:"noopener",target:"_blank",onClick:this.onDomainClick},n)),r.createElement("button",{className:y("Close"),onClick:this.onCloseClick,"aria-label":E("Закрыть",{context:"Кнопка выключения режима полноэкранного просмотра картинок"})}))):""},t.prototype.onFullscreenChange=function(){C&&(Boolean(C.isFullscreen)?this.enterFullscreen():this.exitFullscreen())},t.prototype.enterFullscreen=function(){this.setState({isFullscreen:!0}),window.addEventListener("mousemove",this.showInfoPanelThrottle)},t.prototype.exitFullscreen=function(){if(C){var e=this.state.isFullscreen;this.slideshowStop(),e&&(this.setState({isFullscreen:!1}),window.removeEventListener("mousemove",this.showInfoPanelThrottle),C.isFullscreen&&C.exit(),this.props.onExit&&this.props.onExit())}},t.prototype.showInfoPanel=function(){this.toggleInfoPanel(!1)},t.prototype.hideInfoPanel=function(){this.toggleInfoPanel(!0)},t.prototype.toggleInfoPanel=function(e){e||("undefined"!==typeof this.hideTimeoutHandle&&window.clearTimeout(this.hideTimeoutHandle),this.hideTimeoutHandle=window.setTimeout(this.hideInfoPanel,this.hideDelayTimeout)),this.isComponentMounted&&this.setState({hidden:e})},t.prototype.slideshowStop=function(){this.state.isSlideshowPlay&&(this.setState({isSlideshowPlay:!1}),this.stopSlideshowTimer(),this.props.onStopAutoplay&&this.props.onStopAutoplay())},t.prototype.slideshowToggle=function(){this.props.nextItemHandler&&(this.state.isSlideshowPlay?this.slideshowStop():(this.setState({isSlideshowPlay:!0}),this.props.onStartAutoplay&&this.props.onStartAutoplay(),this.restartSlideshowTimer()))},t.prototype.restartSlideshowTimer=function(){this.stopSlideshowTimer(),this.slideshowTimeoutHandle=window.setTimeout(this.goNext,this.slideshowDelayInterval)},t.prototype.goNext=function(){var e=this.props,t=e.nextItemHandler,n=e.isLoaded;t&&(this.state.isSlideshowPlay?(n&&t(),this.restartSlideshowTimer()):this.stopSlideshowTimer())},t.prototype.stopSlideshowTimer=function(){this.slideshowTimeoutHandle&&(window.clearTimeout(this.slideshowTimeoutHandle),this.slideshowTimeoutHandle=void 0)},t.stopPropagation=function(e){e.stopPropagation()},t}(r.PureComponent);var S=n(1),_=n(25),k=n(19),I=n(48),P=(n(582),Object(i.cn)("CropObjectsItem")),x=function(e){var t=e.className,n=e.style,o=e.onClick;return r.createElement("div",{className:P(null,[t]),style:n,onClick:o},r.createElement("div",{className:P("Point")}))},M=(n(581),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),N=Object(i.cn)("CropObjects"),R=function(e){function t(t){var n=e.call(this,t)||this;return n.updateWrapRef=function(e){n.setState({wrapElement:e})},n.state={wrapElement:null},n}return M(t,e),t.prototype.componentDidMount=function(){this.loadImageCropObjects()},t.prototype.render=function(){var e,t=this.props,n=t.className,o=t.activeCropObject,i=t.cropObjects,a=t.objectsClassName,s=t.onObjectClick,c=this.state.wrapElement;if(!i||!i.data.length)return null;if(c){var u=100/c.offsetWidth,l=100/c.offsetHeight;e=i&&i.data.map(function(e,t){var n=N("Item",{active:o===e},[a]),i=e.position.x+e.size.width/2-u+"%",c=e.position.y+e.size.height/2-l+"%";return r.createElement(x,{key:t,className:n,style:{top:c,left:i},onClick:function(){return s(e)}})})}return r.createElement("div",{className:n,ref:this.updateWrapRef},e)},t.prototype.loadImageCropObjects=function(){var e=this.props,t=e.fetchCropObjects,n=e.imageHref,r=e.imageId;r&&n&&t(r,n)},t}(r.PureComponent),T=Object(_.d)(function(e,t,n){return{cropObjects:n.imageId&&e.cropObjects[n.imageId]||void 0,fetchCropObjects:function(e,t){return function(n,r){return Object(k.i)(e,t,n,r)}}(t,e)}})(R),D=(n(580),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),L=Object(i.cn)("trimmer"),A=function(e){function t(t){var n=e.call(this,t)||this;return n.startPointerXMove=NaN,n.startPointerYMove=NaN,n.startPositionXMove=NaN,n.startPositionYMove=NaN,n.startSizeWidthMove=NaN,n.startSizeHeightMove=NaN,n.pointNameMove="",n.actionName="",n.trimmerRef=r.createRef(),n.parentWidth=0,n.parentHeight=0,n.positionX=0,n.positionY=0,n.initWidthInPercent=70,n.initHeighInPercent=70,n.minWidth=50,n.minHeight=50,n.x=15,n.y=15,n.width=0,n.height=0,n.firstReport=!0,n.onCropObjectClick=function(e){var t;n.setSize(e.size.width,e.size.height),n.setPosition(e.position.x,e.position.y),null===(t=n.saveTrimmerArea)||void 0===t||t.call(n,n.getArea(),"crop-object-click"),n.setActiveCropObject(e)},n.onPointerDown=n.onPointerDown.bind(n),n.onPointerUp=n.onPointerUp.bind(n),n.onTrimmerPointerMove=n.onTrimmerPointerMove.bind(n),n.onTrimmerPointerDown=n.onTrimmerPointerDown.bind(n),n.onPointPointerMove=n.onPointPointerMove.bind(n),n.onPointPointerDown=n.onPointPointerDown.bind(n),n.onPointLeftTopPointerDown=n.onPointLeftTopPointerDown.bind(n),n.onPointRightTopPointerDown=n.onPointRightTopPointerDown.bind(n),n.onPointLeftBottomPointerDown=n.onPointLeftBottomPointerDown.bind(n),n.onPointRightBottomPointerDown=n.onPointRightBottomPointerDown.bind(n),n.state={activeCropObject:null},n}return D(t,e),t.prototype.componentDidMount=function(){var e;this.setDefaults(),this.checkParentSize(),this.setSize(this.initWidthInPercent,this.initHeighInPercent),this.setPosition(this.x,this.y),null===(e=this.saveTrimmerArea)||void 0===e||e.call(this,this.getArea(),"point")},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("mousemove",this.onTrimmerPointerMove),window.removeEventListener("mousemove",this.onPointPointerMove)},t.prototype.getArea=function(){var e=this.getRectangle(),n=e.point1,r=e.point2;return{point1:{x:this.roundNumber(t.toRangeFromZeroToOne(n.x),4),y:this.roundNumber(t.toRangeFromZeroToOne(n.y),4)},point2:{x:this.roundNumber(t.toRangeFromZeroToOne(r.x),4),y:this.roundNumber(t.toRangeFromZeroToOne(r.y),4)}}},t.prototype.render=function(){var e=this.props,n=e.areCropObjectsEnabled,o=e.cropObjectsWrapperClassName,i=e.cropObjectsClassName,a=e.imageHref,s=e.imageId,c=this.state.activeCropObject,u=n&&r.createElement(T,{className:o,objectsClassName:i,activeCropObject:c,imageHref:a,imageId:s,onObjectClick:this.onCropObjectClick});return r.createElement(r.Fragment,null,r.createElement("div",{className:L(null,[this.props.className]),ref:this.trimmerRef,onClick:t.stopPropogation,onMouseDown:this.onTrimmerPointerDown},r.createElement("div",{className:L("point",{pos:"left-top"}),onClick:t.stopPropogation,onMouseDown:this.onPointLeftTopPointerDown}),r.createElement("div",{className:L("point",{pos:"right-top"}),onClick:t.stopPropogation,onMouseDown:this.onPointRightTopPointerDown}),r.createElement("div",{className:L("point",{pos:"right-bottom"}),onClick:t.stopPropogation,onMouseDown:this.onPointRightBottomPointerDown}),r.createElement("div",{className:L("point",{pos:"left-bottom"}),onClick:t.stopPropogation,onMouseDown:this.onPointLeftBottomPointerDown})),u)},t.prototype.onPointLeftTopPointerDown=function(e){this.onPointPointerDown(e,"left-top")},t.prototype.onPointRightTopPointerDown=function(e){this.onPointPointerDown(e,"right-top")},t.prototype.onPointLeftBottomPointerDown=function(e){this.onPointPointerDown(e,"left-bottom")},t.prototype.onPointRightBottomPointerDown=function(e){this.onPointPointerDown(e,"right-bottom")},t.prototype.onPointPointerDown=function(e,t){e.stopPropagation(),this.onPointerDown(e),this.pointNameMove=t,this.actionName="size",window.addEventListener("mousemove",this.onPointPointerMove)},t.prototype.setPosition=function(e,t){if(this.trimmerRef.current){var n=this.roundNumber(e),r=this.roundNumber(t);n=Math.max(0,n),r=Math.max(0,r),n=Math.min(100-this.width,n),r=Math.min(100-this.height,r),this.trimmerRef.current.style.top=r+"%",this.trimmerRef.current.style.left=n+"%",this.positionX=n,this.positionY=r}},t.prototype.getRectangle=function(){return{point1:{x:this.positionX,y:this.positionY},point2:{x:this.positionX+this.width,y:this.positionY+this.height}}},t.prototype.onPointerDown=function(e){this.startPointerXMove=e.clientX,this.startPointerYMove=e.clientY,this.startPositionXMove=this.positionX,this.startPositionYMove=this.positionY,this.startSizeWidthMove=this.width,this.startSizeHeightMove=this.height,this.checkParentSize(),window.addEventListener("mouseup",this.onPointerUp)},t.prototype.onPointerUp=function(){var e;null===(e=this.saveTrimmerArea)||void 0===e||e.call(this,this.getArea(),this.actionName),window.removeEventListener("mouseup",this.onPointerUp),window.removeEventListener("mousemove",this.onTrimmerPointerMove),window.removeEventListener("mousemove",this.onPointPointerMove),this.setDefaults(),this.resetActiveCropObject()},t.prototype.onTrimmerPointerDown=function(e){this.onPointerDown(e),this.actionName="drag",window.addEventListener("mousemove",this.onTrimmerPointerMove)},t.prototype.onTrimmerPointerMove=function(e){e.stopPropagation();var t=e.clientX-this.startPointerXMove,n=e.clientY-this.startPointerYMove,r=this.convertPixelsToPercentages(t,n);this.setPosition(this.startPositionXMove+r.x,this.startPositionYMove+r.y)},t.prototype.onPointPointerMove=function(e){e.stopPropagation();var t=e.clientX-this.startPointerXMove,n=e.clientY-this.startPointerYMove,r=this.convertPixelsToPercentages(t,n),o=this.convertPixelsToPercentages(this.minWidth,this.minHeight),i=this.startPositionXMove+this.startSizeWidthMove,a=this.startPositionYMove+this.startSizeHeightMove,s=100-this.startPositionXMove,c=100-this.startPositionYMove,u=this.startPositionXMove+this.startSizeWidthMove-o.x,l=this.startPositionYMove+this.startSizeHeightMove-o.y;switch(this.pointNameMove){case"left-top":this.setSize(Math.min(i,this.startSizeWidthMove-r.x),Math.min(a,this.startSizeHeightMove-r.y)),this.setPosition(Math.min(u,this.startPositionXMove+r.x),Math.min(l,this.startPositionYMove+r.y));break;case"right-top":this.setSize(Math.min(s,this.startSizeWidthMove+r.x),Math.min(a,this.startSizeHeightMove-r.y)),this.setPosition(this.startPositionXMove,Math.min(l,this.startPositionYMove+r.y));break;case"right-bottom":this.setSize(Math.min(100-this.positionX,this.startSizeWidthMove+r.x),Math.min(100-this.positionY,this.startSizeHeightMove+r.y));break;case"left-bottom":this.setSize(Math.min(i,this.startSizeWidthMove-r.x),Math.min(c,this.startSizeHeightMove+r.y)),this.setPosition(Math.min(u,this.startPositionXMove+r.x),this.startPositionYMove)}},t.prototype.convertPixelsToPercentages=function(e,t){return{x:e/this.parentWidth*100,y:t/this.parentHeight*100}},t.prototype.setSize=function(e,t){var n=this.convertPixelsToPercentages(this.minWidth,this.minHeight),r=this.roundNumber(e),o=this.roundNumber(t);r=Math.max(n.x,r),o=Math.max(n.y,o),this.trimmerRef.current.style.width=e+"%",this.trimmerRef.current.style.height=t+"%",this.width=r,this.height=o},t.prototype.roundNumber=function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.round(e*n)/n},t.prototype.saveTrimmerArea=function(e,t){var n,r,o,i,a,s,c=this.props.imageHref;null===(r=(n=this.props).saveTrimmerArea)||void 0===r||r.call(n,e),this.firstReport?(this.firstReport=!1,null===(i=(o=this.props).onTrimmerStart)||void 0===i||i.call(o,c)):null===(s=(a=this.props).onTrimmerChange)||void 0===s||s.call(a,e,t,c)},t.prototype.setDefaults=function(){this.startPointerXMove=NaN,this.startPointerYMove=NaN,this.startPositionXMove=NaN,this.startPositionYMove=NaN,this.startSizeWidthMove=NaN,this.startSizeHeightMove=NaN,this.pointNameMove=""},t.prototype.checkParentSize=function(){var e=this.trimmerRef.current.parentNode;this.parentWidth=e.offsetWidth,this.parentHeight=e.offsetHeight},t.prototype.setActiveCropObject=function(e){this.state.activeCropObject!==e&&this.setState({activeCropObject:e})},t.prototype.resetActiveCropObject=function(){this.state.activeCropObject&&this.setState({activeCropObject:null})},t.stopPropogation=function(e){e.stopPropagation()},t.toRangeFromZeroToOne=function(e){return e/100},t}(r.Component),B=Object(I.d)(function(e){return function(t){return e(Object(k.o)(t))}}),F=Object(S.compose)(Object(_.d)(function(e,t){return{areCropObjectsEnabled:e.config.areCropObjectsEnabled,saveTrimmerArea:B(t)}}))(A),U=n(171),H=n(107),z=function(){if(!H.a)return!1;var e=document.createElement("img");return e.style.cssText="object-fit:cover",Boolean(e.style.objectFit)}(),q="undefined"!==typeof InstallTrigger,W=Object(I.d)(function(e){var t,n,r;return(null===(t=e.loadedImage)||void 0===t?void 0:t.data)||(null===(n=e.preview)||void 0===n?void 0:n[0])||(null===(r=e.dups)||void 0===r?void 0:r[0])||{}}),G=(n(578),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Y=Object(i.cn)("MMImage"),K=Y("Spinner"),X=Y("Origin"),Q=Y("Preview"),Z=Object(i.cn)("MMImageContainer"),J=Object(i.cn)("MMImageWrapper"),$=J("Trimmer"),ee=J("CropObjects"),te=J("CropObjects-Item"),ne=function(e){function t(t){var n=e.call(this,t)||this;n.startLoadTime=Date.now(),n.isComponentMounted=!1,n.geom={},n.fallbackImagesMap={},n.imageRef=r.createRef(),n.wrapper=r.createRef(),n.container=r.createRef(),n.onContextMenu=n.onContextMenu.bind(n),n.onPreviewLoaded=n.onPreviewLoaded.bind(n),n.onResizeThrottleHandler=Object(u.throttle)(n.onResizeHandler.bind(n),50,{delayedLastCall:!0});var o=1+(n.props.squareDiffPercent||0)/100;return n.smartFitBounds={upperBound:o,lowerBound:1/o},n.updateGeometry(t.item),n}return G(t,e),t.prototype.componentDidMount=function(){this.isComponentMounted=!0,window.addEventListener("resize",this.onResizeThrottleHandler),this.onResizeHandler()},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,window.removeEventListener("resize",this.onResizeThrottleHandler)},t.prototype.componentDidUpdate=function(e){this.props.hasTrimmer!==e.hasTrimmer&&this.onResizeHandler()},t.prototype.shouldComponentUpdate=function(e){return e.item!==this.props.item&&this.updateGeometry(e.item),!0},t.prototype.getFallbackImageUrl=function(){var e=this.props,t=e.item,n=e.fallbackOnPreview;if(this.fallbackImagesMap[t.id])return this.fallbackImagesMap[t.id];var r=n?t.preview[0].url:t.thumb.url;return this.fallbackImagesMap[t.id]=r,r},t.prototype.render=function(){var e,t,n,o,i=this.props,a=i.item,s=i.hasTrimmer,c=i.onPreviewSave,u=W(a),l=!a.loadedImage,d=a.loadedImage&&a.loadedImage.data,p=this.geom,f=u&&u.url,h=(null===d||void 0===d?void 0:d.url)||this.getFallbackImageUrl(),v=null===d||void 0===d?void 0:d.origin,g=this.imageRef.current;g&&(!d||d.noncachable?g.style.width=!p.smartFit&&p.width?p.width+"px":"":o=this.onPreviewLoaded,(null===(e=this.shownData)||void 0===e?void 0:e.id)!==a.id&&(g.src=a.thumb.url),g.style.maxHeight=p.maxHeight?p.maxHeight+"px":"");var b=h;if(!l){var y=q&&this.getCurrentImageOriginUrl();y&&(b=y)}var O=a.fresh;return this.handleImageShow(a,d),r.createElement("div",{className:J({hasTrimmer:s}),ref:this.wrapper},O?r.createElement("div",{className:J("FreshBadge")},O):null,r.createElement("div",{className:Z({fit:p.smartFit,hasTrimmer:s}),ref:this.container},s&&r.createElement(F,{className:$,cropObjectsWrapperClassName:ee,cropObjectsClassName:te,onTrimmerStart:this.props.onTrimmerStart,onTrimmerChange:this.props.onTrimmerChange,imageHref:f,imageId:a.rimid}),Boolean(p.maxHeight)&&r.createElement("img",{className:Q,src:h,onContextMenuCapture:!(v&&v.url)&&c||void 0,ref:this.imageRef,onClick:this.props.onClick,onLoad:o}),a.thumb.commercialCrop&&(null===(n=(t=this.props).commercialCropRenderer)||void 0===n?void 0:n.call(t,a.thumb.commercialCrop))),l&&r.createElement(m,{className:K}),r.createElement("img",{className:X,onContextMenuCapture:this.onContextMenu,src:b||h,onClick:this.props.onClick}))},t.prototype.onPreviewLoaded=function(){var e=this.imageRef.current;e&&(e.style.height="",e.style.width="")},t.prototype.onResizeHandler=function(){this.isComponentMounted&&this.updateGeometry(this.props.item)&&this.forceUpdate()},t.prototype.updateGeometry=function(e){var t=this.geom,n=t.smartFit,r=t.maxHeight,o=t.width,i=this.getGeometryParams(W(e)),a=i.smartFit,s=i.maxHeight,c=i.width;return(n!==a||r!==s||o!==c||!this.getCurrentLoadedThumb()&&this.geom.height!==i.height)&&(this.geom=i,!0)},t.prototype.getDimensionsRatio=function(e,t){return e.w/e.h/(t.w/t.h)},t.prototype.isImageCloseToViewport=function(e,t,n){return!(e.w<t.w||e.h<t.h)&&(n>=this.smartFitBounds.lowerBound&&n<=this.smartFitBounds.upperBound)},t.prototype.shouldUseSmartFit=function(e,t,n){return z&&this.isImageCloseToViewport(e,t,n)},t.prototype.getGeometryParams=function(e){var t=this.wrapper.current;if(!this.isComponentMounted)return{width:e.w,height:"100%",maxHeight:"100%",smartFit:!1};if(!t||!e)return{};var n={w:t&&t.clientWidth||0,h:t&&t.clientHeight||0},r={w:e.w||1,h:e.h||1},o=!1,i=this.getDimensionsRatio(n,e);this.props.squareDiffPercent&&(o=this.shouldUseSmartFit(e,n,i));var a=r.h||1;!o&&i<1&&n.h<e.h&&(a=i*n.h);var s=n.h;return{width:s>a?r.w:r.w/a*s,height:a,smartFit:o,maxHeight:n.h}},t.prototype.getOriginUrlFromItem=function(e){return e&&e.origin&&e.origin.url},t.prototype.onContextMenu=function(e){var t=e.target,n=this.getCurrentImageOriginUrl();t&&n&&t.setAttribute("src",n),this.props.onPreviewSave&&this.props.onPreviewSave()},t.prototype.handleImageShow=function(e,t){this.shownData!==e&&(this.startLoadTime=Date.now(),this.shownData=e,this.shownImage=void 0),t&&this.shownImage!==t&&(this.shownImage=t,this.onOriginShow(t))},t.prototype.getCurrentLoadedThumb=function(){var e=this.props.item.loadedImage;return e&&e.data||void 0},t.prototype.getCurrentImageOriginUrl=function(){if(this.props.item.extraOrigin)return this.props.item.extraOrigin.url;var e=this.getOriginUrlFromItem(this.getCurrentLoadedThumb());if(!e){var t=this.props.item;e=this.getOriginUrlFromItem(t.preview&&t.preview[0])||this.getOriginUrlFromItem(t.dups&&t.dups[0])}return e},t.prototype.onOriginShow=function(e){var t,n=this,r=this.props.item,o=Number(r.pos||0);this.shownImage=this.getCurrentLoadedThumb(),e&&(t={url:e.url,w:String(e.w),h:String(e.h),loadTime:Number(e.loadTime),usertime:String(Date.now()-this.startLoadTime),isMixedImage:Boolean(e.isMixedImage),isRim:r.isRim,rimid:r.rimid,rim_index:r.pos,origin:e.origin}),setTimeout(function(){n.props.onPreviewShow&&t&&n.props.onPreviewShow(o,t),n.props.onShow&&t&&n.props.onShow(o,t)},0)},t}(r.Component);var re,oe=n(59),ie=n(7),ae=n(28),se=(n(586),n(679)),ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=g()(se),le=Object(i.cn)("TrimmerControls"),de=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.onPointerOver=n.onPointerOver.bind(n),n.onSearchClick=n.onSearchClick.bind(n),n}return ce(t,e),t.prototype.render=function(){var e=this.getCrop(),t=this.getImageUrl(this.props.imageUrl);return r.createElement("div",{className:le(),onMouseOver:this.onPointerOver},r.createElement("div",{className:le("Label")},ue("Укажите выше область для поиска по картинке",{context:"Инструмент выбора области картинки для дальнейшего поиска по ней"})),r.createElement("div",{className:le("Cancel"),onClick:this.props.onClose},r.createElement("span",{className:le("CancelText")},ue("Отменить",{context:'Кнопка "Отменить"'}))),Boolean(e)&&t&&r.createElement("a",{className:le("Search"),target:this.getTarget(),onClick:this.onSearchClick,href:this.getSearchUrl(e,t)},ue("Искать",{context:'Кнопка "Искать"'})))},t.prototype.getTarget=function(){return this.props.target||"_blank"},t.prototype.onPointerOver=function(){this.forceUpdate()},t.prototype.onSearchClick=function(e){if(this.props.onSearchClick){var t=this.getCrop(),n=this.getImageUrl(this.props.imageUrl);this.props.onSearchClick(e,t,n)}},t.prototype.getImageUrl=function(e){return"/"===e[0]?location.protocol+e:e},t.prototype.getSearchUrl=function(e,t){if(!t)return"";var n={rpt:"imageview",cbir_page:"similar",url:t,crop:e};return Object(ae.appendQueryString)(this.props.imagesCbirSearchUrl,n)},t.prototype.getCrop=function(){var e=this.props.trimmerArea;return e?e.point1.x+";"+e.point1.y+";"+e.point2.x+";"+e.point2.y:""},t}(r.Component),pe=Object(S.compose)(Object(_.d)(function(e){var t,n=Object(ie.j)(e);return{imagesCbirSearchUrl:e.config.imagesCbirSearchUrl,trimmerArea:e.trimmerArea,imageUrl:n&&(null===(t=W(n))||void 0===t?void 0:t.url)}}),Object(oe.a)(["imageUrl","trimmerArea"]))(de),fe=n(23),he=n(436),me=(n(585),g()(he)),ve=Object(v.i18nRaw)(he),ge=Object(i.cn)("MMViewMessage"),be=function(e){var t=e.onClick,n=e.redirUrl,o=e.type;return r.createElement("span",null,ve("Не удалось загрузить картинку, возможно, она есть на {link}",{context:"https://nda.ya.ru/3UYjnC",link:r.createElement("a",{className:ge("ErrorMessage"),href:n,rel:"noopener",target:"_blank",onClick:t,key:o},"service"===o?me("сервисе Яндекс.Картинки",{context:"https://nda.ya.ru/3UYjnC"}):me("сайте",{context:"https://nda.ya.ru/3UYjnK"}))}),".")},ye=n(365),Oe=n(10),we=n(102),Ce=n(158),Ee=n(374),je=n(383),Se=n(52),_e=(n(573),Object(S.withBemMod)(Object(Se.a)(),{type:"next"})),ke=(n(572),Object(S.withBemMod)(Object(Se.a)(),{type:"prev"})),Ie=(n(571),n(311)),Pe=function(){return(Pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xe=g()(Ie),Me=Object(S.withBemMod)(Object(Se.a)(),{type:"fullscreen"},function(e){return function(t){return r.createElement(e,Pe({},t,{title:xe("Открыть в полноэкранном режиме",{context:"Кнопка открытия полноэкранного режима в просмотрщике картинок"})}),t.children)}}),Ne=(n(574),function(){return(Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),Re=g()(Ie),Te=Object(S.withBemMod)(Object(Se.a)(),{type:"cbircrop"},function(e){return function(t){return r.createElement(e,Ne({},t,{title:Re("Поиск по фрагменту картинки",{context:"Кнопка открытия режима поиска по фрагменту картинки в просмотрщике картинок"})}),t.children)}}),De=n(373),Le=n(239),Ae=(n(569),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Be=function(){return(Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Fe=Object(S.compose)(je.a,Object(S.composeU)(Me,ke,_e,Te),De.a)(Ee.a);!function(e){e.imageClick="imageClick",e.imageShow="imageShow",e.imageError="imageError",e.nextItem="nextItem",e.prevItem="prevItem",e.setItem="setItem",e.close="close",e.paranjaClick="paranjaClick",e.fullscreenEnter="fullscreenEnter",e.fullscreenExit="fullscreenExit",e.fullscreenTitleClick="fullscreenTitleClick",e.fullscreenDomainClick="fullscreenDomainClick",e.fullscreenStartAutoplay="fullscreenStartAutoplay",e.fullscreenStopAutoplay="fullscreenStopAutoplay",e.previewSave="previewSave",e.previewShow="previewShow"}(re||(re={}));var Ue=function(e){function t(n){var r=e.call(this,n)||this;return r.isFullscreenMode=!1,r.onViewErrorHandler=r.onViewErrorHandler.bind(r),r.genClass=r.genClass.bind(r),r.onFullscreenClick=r.onFullscreenClick.bind(r),r.onFullscreenExit=r.onFullscreenExit.bind(r),r.onFullscreenTitleClick=r.onFullscreenTitleClick.bind(r),r.onFullscreenDomainClick=r.onFullscreenDomainClick.bind(r),r.onFullscreenStartAutoplay=r.onFullscreenStartAutoplay.bind(r),r.onPreviewSave=r.onPreviewSave.bind(r),r.onPreviewShow=r.onPreviewShow.bind(r),r.onSceneClick=r.onSceneClick.bind(r),r.onItemClick=r.onItemClick.bind(r),r.onItemShow=r.onItemShow.bind(r),r.onFullscreenStopAutoplay=r.onFullscreenStopAutoplay.bind(r),r.switchNext=r.genItemSwitcher(1),r.switchPrev=r.genItemSwitcher(-1),r.onKeyDownHandler=Object(u.throttle)(r.onKeyDownHandler.bind(r),100),r.onKeyUpHandler=Object(u.throttle)(r.onKeyUpHandler.bind(r),100),r.onSceneMouseMove=r.onSceneMouseMove.bind(r),r.onMouseMove=Object(u.throttle)(r.onMouseMove.bind(r),100,{delayedLastCall:!0}),r.getScrollContainer=r.getScrollContainer.bind(r),r.nodes={},r.state=Be({hoveredArrow:"",viewHeightStyle:"100%",viewWidthStyle:"100%"},t.getStateForNewItem(n.items,n.initialIdx||0,n.showItem)),r}return Ae(t,e),t.prototype.componentDidMount=function(){this.componentIsMounted=!0,window.addEventListener("keydown",this.onKeyDownHandler),window.addEventListener("keyup",this.onKeyUpHandler),this.trigger(re.setItem,this.state.currentIdx)},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1,window.removeEventListener("keydown",this.onKeyDownHandler),window.removeEventListener("keyup",this.onKeyUpHandler)},t.prototype.componentDidUpdate=function(e,n){var r=this.props.items,o=e.items;this.state.shownItem!==n.shownItem||this.state.currentIdx===n.currentIdx&&r.length===o.length&&r[this.state.currentIdx]===o[n.currentIdx]&&this.props.showItem===e.showItem||this.setState(t.getStateForNewItem(this.props.items,this.state.currentIdx,this.props.showItem))},t.prototype.render=function(){var e=this.state,t=this.props.theme,n=this.props,o=n.layout,i=n.className;return r.createElement("div",{className:Object(Le.a)({theme:t},[i]),ref:this.saveRef("self")},r.createElement("div",{className:this.genClass("LayoutContainer"),ref:this.saveRef("container")},o&&o.leftSideblock&&r.createElement("div",{className:this.genClass("LayoutLeftSideblock"),ref:this.saveRef("leftSideblock")},o.leftSideblock),r.createElement("div",{className:this.genClass("LayoutMain"),style:{width:e.viewWidthStyle}},this.renderScene(),o&&o.footer&&r.createElement("div",{className:this.genClass("LayoutFooter"),ref:this.saveRef("footer")},this.props.layout&&this.props.layout.footer)),o&&o.sideblock&&r.createElement("div",{className:this.genClass("LayoutSideblock"),ref:this.saveRef("sideblock")},o.sideblock)))},t.prototype.getView=function(){return this.nodes.view},t.prototype.getScrollContainer=function(){return this.nodes.container},t.prototype.switchToItem=function(e){var n=this,r=t.getStateForNewItem(this.props.items,e,this.props.showItem);this.props.items[e]&&this.setState(r,function(){n.trigger(re.setItem,r.currentIdx)})},t.prototype.renderScene=function(){var e=this,t=this.state,n=this.props,o=n.buttons,i=void 0===o?{}:o,a=n.verticalButtons;i.Fullscreen&&(i.Fullscreen.clickHandler=this.onFullscreenClick);var s=Object.keys(i).map(function(e){return Object.assign({},i[e],{type:i[e].type||e})});return!i.Fullscreen&&this.props.hasFullscreen&&s.unshift({type:"fullscreen",clickHandler:this.onFullscreenClick}),r.createElement(Ce.a,{className:this.genClass("LayoutScene"),forwardRef:this.saveRef("scene"),onClick:this.props.onSceneViewClick||(this.props.hasTrimmer?void 0:this.onSceneClick),logNode:{name:"preview",events:{onClick:Object(l.logClick)(function(){return{action:e.state.hoveredArrow}})}},onMouseMove:this.onSceneMouseMove},r.createElement(Fe,{className:this.genClass(["Button","ButtonPrev"],[{hovered:"prev"===this.state.hoveredArrow},{verticalButtons:a}]),logNode:{name:"arrow-left",events:{onClick:Object(l.logClick)()}},disabled:t.isFirst,onClick:this.switchPrev,type:"prev"}),Boolean(s.length)&&r.createElement("div",{className:this.genClass("LayoutSceneControls")},s.map(function(t,n){return t.content||r.createElement(Fe,{key:n,type:t.type,title:t.title,className:e.genClass(["Button","Button"+t.type],{active:t.active}),onClick:t.clickHandler,initVisibility:t.initVisibility,disabled:t.disabled,active:t.active,logNode:{name:t.type,events:{onClick:Object(l.logClick)()}},withTooltip:!0})})),r.createElement("div",{className:this.genClass("View"),ref:this.saveRef("view"),style:{width:t.viewWidthStyle,height:t.viewHeightStyle,lineHeight:t.viewHeightStyle}},this.props.itemRenderer(this.state.shownItem,{switchNext:this.switchNext,switchPrev:this.switchPrev,onShow:this.onItemShow,onError:this.onViewErrorHandler,hasFullscreen:this.props.hasFullscreen,onFullscreenExit:this.onFullscreenExit,onFullscreenTitleClick:this.onFullscreenTitleClick,onFullscreenDomainClick:this.onFullscreenDomainClick,onFullscreenStartAutoplay:this.onFullscreenStartAutoplay,onFullscreenStopAutoplay:this.onFullscreenStopAutoplay,onPreviewSave:this.onPreviewSave,onPreviewShow:this.onPreviewShow,hasTrimmer:this.props.hasTrimmer,fallbackOnPreview:this.props.fallbackOnPreview,imageRef:this.props.imageRef})),r.createElement(Fe,{className:this.genClass(["Button","ButtonNext"],[{hovered:"next"===this.state.hoveredArrow},{verticalButtons:a}]),logNode:{name:"arrow-right",events:{onClick:Object(l.logClick)()}},disabled:t.isLast,onClick:this.switchNext,type:"next"}),this.props.viewMessage&&r.createElement("div",{className:this.genClass("ViewMessage")},this.props.viewMessage))},t.prototype.onItemShow=function(e,t){this.trigger(re.imageShow,e,t)},t.prototype.onItemClick=function(e){this.trigger(re.imageClick,e)},t.prototype.onSceneClick=function(e){"prev"===this.state.hoveredArrow?this.switchPrev(e,"",this.onItemClick):this.switchNext(e,"",this.onItemClick)},t.prototype.saveRef=function(e){var t=this;return function(n){return t.nodes[e]=n}},t.prototype.genClass=function(e,t){var n=this.props.theme||"fiji",r=Object(i.cn)(Object(Le.a)()+"_theme_"+n),o=Array.isArray(t)?t:[t];return(Array.isArray(e)?e:[e]).map(function(e,t){return Object(Le.a)(e,o[t],[r(e)])}).join(" ")},t.prototype.trigger=function(e,t,n,r){var o=this.props.on,i=o&&o[e];i&&i(void 0!==t?t:this.state.currentIdx,n,r)},t.prototype.genItemSwitcher=function(e){var n=this;return void 0===e&&(e=1),function(r,o,i){r&&r.stopPropagation();for(var a=n.state.currentIdx,s=n.props.items,c=a+e;!s[c]&&c>=0&&c<s.length;c+=e);if(s[c]){var u=t.getStateForNewItem(n.props.items,c,n.props.showItem);n.setState(u,function(){i&&i(u.currentIdx),n.trigger(e>0?re.nextItem:re.prevItem,u.currentIdx,null,o),n.trigger(re.setItem,u.currentIdx)})}}},t.prototype.onFullscreenClick=function(e){!function(e){C&&e&&C.request(e)}(this.nodes.view),this.isFullscreenMode=!0,this.trigger(re.fullscreenEnter),e.stopPropagation()},t.prototype.onFullscreenExit=function(){this.isFullscreenMode=!1,this.trigger(re.fullscreenExit)},t.prototype.onFullscreenTitleClick=function(){this.trigger(re.fullscreenTitleClick)},t.prototype.onFullscreenDomainClick=function(){this.trigger(re.fullscreenDomainClick)},t.prototype.onFullscreenStartAutoplay=function(){this.trigger(re.fullscreenStartAutoplay)},t.prototype.onPreviewSave=function(){this.trigger(re.previewSave,this.state.currentIdx)},t.prototype.onPreviewShow=function(e,t){this.trigger(re.previewShow,e||this.state.currentIdx,t)},t.prototype.onFullscreenStopAutoplay=function(){this.trigger(re.fullscreenStopAutoplay)},t.prototype.onViewErrorHandler=function(e){this.trigger(re.imageError)},t.prototype.onSceneMouseMove=function(e){this.onMouseMove(e.clientX,e.clientY)},t.prototype.onMouseMove=function(e,t){if(this.nodes.scene&&this.componentIsMounted){var n=this.props,r=n.prevArrowSize,o=n.verticalAreas,i="number"===typeof r?r:.3,a=this.nodes.scene.getBoundingClientRect(),s=o?a.top:a.left,c=(o?a.bottom:a.right)-s,u=((o?t:e)-s)/c<=i?"prev":"next";this.state.hoveredArrow!==u&&this.setState({hoveredArrow:u})}},t.prototype.onKeyDownHandler=function(e){var t=this.props.verticalGallery;if(!this.shouldPreventKeyHandler(e))switch(e.keyCode){case 8:case 27:this.isFullscreenMode||this.trigger(re.close);break;case 32:e.preventDefault(),this.switchNext(null,"keyboard");break;case 40:t&&this.switchNext(null,"keyboard");break;case 39:this.switchNext(null,"keyboard");break;case 38:t&&this.switchPrev(null,"keyboard");break;case 37:this.switchPrev(null,"keyboard")}},t.prototype.onKeyUpHandler=function(e){this.shouldPreventKeyHandler(e)||32===e.keyCode&&e.preventDefault()},t.prototype.shouldPreventKeyHandler=function(e){var t=e.target.nodeName;return!this.componentIsMounted||"TEXTAREA"===t||"INPUT"===t},t.getStateForNewItem=function(e,t,n){var r=0===e.length,o=e.length-1,i=t;i<0?i=0:i>o&&(i=o);var a=r?void 0:e[i];return{currentIdx:i,isFirst:0===i||r,isLast:i===o||r,shownItem:n||a}},t}(r.Component),He=n(340),ze=n(13),qe=n(8),We=(n(567),n(49)),Ge=function(){return(Ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ve(e){var t=e.path,n=e.params,r=e.reqid;return Ge({dtype:"iweb",path:"/image/new/preview/"+t,reqid:r},n)}n(568);var Ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(){return(Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xe=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Qe=s.a,Ze=700,Je=Object(i.cn)("ImagesViewerApp"),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ye(t,e),t}(Ue),et=function(e){function t(t){var n=e.call(this,t)||this;return n.isFullscreenMode=!1,n.eventsEnabled=!1,n.viewer=o.a.createRef(),n.directStripe=o.a.createRef(),n.behavioralDirectRef=o.a.createRef(),n.gallery=o.a.createRef(),n.sidebarNode=o.a.createRef(),n.leftSidebarNode=o.a.createRef(),n.wasMounted=!1,n.scrollCollector=0,n.galleryItemsLoadEventOffset=1200,n.directAutoUpdateTimeout=1e4,n.logTechCounter=n.logTechCounter.bind(n),n.onCbirCropEvent=n.onCbirCropEvent.bind(n),n.onCbirCropSearchEvent=n.onCbirCropSearchEvent.bind(n),n.onNewItemSelected=n.onNewItemSelected.bind(n),n.onRelatedItemClick=n.onRelatedItemClick.bind(n),n.onDirectStripeClick=n.onDirectStripeClick.bind(n),n.onDirectStripeShow=n.onDirectStripeShow.bind(n),n.onDirectStripeHide=n.onDirectStripeHide.bind(n),n.onGalleryClick=n.onGalleryClick.bind(n),n.onScrollSwitch=n.onScrollSwitch.bind(n),n.onGalleryScrollCounter=Object(u.throttle)(n.onGalleryScrollCounter.bind(n),Ze),n.onGalleryScroll=Object(u.throttle)(n.onGalleryScroll.bind(n),50,{delayedLastCall:!0}),n.onPreviewShowEvent=n.onPreviewShowEvent.bind(n),n.sendNextCounter=n.sendNextCounter.bind(n),n.sendPrevCounter=n.sendPrevCounter.bind(n),n.previewSave=n.previewSave.bind(n),n.onOpenItem=n.onOpenItem.bind(n),n.hitFullscreenCounter=n.hitFullscreenCounter.bind(n),n.hitSlideshowCounter=n.hitSlideshowCounter.bind(n),n.hitTrimmerCounter=n.hitTrimmerCounter.bind(n),n.onFullscreenEnter=n.onFullscreenEnter.bind(n),n.onFullscreenExit=n.onFullscreenExit.bind(n),n.onFullscreenTitleClick=n.onFullscreenTitleClick.bind(n),n.onFullscreenDomainClick=n.onFullscreenDomainClick.bind(n),n.onFullscreenStartAutoplay=n.onFullscreenStartAutoplay.bind(n),n.onFullscreenStopAutoplay=n.onFullscreenStopAutoplay.bind(n),n.onTrimmerStart=n.onTrimmerStart.bind(n),n.onTrimmerChange=n.onTrimmerChange.bind(n),n.onCloseEventKeyboard=n.onCloseEventKeyboard.bind(n),n.onWheel=n.onWheel.bind(n),n.onCloseEventParanja=n.onCloseEvent.bind(n,"paranja"),n.onCloseEventMouse=n.onCloseEvent.bind(n,"mouse"),n.onCloseEventHistory=n.onCloseEvent.bind(n,"history"),n.onCloseEvent=n.onCloseEvent.bind(n),n.tryUpdateDirect=Object(u.throttle)(n.tryUpdateDirect.bind(n),n.directAutoUpdateTimeout),n.onGlobalDragStart=n.onGlobalDragStart.bind(n),n.onGlobalDragEnd=n.onGlobalDragEnd.bind(n),n.onTagClick=n.onTagClick.bind(n),n.onImageClick=n.onImageClick.bind(n),n.loginUrl="https://passport.yandex."+t.tld+"/auth?retpath=https%3A%2F%2Fyandex.ru%2Fcollections%2Ffavorites%2F&origin=images_collections",n.imageRenderer=function(e){return function(t,n){if(!t)return null;var o=t.loadedImage,i=Object(U.a)(t),a=Boolean(o);return r.createElement(r.Fragment,null,r.createElement(ne,V({item:t,ref:n.imageRef},n,e)),n.hasFullscreen&&r.createElement(j,{isLoaded:a,title:i.title,domain:i.domain,url:i.redirUrl||i.url,nextItemHandler:n.switchNext,prevItemHandler:n.switchPrev,onExit:n.onFullscreenExit,onTitleClick:n.onFullscreenTitleClick,onDomainClick:n.onFullscreenDomainClick,onStartAutoplay:n.onFullscreenStartAutoplay,onStopAutoplay:n.onFullscreenStopAutoplay}))}}(n.getImageRendererOptions()),n.state={isVisible:null!=t.currentItemIdx&&t.currentItemIdx>=0,activeItemIdx:t.currentItemIdx||-1,initialIdx:t.currentItemIdx||void 0,showCbirCrop:!1,globalDragging:!1,loggedIn:t.config.loggedIn},n.handlers={setItem:n.onNewItemSelected,close:n.onCloseEvent,nextItem:n.sendNextCounter,prevItem:n.sendPrevCounter,imageClick:n.onImageClick,imageShow:function(e,t){if(n.state.isVisible){Object(qe.a)().emit(We.a.imageShow);var r=n.getActiveItemParams(),o=r.preview[0],i=r.imgHref||"",a={"-pos":r.pos,"-width":o&&o.w||0,"-height":o&&o.h||0,"-time":Number(t&&t.loadTime),"-usertime":Number(t&&t.usertime)};if(t&&t.isRim&&(a["-rim_id"]=t.rimid,a["-rim_index"]=t.rim_index,t.origin&&(a["-width"]=t.origin.w,a["-height"]=t.origin.h)),t&&t.isMixedImage&&t.origin){var s=t.url.match(/id=([^&]+)/);i=t.origin.url,s&&(a["-id"]=s[1]),a["-origin_w"]=t.origin.w,a["-origin_h"]=t.origin.h}var c=n.viewer.current&&n.viewer.current.getView();c&&(a["-viewport_w"]=c.clientWidth,a["-viewport_h"]=c.clientHeight),n.logTechCounter({method:"hitDelayed",__oldCounter__:Ve({path:"image/show",params:{vars:a},reqid:r.reqid||""}),node:{href:i}})}},imageError:ze.a,fullscreenEnter:n.onFullscreenEnter,fullscreenExit:n.onFullscreenExit,fullscreenTitleClick:n.onFullscreenTitleClick,fullscreenDomainClick:n.onFullscreenDomainClick,fullscreenStartAutoplay:n.onFullscreenStartAutoplay,fullscreenStopAutoplay:n.onFullscreenStopAutoplay,previewSave:n.previewSave,previewShow:ze.a},n}return Ye(t,e),t.prototype.componentDidMount=function(){if(this.wasMounted=!0,Object(qe.a)().on("i-keyrouter:esc",this.onCloseEventKeyboard).on(We.a.open,this.onOpenItem).on(We.a.close,this.onCloseEventHistory),this.state.isVisible){if(this.enableEventListeners(),this.triggerBeforeOpenedEvent(),null!=this.props.currentItemIdx&&this.props.currentItemIdx>-1){this.logOpenCounter(this.props.currentItemIdx);var e=this.getItemParamsByIdx(this.props.currentItemIdx);this.triggerSelectItemEvent(e,{openedFromSerp:!1,initialLoading:!0,historyLoading:!1})}this.triggerOpenedEvent()}},t.prototype.componentWillUnmount=function(){this.wasMounted=!1,Object(qe.a)().off("i-keyrouter:esc",this.onCloseEventKeyboard).off(We.a.open,this.onOpenItem).off(We.a.close,this.onCloseEventHistory),this.disableEventListeners()},t.prototype.componentDidUpdate=function(e,t){var n=t.activeItemIdx!==this.state.activeItemIdx,r=this.props.rimSelectedIdx!==e.rimSelectedIdx;this.state.isVisible?(this.enableEventListeners(),(n||r)&&this.tryUpdateDirect()):this.disableEventListeners()},t.prototype.render=function(){var e,t=this.props,n=t.items,r=t.experiments,i=void 0===r?{}:r;return o.a.createElement(ye.a,{className:Object(we.a)({mode:this.state.globalDragging?"dragging":void 0},[Object(d.a)(p.a)]),isVisible:this.state.isVisible,zIndex:this.state.isVisible?400:3,zIndexGroupLevel:10,onCloseClick:this.onCloseEventMouse,onParanjaClick:this.onCloseEventParanja,isSSREnabled:!0},this.state.isVisible&&o.a.createElement($e,{theme:"fiji",className:Object(we.a)("Container",this.getContainerMods()),ref:this.viewer,initialIdx:this.state.initialIdx||0,items:n,showItem:this.props.shownImage&&this.props.shownImage.isRim?this.props.shownImage:void 0,on:this.handlers,layout:{leftSideblock:this.renderLeftSidebar(),sideblock:this.renderSidebar(),footer:this.renderFooter()},itemRenderer:this.imageRenderer,buttons:this.getButtons(),verticalGallery:Boolean(i.verticalGallery),verticalButtons:Boolean(i.verticalButtons),verticalAreas:Boolean(i.verticalAreas),hasFullscreen:this.isFullscreenAvailable(),onSceneViewClick:this.getSceneViewClickHandler(),hasTrimmer:this.state.showCbirCrop,viewMessage:this.renderError(),fallbackOnPreview:Boolean(null===(e=this.props.experiments)||void 0===e?void 0:e.imagesViewerFallbackOnPreview)&&!this.wasMounted}))},t.prototype.getContainerMods=function(){var e;return{mode:this.state.showCbirCrop?"CbirCrop":void 0,sideblock:this.props.stretchSideblock?"stretch":void 0,ssr:null===(e=this.props.experiments)||void 0===e?void 0:e.imagesViewerSSR}},t.prototype.getButtons=function(){return{CbirCrop:{type:"cbircrop",clickHandler:this.onCbirCropEvent}}},t.prototype.getSceneViewClickHandler=function(){},t.prototype.getImageRendererOptions=function(){return{onTrimmerStart:this.onTrimmerStart,onTrimmerChange:this.onTrimmerChange}},t.prototype.isFullscreenAvailable=function(){return this.wasMounted&&Qe&&Qe.isEnabled},t.prototype.onImageClick=function(e,t){var n=this.getItemParamsByIdx(e),r=n.imgHref||"";t&&t.isMixedImage&&t.origin&&(r=t.origin.url),this.logTechCounter({method:"hitDelayed",__oldCounter__:Ve({path:"imgclick",params:{vars:{"-pos":n.pos,"-direction":this.state.activeItemIdx-e<0?"next":"prev"}},reqid:n.reqid||""}),node:{href:r}})},t.prototype.logOpenCounter=function(e){var t=this.getItemParamsByIdx(e),n=t.pos,r=t.reqid;this.logTechCounter({method:"hitDelayed",__oldCounter__:Ve({path:"open",params:{vars:{"-pos":n}},reqid:r||""})})},t.prototype.open=function(e){var t=this;this.triggerBeforeOpenedEvent(),this.props.setCurrentItemIdx(e),this.setState({initialIdx:e,activeItemIdx:e,isVisible:!0},function(){t.viewer.current&&t.viewer.current.switchToItem(e)}),this.logOpenCounter(e),this.triggerOpenedEvent()},t.prototype.renderError=function(){var e=this.props.shownImage,t=e&&e.loadedImage&&!e.loadedImage.data;if(e&&t)return o.a.createElement(be,{type:e.snippet.gotoService?"service":"site",redirUrl:e.snippet.redirUrl})},t.prototype.enableEventListeners=function(){this.eventsEnabled||(document.body.addEventListener("dragstart",this.onGlobalDragStart),document.body.addEventListener("dragend",this.onGlobalDragEnd),document.body.addEventListener("wheel",this.onWheel),this.eventsEnabled=!0)},t.prototype.disableEventListeners=function(){this.eventsEnabled&&(document.body.removeEventListener("dragstart",this.onGlobalDragStart),document.body.removeEventListener("dragend",this.onGlobalDragEnd),document.body.removeEventListener("wheel",this.onWheel),this.eventsEnabled=!1)},t.prototype.triggerOpenedEvent=function(){Object(qe.a)().emit(We.a.opened)},t.prototype.triggerBeforeOpenedEvent=function(){Object(qe.a)().emit(We.a.beforeOpened)},t.prototype.renderSidebar=function(){var e=this,t=this.props,n=t.counters,r=t.reqid,i=n.sidebarScrollShow,a=n.sidebarScrollStart,s=n.sidebarScrollEnd,u=this.getActiveItemParams(),d={"-col":u.col,"-row":u.row};void 0===u.page||isNaN(u.page)||(d["-page"]=u.page);var p={"-reqid":r};return u&&(p["-pos"]=u.pos),o.a.createElement(c.ComponentRegistryConsumer,{id:Object(we.a)()},function(t){var n=t.MMSidebar;return o.a.createElement(n,{isVisible:e.state.isVisible,addToCollectionsLoginUrl:e.loginUrl,logNode:{events:{onScrollShow:Object(l.logTech)("scroll-show",Object(fe.b)(i,p)),onScrollStart:Object(l.logTech)("scroll-start",Object(fe.b)(a,p)),onScrollToBottom:Object(l.logTech)("scroll-end",Object(fe.b)(s,p))}},nodeRef:e.sidebarNode,behavioralDirectRef:e.behavioralDirectRef,onTagClick:e.onTagClick,onRelatedItemClick:e.onRelatedItemClick,onLog:e.logTechCounter})})},t.prototype.tryUpdateDirect=function(){this.directStripe.current&&this.directStripe.current.renderDirect(),this.behavioralDirectRef.current&&this.behavioralDirectRef.current.renderDirect()},t.prototype.shouldShowBehaviouralDirectStripe=function(){var e=this.props.directStripeEnabled,t=this.props.config.directStripeParams;return Boolean(e&&t)},t.prototype.onTagClick=function(e,t){2===e.which||e.metaKey||e.ctrlKey||(e.preventDefault(),Object(qe.a)().emit("location:change",{url:t}))},t.prototype.getDirectContainerId=function(){var e=this.props.config.directStripeParams;if(null===e||void 0===e?void 0:e.containerId)return null===e||void 0===e?void 0:e.containerId},t.prototype.getDirectStripeId=function(){var e=this.props.config.directStripeParams;return e?this.props.isPornoQuery?e.directIdAdult||"":e.directId:""},t.prototype.renderFooter=function(){var e=this.state.showCbirCrop;return o.a.createElement(o.a.Fragment,null,e&&o.a.createElement(pe,{onClose:this.onCbirCropEvent,onSearchClick:this.onCbirCropSearchEvent,target:"_self"}),o.a.createElement("div",{className:Je("FooterContent",{hidden:e})},this.renderFooterContent()))},t.prototype.renderFooterContent=function(){var e=this,t=this.props,n=t.config,r=t.experiments,i=void 0===r?{}:r,a=n.directStripeParams,s=this.getActiveItemParams(),u=this.shouldShowBehaviouralDirectStripe(),l=a&&a.mod,d=this.getDirectStripeId(),p=this.getDirectContainerId();return o.a.createElement(o.a.Fragment,null,u&&d&&o.a.createElement("div",{className:Je("DirectStripeContainer",{mod:l,verticalGallery:i.verticalGallery})},o.a.createElement(He.a,{directId:d,yandexuid:this.props.yandexuid,text:this.props.query,onClick:this.onDirectStripeClick,onRender:this.onDirectStripeShow,onHide:this.onDirectStripeHide,reqid:s.reqid||"",className:Je("DirectStripe",{mod:l}),forwardRef:this.directStripe,getUniqId:p?function(e){return function(){return e}}(p):void 0})),o.a.createElement(c.ComponentRegistryConsumer,{id:Object(we.a)()},function(t){var n=t.Gallery;return i.noBottomGallery?null:o.a.createElement(n,{forwardRef:e.gallery,selectedIdx:e.state.activeItemIdx,onClick:e.onGalleryClick,onScroll:e.onGalleryScroll,items:e.props.items})}))},t.prototype.renderLeftSidebar=function(){var e=this,t=this.props.experiments,n=void 0===t?{}:t;if(n.verticalGallery)return o.a.createElement(c.ComponentRegistryConsumer,{id:Object(we.a)()},function(t){var r=t.Gallery;return o.a.createElement(o.a.Fragment,null,n.verticalGalleryTitle&&o.a.createElement("div",{className:Je("LeftSideblockTitle")},"Картинки по запросу"),o.a.createElement("div",{className:Je("LeftSideblockContent"),ref:e.leftSidebarNode},o.a.createElement(r,{vertical:!0,forwardRef:e.gallery,selectedIdx:e.state.activeItemIdx,onClick:e.onGalleryClick,onScroll:e.onGalleryScroll,items:e.props.items})))})},t.prototype.previewSave=function(e){var t=this.getItemParamsByIdx(e);this.logTechCounter({method:"hitDelayed",__oldCounter__:Ve({path:"save",params:{vars:{"-pos":e}},reqid:t.reqid||""})})},t.prototype.onScrollSwitch=function(e){var t=this.state.activeItemIdx+e;this.viewer.current&&(e>0?this.sendNextCounter(t,null,"scroll"):this.sendPrevCounter(t,null,"scroll"),this.viewer.current.switchToItem(t))},t.prototype.onWheel=function(e){var t=this.props.experiments,n=void 0===t?{}:t,r=e.target,o=e.deltaMode,i=e.deltaX,a=e.deltaY,s=Math.abs(i)>Math.abs(a)||a?a:i;if(s&&(o>0&&(s*=16),3!==n.verticalGalleryScroll)){var c=this.gallery.current&&this.gallery.current.getNode();if(!(c&&c.current&&c.current.contains(r))){var u=this.sidebarNode.current;if(u&&!u.contains(r)){var l=this.leftSidebarNode.current;if(!l||!l.contains(r))if(this.scrollCollector+=s,2!==n.verticalGalleryScroll)if(1===n.verticalGalleryScroll){var d=this.gallery.current&&this.gallery.current.getContainerNode();if(!d||!d.current)return;d.current.scrollTop+=s}else u.scrollTop+=s;else Math.abs(this.scrollCollector)>=40&&(this.onScrollSwitch(this.scrollCollector>0?1:-1),this.scrollCollector=0)}}}},t.prototype.onOpenItem=function(e){if(!(e.activeIdx<0)){this.open(e.activeIdx);var t=this.getItemParamsByIdx(e.activeIdx);this.triggerSelectItemEvent(t,{openedFromSerp:!e.initialLoading&&!e.historyLoading,initialLoading:Boolean(e.initialLoading),historyLoading:Boolean(e.historyLoading)})}},t.prototype.onNewItemSelected=function(e){var t=this;this.props.setCurrentItemIdx(e),this.state.showCbirCrop&&this.cbirCropClose(),this.state.activeItemIdx!==e&&this.setState({activeItemIdx:e},function(){var e=t.getActiveItemParams();t.triggerSelectItemEvent(e)})},t.prototype.triggerSelectItemEvent=function(e,t){e&&Object(qe.a)().emit(We.a.selectItem,{itemParams:e,initialLoading:Boolean(t&&t.initialLoading),historyLoading:Boolean(t&&t.openedFromSerp),openedFromSerp:Boolean(t&&t.openedFromSerp)})},t.prototype.onGalleryScrollCounter=function(){Object(Oe.a)("/image/new/preview/gallery/scroll")},t.prototype.onGalleryScroll=function(){this.onGalleryScrollCounter(),this.loadNextPageIfNeeded()},t.prototype.onFullscreenEnter=function(){this.isFullscreenMode=!0,this.hitFullscreenCounter("open"),Object(qe.a)().emit(We.a.fullscreenEnter)},t.prototype.onFullscreenExit=function(){this.isFullscreenMode=!1,this.hitFullscreenCounter("close"),Object(qe.a)().emit(We.a.fullscreenExit)},t.prototype.onFullscreenTitleClick=function(){this.onFullscreenTitleDomainClick("/image/new/preview/site")},t.prototype.onFullscreenDomainClick=function(){this.onFullscreenTitleDomainClick("/image/new/preview/duplicates/url")},t.prototype.onFullscreenTitleDomainClick=function(e){var t=this.props.reqid,n=this.getActiveItemParams(),r=n.isMarketIncut,o=n.pos,i=n.commercialSource,a=n.snippet,s=r?"/commercial/"+i:"";this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",redirUrl:a.url,path:""+e+s,pos:s?o:"",vars:{"-pos":o},reqid:n.reqid||t||""},node:{href:a.redirUrl}})},t.prototype.onFullscreenStartAutoplay=function(){this.hitSlideshowCounter("play")},t.prototype.onFullscreenStopAutoplay=function(){this.hitSlideshowCounter("stop")},t.prototype.onGlobalDragStart=function(e){var t=e.target;t&&("IMG"===t.tagName||t.firstElementChild&&"IMG"===t.firstElementChild.tagName)?this.setState({globalDragging:!0}):(e.stopPropagation(),e.preventDefault())},t.prototype.onGlobalDragEnd=function(){this.setState({globalDragging:!1})},t.prototype.onTrimmerStart=function(e){this.hitTrimmerCounter("",{},{href:e})},t.prototype.onTrimmerChange=function(e,t,n){var r={"-crop":encodeURIComponent([e.point1.x,e.point1.y,e.point2.x,e.point2.y].join(";"))};this.hitTrimmerCounter(t,r,{href:n})},t.prototype.hitFullscreenCounter=function(e){var t=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/fullscreen/"+e,reqid:t.reqid||""}})},t.prototype.hitSlideshowCounter=function(e){var t=this.getActiveItemParams(),n={};t&&(n["-pos"]=t.pos),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",vars:n,path:"/image/new/preview/slideshow/"+e,reqid:t.reqid||""}})},t.prototype.hitTrimmerCounter=function(e,t,n){var r=this.getActiveItemParams(),o=Ke({},t||{});r&&(o["-pos"]=r.pos),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",vars:o,path:"/image/new/preview/similar"+(e?"/"+e:""),reqid:r.reqid||""},node:n})},t.prototype.loadNextPageIfNeeded=function(){if(this.gallery.current){var e=this.gallery.current.getScrollPosition();if(e)e.rightEdgeOffset<e.currentPosition+this.galleryItemsLoadEventOffset&&Object(qe.a)().emit(We.a.listOut)}},t.prototype.getActiveItemParams=function(){return this.getItemParamsByIdx(this.state.activeItemIdx)},t.prototype.getItemParamsByIdx=function(e){return this.props.items[e]||{}},t.prototype.onRelatedItemClick=function(e,t){if(this.props.rimSelectedIdx!==e){var n=this.getActiveItemParams(),r=Ke(Ke({},t),{isRim:!0,parentPos:n&&n.pos});Object(qe.a)().emit(We.a.rimClick,r)}},t.prototype.logTechCounter=function(e){e&&this.props.logTech&&this.props.logTech(e)},t.prototype.sendPrevCounter=function(e,t,n){e!==this.state.activeItemIdx&&this.sendDirectionCounter(e,"prev",n)},t.prototype.sendNextCounter=function(e,t,n){e!==this.state.activeItemIdx&&this.sendDirectionCounter(e,"next",n)},t.prototype.sendDirectionCounter=function(e,t,n){var r,o=this.getItemParamsByIdx(e);if(o&&e!==this.state.activeItemIdx){this.isFullscreenMode&&!n&&(n="slideshow");var i=o.preview,a=o.isMarketIncut,s=o.commercialSource||"market",c=a?"/commercial/"+s:"",u=a?"commercial/"+s:o.freshness,l={"-pos":o.pos};if("keyboard"===n||"slideshow"===n)return l["-direction"]=t,void this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/serp/results/"+n+"/"+u,pos:o.pos,vars:l,reqid:o.reqid},node:{href:i[0].url}});"string"===typeof n&&(l["-event"]=n),this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/"+t+"/mouse"+c,vars:l,reqid:o.reqid},node:{href:null===(r=null===i||void 0===i?void 0:i[0])||void 0===r?void 0:r.url}})}},t.prototype.onCbirCropEvent=function(e){this.state.showCbirCrop&&this.hitTrimmerCounter("cancel"),Object(qe.a)().emit(We.a.cbirCrop),this.setState({showCbirCrop:!this.state.showCbirCrop}),e.stopPropagation()},t.prototype.onCbirCropSearchEvent=function(e){e.preventDefault(),this.hitTrimmerCounter("crop"),Object(qe.a)().emit("location:change",{url:e.currentTarget.href})},t.prototype.cbirCropClose=function(){this.setState({showCbirCrop:!1})},t.prototype.onCloseEventKeyboard=function(e){this.isFullscreenMode||this.onCloseEvent("keyboard",e)},t.prototype.onCloseEvent=function(){if(this.state.isVisible){var e=this.getActiveItemParams(),t=Xe(arguments,2),n=t[0],r=t[1];if(Object(qe.a)().emit(We.a.beforeClosed,{source:n}),this.setState({isVisible:!1,activeItemIdx:-1}),this.state.showCbirCrop&&this.cbirCropClose(),Object(qe.a)().emit(We.a.closed),"mouse"===n||"keyboard"===n||"paranja"===n){var o={"-place":n};"paranja"===n&&(o["-x"]=r.clientX,o["-y"]=r.clientY,o["-screenW"]=window.innerWidth,o["-screenH"]=window.innerHeight),this.logTechCounter({method:"hitDelayed",__oldCounter__:Ve({path:"close",params:{vars:o},reqid:e.reqid||""})})}}},t.prototype.onPreviewShowEvent=function(e,t){},t.prototype.onGalleryClick=function(e){var t=this.getItemParamsByIdx(e);this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/serp/results/"+t.counterPath,pos:e,vars:{"-click_source":"preview"},reqid:t.reqid},node:{href:t.imgHref}}),this.viewer.current&&this.viewer.current.switchToItem(e)},t.prototype.onDirectStripeShow=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/show/direct",vars:{"-type":"stripe","-page":e.page,"-pos":e.pos,"-row":e.row,"-col":e.col},reqid:e.reqid||""}})},t.prototype.onDirectStripeClick=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/click/direct",vars:{"-type":"stripe","-pos":e.pos,"-row":e.row,"-col":e.col,"-page":e.page},reqid:e.reqid||""}})},t.prototype.onDirectStripeHide=function(){var e=this.getActiveItemParams();this.logTechCounter({method:"hitDelayed",__oldCounter__:{dtype:"iweb",path:"/image/new/preview/commercial/hide/direct",vars:{"-type":"stripe","-pos":e.pos,"-row":e.row,"-col":e.col,"-page":e.page},reqid:e.reqid||""}})},t}(o.a.Component)},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.theme=void 0,n(88),n(89),t.theme={color:"yandex-default",root:"default"}},292:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(433),o=n(62),i=Object(o.b)(r.a);i.isBaobabNode=!0},294:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n.n(r),i=n(4),a=Object(i.cn)("Rub"),s=(n(414),a()),c=function(){return o.a.createElement("span",{className:s},"Р")}},298:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(17),i=(n(371),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},3:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return u}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return d}),n.d(t,"__createBinding",function(){return p}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return m}),n.d(t,"__spread",function(){return v}),n.d(t,"__spreadArrays",function(){return g}),n.d(t,"__await",function(){return b}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return O}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return C}),n.d(t,"__importStar",function(){return E}),n.d(t,"__importDefault",function(){return j}),n.d(t,"__classPrivateFieldGet",function(){return S}),n.d(t,"__classPrivateFieldSet",function(){return _});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}c((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function p(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{!function(e){e.value instanceof b?Promise.resolve(e.value.v).then(c,u):l(i[0][2],e)}(o[e](t))}catch(e){l(i[0][3],e)}}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function O(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function j(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function _(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},304:function(e,t,n){},305:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(356),Object(r.withBemMod)(Object(o.b)(),{theme:"clear"}))},306:function(e,t,n){"use strict";function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(String(e[t]))}).join("&")}Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyUrlParams=r,t.appendQueryString=function(e,t){var n=r(t);return 0===n.length?e:e.indexOf("?")>-1?e+"&"+n:e+"?"+n}},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(198);t.shouldSendCredentials=function(e,t){return!(!t||"omit"===t)&&("include"===t||r.getOrigin(e)===r.getOrigin(window.location))}},309:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n(5),i=n(67),a=(n(565),r.memo(Object(o.withBaobab)({name:"item",events:{onClick:Object(o.logClick)()}})(function(e){var t=e.selected,n=e.onClick,o=e.image,a=e.forwardRef,s=e.suffix,c=e.idx,u=e.width,l=e.disableSelection,d=r.useCallback(function(e,t){n&&n(c,t)},[n,c]),p=r.useMemo(function(){return Object(i.a)("Item",{selected:t&&!l})},[t,l]);return r.createElement("div",{style:{width:u},className:p,onClick:d,ref:a},r.createElement("div",{className:Object(i.a)("ItemImageOverlay")},o),s&&r.createElement("div",{className:Object(i.a)("ItemSuffix")},s))})))},311:function(e,t,n){n.r(t);var r=n(2400);n.d(t,"en",function(){return r.a})},312:function(e,t,n){"use strict";function r(e,t){for(var n=t.rowWidth,r=[],s=0,c=i(),u=i(),l=0,d=t.increaseVerticalHeight,p=t.increaseVerticalImagesThreshold,f=t.rowsNumber,h=0,m=e.length;h<m;h++){var v=e[h];if(void 0!==f&&s===f)break;var g=!1;if(c.items.push(v),c.width+=v.width+t.marginRight,d&&p){var b={};b.isVertical=v.isVertical=v.height>v.width,b.width=v.width*d,b.height=v.height*d,u.items.push(b),u.width+=b.width+t.marginRight,b.isVertical&&(l+=b.width),o(u,n)&&l>p*u.width&&(c.isVertical=!0,c.width=u.width,c.items.forEach(function(e,t){var n=u.items[t],r=n.width,o=n.height;e.width=r,e.height=o}),g=!0)}(g||o(c,n,0))&&(Array.prototype.push.apply(r,a(c,t).items),r[r.length-1].isLast=!0,c=i(),u=i(),l=0,s++)}return r}function o(e,t,n){var r=t*("number"===typeof n&&n>=0?n:.15);return 1===e.items.length?e.items[0].width-t>=r:e.width+r>=t}function i(){return{width:0,items:[]}}function a(e,t){var n=t.increaseVerticalHeight,r=e.items,o=r.length,i=t.baseRowHeight;e.isVertical&&n&&(i*=n);for(var a=o*t.marginRight,s=e.width-a,c=(t.rowWidth-a)/s,u=Math.round(i*c),l=0,d=0;d<o;d++){var p=r[d];p.newWidth=Math.round(p.width*c),p.newHeight=Math.ceil(p.height*c),p.rowHeight=u,l+=p.newWidth}return function(e,t,n){for(var r=t,o=0;r<n;o++)(i=e.items[o])&&i.newWidth&&(i.newWidth++,r++);for(o=0;r>n;o++){var i;(i=e.items[o])&&i.newWidth&&(i.newWidth--,r--)}}(e,l+=a,t.rowWidth),e}n.d(t,"a",function(){return r})},314:function(e,t,n){},315:function(e,t,n){},316:function(e,t,n){"use strict";n(402),n(403),n(404),n(405),n(406),n(407)},317:function(e,t,n){"use strict";function r(e){if(e.globalContext.isQueryPorn){var t=e.config.directStripeParams;return Boolean(t&&t.directIdAdult)}return!0}n.d(t,"a",function(){return r})},318:function(e,t,n){n.r(t);var r=n(2518);n.d(t,"en",function(){return r.a})},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},338:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(506),n(507);var r={color:"yandex-default",root:"legacy"}},34:function(e,t,n){"use strict";var r,o,i,a;n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),function(e){e[e.disabled=0]="disabled",e[e.top=1]="top",e[e.middle=2]="middle"}(r||(r={})),function(e){e.full="full",e.short="short"}(o||(o={})),function(e){e.normal="normal",e.block="block"}(i||(i={})),function(e){e.compact="compact",e.twoLines="two-lines"}(a||(a={}))},340:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(0),o=n(4),i=n(28),a=n(48),s=n(158),c=n(5),u=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=Object(o.cn)("MMDirectStripe"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.isComponentMounted=!1,n.loaderUrl="//an.yandex.ru/system/context.js",n.containerRef=r.createRef(),n.state={hidden:!1},n.getLogNode=Object(a.d)(n.getLogNode),n.onDirectRendered=n.onDirectRendered.bind(n),n.onEmptyDirectLoaded=n.onEmptyDirectLoaded.bind(n),n.onHide=n.onHide.bind(n),n.onClick=n.onClick.bind(n),n.setContainerRef=n.setContainerRef.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){var e=this,n=this.props,r=n.directId,o=n.pageNumber,a=n.forwardRef;this.isComponentMounted=!0,a&&(a.current=this),t.loadDirectContext(this.loaderUrl,function(){e.renderDirect()}),this.renderParams={blockId:r,renderTo:this.getUniqId(),async:!0,onRender:this.onDirectRendered,onHide:this.onHide,extParams:"&"+Object(i.stringifyUrlParams)(this.getExtParams())},o&&(this.renderParams.pageNumber=o)},t.prototype.componentDidUpdate=function(e,n){var r=this;e.directId===this.props.directId&&e.text===this.props.text&&n.hidden===this.state.hidden||t.loadDirectContext(this.loaderUrl,function(){r.renderDirect()})},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.onRemove,n=e.forwardRef;this.isComponentMounted=!1,n&&(n.current=null),t&&t()},t.prototype.render=function(){var e;if(this.state.hidden)return null;var t=this.props,n=t.className,o=t.style;return r.createElement(s.a,{style:o,className:l(null,[n]),logNode:this.getLogNode(null===(e=this.state.advData)||void 0===e?void 0:e[0])},r.createElement("div",{id:this.getUniqId(),ref:this.setContainerRef}))},t.prototype.getLogNode=function(e){var t={type:"adv"};return e&&(t.event_hash=null===e||void 0===e?void 0:e.eventHash,t.hit_log_id=null===e||void 0===e?void 0:e.hitLogId),{name:"DirectStripe",attrs:t,events:{onClick:Object(c.logClick)()}}},t.prototype.renderDirect=function(){var e=this,t=window.Ya.Context;if(!this.state.hidden&&t&&this.renderParams){var n=this.renderParams;t.AdvManager?(t._asyncModeOn=!0,t.AdvManager.render(n,this.onEmptyDirectLoaded)):(t._callbacks||(t._callbacks=[])).push(function(){return t.AdvManager&&t.AdvManager.render(n,e.onEmptyDirectLoaded)})}},t.prototype.setContainerRef=function(e){e?(e.addEventListener("click",this.onClick,!0),this.props.fixWidth&&(e.style.width=e.clientWidth+"px"),this.containerRef.current=e):this.containerRef.current&&(this.containerRef.current.removeEventListener("click",this.onClick,!0),this.containerRef.current=null)},t.prototype.onClick=function(e){this.props.onClick&&this.props.onClick(e)},t.prototype.getUniqId=function(){return this.elementDomId?this.elementDomId:(this.props.getUniqId?this.elementDomId=this.props.getUniqId():this.elementDomId="yandex_ad_stripe_"+Date.now()+"_"+Math.round(1e6*Math.random()),this.elementDomId)},t.prototype.getExtParams=function(){var e={reqid:this.props.reqid,position:"stripe",ui:"desktop"},t=this.props.yandexuid,n=/\buuid=(\w+)/.exec(location.search),r=n&&n[1];return r?e.uuid=r:t&&(e.yuid=t),e},t.prototype.onDirectRendered=function(e){var t,n;this.isComponentMounted&&(this.setState({hidden:!1,advData:null===e||void 0===e?void 0:e.advData}),null===(n=(t=this.props).onRender)||void 0===n||n.call(t,null===e||void 0===e?void 0:e.advData))},t.prototype.onHide=function(){if(this.isComponentMounted){var e=this.props.onHide;this.setState({hidden:!0}),e&&e()}},t.prototype.onEmptyDirectLoaded=function(){if(this.isComponentMounted){var e=this.props.onEmptyLoaded;this.setState({hidden:!0}),e&&e()}},t.loadDirectContext=function(e,t,n){var r=this,o=this.scriptStatuses[e];this.onLoad[e]||(this.onLoad[e]=[]),this.onError[e]||(this.onError[e]=[]),"loaded"!==o?(t&&this.onLoad[e].push(t),n&&this.onError[e].push(n)):t&&setTimeout(t,0);var i=this.contextScripts[e];if(!window.Ya.Context&&(!o||"error"===o)){i&&i.parentNode&&i.parentNode.removeChild(i);var a=this.contextScripts[e]=document.createElement("script");a.onload=function(){r.scriptStatuses[e]="loaded",r.onLoad[e].forEach(function(e){return e()})},a.onerror=function(){r.scriptStatuses[e]="error",r.onError[e].forEach(function(e){return e()})},a.src=e,document.body.appendChild(a),this.scriptStatuses[e]="loading"}},t.scriptStatuses={},t.contextScripts={},t.onLoad={},t.onError={},t}(r.Component),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=(Object(o.cn)("MMDirectStripe"),function(e){function t(t){var n=e.call(this,t)||this;return n.loaderUrl="//an.yandex.ru/system/widget.js",n}return p(t,e),t.prototype.renderDirect=function(){var e=this.props.directId;if(e){var t=window;t.yaads||(t.yaads=[]),t.yaads.push({id:e,extParams:"&"+Object(i.stringifyUrlParams)(this.getExtParams()),render:"#"+this.getUniqId(),success:this.onDirectRendered,reject:this.onHide,hide:this.onHide})}},t}(d)),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},m=function(e){return function(e){return"string"===typeof e&&0===e.indexOf("N-")}(e.directId)?r.createElement(f,h({},e)):r.createElement(d,h({},e))}},35:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return p});var r=n(0),o=n(235),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=r.createContext({}),s=a.Provider,c=a.Consumer;function u(e){var t=function(t){return r.createElement(c,null,function(n){return r.createElement(e,i({},t,{counters:n}))})};return t.displayName=Object(o.getDisplayName)(e)+":withImageCounters",t}var l=function(){return r.useContext(a)},d=function(e){return function(t){var n=function(n){var o=l(),a=r.useMemo(function(){return"string"===typeof e?o[e]:e(o)},[e,o]);return r.createElement(t,i({},n,{counters:a}))};return n.displayName=Object(o.getDisplayName)(t)+":withImageCounters",n}},p=function(e){return function(t){return t.counters?r.createElement(s,{value:t.counters},r.createElement(e,i({},t))):r.createElement(e,i({},t))}}},350:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(21),i=Object(r.withBemMod)(Object(o.b)(),{tone:"gray"})},351:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(2),o=n(1),i=n(5),a=n(763),s=n(757),c=n(537),u=n(527),l=n(0),d=n(106),p=(n(523),Object(i.withBaobab)({name:"ViewerModal-Paranja",events:{onClick:Object(i.logClick)()}})(l.memo(function(e){return l.createElement("div",{className:Object(d.a)("Paranja",null,[e.className]),onClick:e.onClick})}))),f=(n(524),Object(i.withBaobab)({name:"ModalViewer-Close",events:{onClick:Object(i.logClick)()}})(l.memo(function(e){return l.createElement("div",{className:Object(d.a)("Close",null,[e.className]),onClick:e.onClick})}))),h=Object(o.compose)(a.a,c.a,u.a,Object(i.withBaobab)({name:"MMViewerModal"}))(s.a),m=new r.Registry({id:Object(d.a)()});m.set("Modal",h),m.set("Paranja",p),m.set("Close",f)},353:function(e,t,n){},354:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(232),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},358:function(e,t,n){"use strict";n.d(t,"b",function(){return Ue}),n.d(t,"c",function(){return qe}),n.d(t,"a",function(){return We});var r=n(0),o=n.n(r),i=n(1),a=n(5),s=n(990),c=n(2),u=n(25),l=n(19),d=n(9);d.a&&!window.fetch&&(window.fetch=function(e,t){var n=void 0===t?{}:t,r=n.method,o=n.credentials,i=n.body,a=n.headers;return new Promise(function(t){var n=new XMLHttpRequest;"include"!==o&&"same-origin"!==o||(n.withCredentials=!0),n.onload=function(){t({status:n.status,ok:n.status>=200&&n.status<300,headers:{get:function(e){return n.getResponseHeader(e)}},json:function(){return Promise.resolve().then(function(){return JSON.parse(n.responseText)})}})},n.open(r||"GET",e,!0),a&&Object.keys(a).forEach(function(e){a[e]&&n.setRequestHeader(e,String(a[e]))}),i?n.send(i):n.send()})});var p=n(8),f=n(102),h=n(42),m=n(376),v=n(16),g=n(153),b=n(173),y=n(129),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(e){function t(t,n,r){var o=e.call(this,n,r)||this;return o.loadStarted=!1,o.item=t,o.startLoading(),o}return O(t,e),t.prototype.getUrlFromItem=function(){if(!this.loadStarted)return this.loadStarted=!0,this.item.url},t.prototype.getResultData=function(){return this.item},t}(y.a),C=function(){function e(e){this.currentWorkersData=[],this.imagesCache={},this.onImageLoaded=e&&e.onImageLoaded,this.onImageError=e&&e.onImageError}return e.prototype.load=function(e,t){var n=this;if(void 0===t&&(t=!0),!this.imagesCache[e.url]&&!this.currentWorkersData.some(function(t){return t.item.url===e.url})){var r;t&&this.stop();r={item:e,loader:new w(e,function(e,t){n.resultHandler(e,t,r)},{itemTimeout:15e3,timeout:9e4,onImageError:this.onImageError})},this.currentWorkersData.push(r)}},e.prototype.precache=function(e){var t=this;e.forEach(function(e){return t.load(e,!1)})},e.prototype.stop=function(){return this.currentWorkersData.length&&(this.currentWorkersData.forEach(function(e){return e.loader.stop()}),this.currentWorkersData.length=0),this},e.prototype.removeItemFromQueue=function(e){var t=this.currentWorkersData.indexOf(e);-1!==t&&this.currentWorkersData.splice(t,1)},e.prototype.resultHandler=function(e,t,n){var r=n.item;this.removeItemFromQueue(n),this.imagesCache[r.url]=!0,this.onImageLoaded&&this.onImageLoaded(r,t)},e}(),E=n(4),j=n(21),S=n(267),_=n.n(S),k=n(47),I=n(350),P=(n(558),Object(i.withBemMod)(Object(j.b)(),{type:"moreVertical"})),x=n(451),M=n(452),N=n(249),R=(n(554),Object(E.cn)("ExtraLinksPopup")),T=Object(i.compose)(x.a,M.a)(N.a),D=function(e){var t=e.visible,n=e.anchor,r=e.scope,i=e.onClose,a=e.children;return o.a.createElement(T,{className:R(),target:"anchor",view:"default",zIndex:1001,visible:t,anchor:n,scope:r,onClose:i},a)},L=n(6),A=n.n(L),B=n(13),F=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},U=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e},H=function(){function e(){}return e.show=function(e){Object(p.a)().emit("feedback:show",{urls:function(e){var t,n=((t={})[z(e.preview[0])]=!0,t);e.imgHref&&(n[e.imgHref]=!0);return U(e.dups,e.preview).forEach(function(e){n[z(e)]=!0}),Object.keys(n)}(e)})},e}();function z(e){return e.origin?e.origin.url:e.url}n(556);var q=Object(i.withBemMod)(Object(j.b)(),{type:"errorOutline"}),W=(n(555),Object(E.cn)("ExtraLinksItem")),G=Object(r.memo)(function(e){var t=e.title,n=e.icon,r=e.onClick,i=e.className;return o.a.createElement("button",{className:W(null,[i]),onClick:r},o.a.createElement("span",{className:W("Icon")},n),t)}),V=n(677),Y=q(j.a),K=A()(V),X=Object(E.cn)("ExtraLinksComplain"),Q=Object(r.memo)(function(e){var t=e.imageItem,n=e.onClick,i=void 0===n?B.a:n,a=Object(r.useCallback)(function(){H.show(t),i()},[t,i]),s=K("Пожаловаться",{context:"Надпись на кнопке, позволяющей пожаловаться на содержимое страницы или конкретную картинку"}),c=o.a.createElement(Y,{size:"s",type:"errorOutline"});return o.a.createElement(G,{className:X(),title:s,icon:c,onClick:a})}),Z=(n(557),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),J=Object(E.cn)("ExtraLinks"),$=Object(i.compose)(P,I.a)(j.a),ee=Object(r.memo)(function(e){var t=e.scope,n=e.scrollArea,i=e.imageItem,a=Object(r.useRef)(null),s=Z(Object(k.a)(!1),3),c=s[0],u=s[1],l=s[2];return _()(l,[i]),Object(r.useEffect)(function(){if(c&&n&&n.current){var e=n.current;return e.addEventListener("scroll",l),function(){e.removeEventListener("scroll",l)}}},[c,n,l]),o.a.createElement("div",{className:J()},o.a.createElement("div",{className:J("Icon"),onClick:c?l:u,ref:a},o.a.createElement($,{size:"m",type:"moreVertical",tone:"gray"})),o.a.createElement(D,{visible:c,onClose:l,anchor:a,scope:t},o.a.createElement(Q,{onClick:l,imageItem:i})))}),te=n(381),ne=n(67),re=n(243),oe=n(128),ie=(n(566),Object(i.compose)(Object(c.withRegistry)(te.a))(function(e){var t=e.unfocused,n=e.vertical,i=e.selectedIdx,a=e.onClick,s=e.onScroll,u=e.forwardRef,l=e.items,d=Object(c.useComponentRegistry)(Object(oe.a)()),p=d.Gallery,f=d.Thumb,h=d.Icon,m=Object(r.useMemo)(function(){return l.map(function(e){var t,n;return o.a.createElement(f,{className:Object(oe.a)("Thumb"),fit:"square",width:null===(t=e.thumb.size)||void 0===t?void 0:t.w,height:null===(n=e.thumb.size)||void 0===n?void 0:n.h,src:e.thumb.url,targetSize:80,stickers:{bottomRight:"market"===e.commercialSource?o.a.createElement(h,{className:Object(oe.a)("ThumbMarketIcon")}):null},key:e.id})})},[l]);return o.a.createElement(p,{className:Object(ne.a)({unfocused:t,vertical:n},[Object(oe.a)()]),forwardRef:u,selectedIdx:i,fixedPositionOnUpdate:!0,edgeCentered:"left",onClick:a,vertical:n,onScroll:s,autoScroll:re.b.fijiStyle},m)})),ae=n(366),se=n(175),ce=n(148),ue=n(59),le=n(375),de=(n(639),Object(i.compose)(Object(u.d)(ce.b),Object(ue.a)(["image"]),le.b)(se.a)),pe=n(261),fe=n(93),he=n(152),me=function(){return(me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ve=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ge=A()(he),be="openImagePopupShown";var ye=function(e){return function(t){var n=ve(t,[]),r=n,i=o.a.useCallback(function(e,t,r){e.preventDefault(),e.stopPropagation(),n.isOpenImageUnauthPopupEnabled&&n.showUnauthPopup&&n.showUnauthPopup(e,be,{strictShow:n.isOpenImageUnauthPopupStrictEnabled,loginUrl:Object(fe.a)(n.tld||"ru","images_viewer_open_image"),registrationUrl:void 0,skipUrl:t,skipText:ge("Не сейчас",{context:"Кнопка отказа от залогина на сервисе. Кнопка закрывает попап."}),baobabLogOnClose:"object"===typeof r?r:void 0,onCloseClick:function(o){n.isOpenImageUnauthPopupEnabled&&(window.open(t,"_blank"),"function"===typeof r&&r(e),o&&(o.preventDefault(),o.stopPropagation()))}})},[n]);return n.isOpenImageUnauthPopupEnabled&&n.showUnauthPopup&&(r=me(me({},r),{onOpenButtonClick:i,onSizeClick:i})),o.a.createElement(e,me({},r))}}(pe.a),Oe=n(258),we=n(260),Ce=function(){return(Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ee=A()(he);var je=function(e){return function(t){var n=t.isDiskShareEnabled,r=t.diskShareDirectoryName,i=Ee("Мои Яндекс.Картинки",{context:"Название папки на Яндекс.Диске, куда загружаются картинки"});return o.a.createElement(e,Ce({},t,{isDiskShareEnabled:n,diskShareDirectoryName:r||i}))}}(we.a),Se=function(){return(Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_e=A()(he),ke="shareDiskShown";var Ie=function(e){return function(t){var n=t.isDiskShareEnabled,r=t.isDiskShareUnauthPopupEnabled,i=t.showUnauthPopup,a=t.tld,s=void 0===a?"ru":a,c=o.a.useCallback(function(){r&&i&&i(null,ke,{loginUrl:Object(fe.a)(s,"images_disk"),registrationUrl:Object(fe.b)(s,"images_disk"),title:_e("Войдите в Яндекс, чтобы сохранить картинку",{context:'Надпись в диалоговом окне с логином при клике на кнопку "сохранить на Яндекс.Диск"'})})},[r,i,s]);return o.a.createElement(e,Se({},t,{requestAuthorization:c,isDiskShareEnabled:n}))}}(je),Pe=new c.Registry({id:Object(f.a)()});Pe.set("MMSidebar",m.a),Pe.set("Gallery",ie),Pe.set("ImagesViewerApp",ae.a);var xe=new c.Registry({id:Object(b.a)()});xe.set("ThumbsLoader",C);var Me=new c.Registry({id:Object(h.a)()});Me.set("ExtraLinks",ee),Me.set(Object(v.a)(),de);var Ne=new c.Registry({id:g.a.id});Ne.set(Object(v.a)("OpenImage"),ye),Ne.set(Object(v.a)("SearchByImage"),Oe.a),Ne.set(Object(v.a)("Share"),Ie);var Re=n(379),Te=n(49),De=o.a.createContext({}),Le=n(176),Ae=n(367),Be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(){return(Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ue=function(e){function t(t){var n=e.call(this,t)||this;return n.imageViewerAppRef=Object(r.createRef)(),n.reportedBadImages={},n.inited=!1,n.onViewerStateChange=n.props.integrateState?function(e,t){window.Ya.Images.onViewerStateChange&&window.Ya.Images.onViewerStateChange(e,t)}:void 0,n.onUpdateImages=n.onUpdateImages.bind(n),n.setImageStoreProvider=n.setImageStoreProvider.bind(n),n.updateGlobalContext=n.updateGlobalContext.bind(n),n.getBadImageReporter=n.getBadImageReporter.bind(n),d.a&&Object(p.a)().emit("i-global:get-params",n.updateGlobalContext),n.state={initialImageStoreState:n.getInitialStoreState()},n}return Be(t,e),t.prototype.getInitialStoreState=function(){var e=this.props.viewerData.config;return{images:[],config:Fe(Fe({},e),{imagesLoadingParams:Fe(Fe({},e.imagesLoadingParams),{onImageError:this.getBadImageReporter("2055"),onImageFileSizeError:this.getBadImageReporter("73007"),onImageSizeError:this.getBadImageReporter("72681"),onRimLoadingError:this.getBadImageReporter("73781")})}),experiments:this.props.viewerData.experiments,loadedPagesCount:1,currentItemIdx:this.props.currentItemIdx,globalContext:Fe({tld:"ru",query:"",yandexuid:"",lr:0,reqid:"",lang:""},this.nextContext)}},t.prototype.componentDidMount=function(){Object(p.a)().on("i-global:update",this.updateGlobalContext).on(Te.a.fill,this.onUpdateImages),Object(p.a)().emit(Te.a.mounted)},t.prototype.componentWillUnmount=function(){Object(p.a)().off("i-global:update",this.updateGlobalContext).off(Te.a.fill,this.onUpdateImages),Object(p.a)().emit(Te.a.unmounted)},t.prototype.onUpdateImages=function(e,t){var n=this.imageStoreProvider,r=Object(Ae.a)(e);n&&(t?n.dispatch(Object(l.m)(r)):n.dispatch(Object(l.c)(r)))},t.prototype.updateGlobalContext=function(e){var t=this.imageStoreProvider,n={tld:e.tld,query:e.query,yandexuid:e.yandexuid,lr:Number(e.lr),reqid:e.reqid,lang:e.lang,isQueryPorn:Boolean(e.isPornoQuery),cm2:Number(e.cm2),QCommercialProb:Number(e.QCommercialProb),QCommercialProbV2:Number(e.QCommercialProbV2),vcomm:Number(e.vcomm),isCommercialEnabled:Boolean(e.isCommercialEnabled),isCommercialQuery:Boolean(e.isCommercialQuery),isThumbsCommercialSnippetEnabled:Boolean(e.isThumbsCommercialSnippetEnabled)};t?t.dispatch(Object(l.p)(n)):this.nextContext||(this.nextContext=n)},t.prototype.isEncryptionConfigAvailable=function(){if(!d.a)return!1;var e=BEM.blocks["direct-utils"];return e&&e.isConfigAvailable()},t.prototype.encryptCountUrl=function(e){return BEM.blocks["direct-utils"].tagNEncryptUrl(e)},t.prototype.getBadImageReporter=function(e){var t=this;return function(n){t.reportedBadImages[n]||(t.reportedBadImages[n]=!0,window.Ya.Images.errcnt({src:n},e))}},t.prototype.shouldRender=function(){return Boolean(d.a&&this.state&&this.state.initialImageStoreState)},t.prototype.render=function(){var e=this;return this.shouldRender()?o.a.createElement(u.a,{forwardRef:this.setImageStoreProvider,initialState:this.state.initialImageStoreState,onStateChange:this.onViewerStateChange},o.a.createElement(De.Provider,{value:this.props.viewerData.experiments||{}},o.a.createElement(s.FavoritesContextProvider,null,o.a.createElement(c.ComponentRegistryConsumer,{id:Object(f.a)()},function(t){var n=t.ImagesViewerApp;return o.a.createElement(n,Fe({},e.props.viewerData,{onLog:e.props.onLog}))})))):null},t.prototype.setImageStoreProvider=function(e){this.imageStoreProvider=e,this.props.integrateState&&(window.Ya.Images.getViewerState=e?function(){return e.getState()}:void 0)},t}(r.Component),He="/clck/jclck",ze="/*//",qe=Object(i.compose)(function(e){return function(t){return o.a.createElement(e,Fe({baobab:{ui:t.ui,service:t.service,prefix:t.reqid,senderParams:{hrefPrefix:t.trueBaobab?He:"",hrefPostfix:ze}}},t))}},Object(a.withBaobabRoot)({name:"$page",attrs:{service:"images",ui:"desktop"},events:{onLog:Object(a.logClick)(function(e,t){return t[0]})}},Le.a,Le.b),function(e){return function(t){var n=o.a.useMemo(function(){return t.isPumpkin?Object(c.withRegistry)(Re.a,Pe)(e):Object(c.withRegistry)(Pe,Me,Ne,xe)(e)},[t.isPumpkin]);return o.a.createElement(n,t)}}),We=qe(Ue)},359:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),o=n(48),i=n(7),a=n(25),s=n(59),c=n(35),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=Object(o.c)(function(e){var t,n,r,o,a=Object(i.j)(e),s=a&&a.preview&&a.preview[0];s||(s=a&&a.dups&&a.dups[0]);var c=null===a||void 0===a?void 0:a.similarOffers,u=Boolean(null===(t=e.experiments)||void 0===t?void 0:t.similarOffersExtendedClickArea),l=Number(null===(n=e.experiments)||void 0===n?void 0:n.similarOffersFitInRow),d=Boolean(null===(r=e.experiments)||void 0===r?void 0:r.similarOffersFavicons),p=e.favicons,f=null===(o=e.experiments)||void 0===o?void 0:o.similarOffersTheme;return[a,s,c,p,u,l,d,f?String(f):void 0]},function(e,t,n,r,o,i,a,s){var c;return{offers:(n||[]).map(function(e){var t;return u(u({},e),{favicon:a?null===(t=r[e.domain.toLowerCase()])||void 0===t?void 0:t.data:void 0})}),extendedClickArea:o,isMarket:e&&Boolean(e.marketSnippet)&&"market"===(null===(c=e.marketSnippet)||void 0===c?void 0:c.source),reqid:e&&e.reqid,href:t&&t.url,offersInRow:i,theme:s}}),d=Object(r.compose)(Object(c.e)("similarOffers"),Object(a.d)(l),Object(s.a)(function(e){return Boolean(e.offers&&e.offers.length)}))},36:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var r,o=n(0),i=n(4),a=n(5);n(587);!function(e){e.default="",e.link="link"}(r||(r={}));var s=Object(i.cn)("MMButton"),c=Object(a.withBaobab)({name:"MMButton",events:{onClick:Object(a.logClick)()}})(function(e){var t=e.text,n=e.icon,r=e.rightIcon,i=e.rightText,a=e.onClick,c=e.className,u=e.forwardRef,l=e.onLog,d=e.counter,p=e.onContextMenuCapture,f=e.onMouseEnter,h=e.onMouseLeave;return o.createElement("button",{className:s({},[c]),onClick:function(e){a&&a(e),l&&l(d)},onMouseEnter:f,onMouseOut:h,onContextMenuCapture:p,ref:u},n&&o.createElement("span",{className:s("Icon")},n),o.createElement("span",{className:s("Text")},t),i&&o.createElement("span",{className:s("RightText")},i),r&&o.createElement("span",{className:s("RightIcon")},r))})},364:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(3),o=n(0),i=n.n(o),a=n(1),s=n(18),c=n(12),u=Object(a.withBemMod)(Object(c.b)(),{type:"link"},function(e){return function(t){t.type;var n=t.target,o=t.rel,a=t.url,c=t.disabled,u=t.tabIndex,l=Object(r.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),d=o;return"_blank"===n&&void 0!==o&&-1===o.indexOf("noopener")&&(d=o+" noopener"),i.a.createElement(e,Object(r.__assign)({},l,{rel:d,target:n,disabled:c,pressKeys:[s.a.ENTER],href:c?void 0:a,tabIndex:c?-1:u,type:null,autoComplete:null,as:"a"}))}})},365:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(2),o=n(0),i=n(208),a=n(106),s=(n(525),n(351)),c=Object(r.withRegistry)(s.a)(function(e){var t=o.useRef(null),n=Object(r.useComponentRegistry)(Object(a.a)()),s=n.Modal,c=n.Close,u=n.Paranja;return o.useEffect(function(){if(t.current){var n=t.current;if(e.isVisible)return Object(i.disableBodyScroll)(n),function(){e.isVisible&&Object(i.enableBodyScroll)(n)};Object(i.enableBodyScroll)(n)}},[e.isVisible,t.current]),o.createElement(s,{innerRef:t,className:Object(a.a)(null,[e.className]),theme:"normal",visible:e.isVisible,hasAnimation:!1,zIndex:e.zIndex,zIndexGroupLevel:e.zIndexGroupLevel||20,disablePortal:e.isSSREnabled},o.createElement(u,{onClick:e.onParanjaClick}),o.createElement(c,{onClick:e.onCloseClick}),e.children)})},366:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return m});var r=n(1),o=n(5),i=n(19),a=n(35),s=n(48),c=n(7),u=n(317),l=n(25),d=n(289),p=Object(s.d)(function(e){return function(t){return e(Object(i.k)(t))}}),f=Object(o.withBaobab)({name:"ImagesViewer",events:{logTech:Object(o.logTech)("",function(e,t){return t[0]})}}),h=Object(l.d)(function(e,t,n){var r=e.globalContext;return{tld:e.globalContext.tld,yandexuid:e.globalContext.yandexuid,rimSelectedIdx:e.rimSelectedIdx,reqid:e.globalContext.reqid,query:e.globalContext.query,isCommercialQuery:e.globalContext.isCommercialQuery,isCommercialEnabled:e.globalContext.isCommercialEnabled,items:e.images,shownImage:Object(c.j)(e),isPornoQuery:Boolean(r.isQueryPorn),directStripeEnabled:Object(u.a)(e),config:e.config,currentItemIdx:e.currentItemIdx,setCurrentItemIdx:p(t),experiments:n.experiments,stretchSideblock:Boolean(Object(c.l)(e))}}),m=Object(r.compose)(a.c,h,f)(d.a)},367:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=function(e){if(e.snippet)return{id:e.id,pos:e.pos,docid:e.docid,rimid:e.rimId,imgHref:e.img_href,reqid:e.reqid,fresh:e.fresh,freshness:e.freshness,counterPath:e.counterPath,isMarketIncut:e.isMarketIncut,commercialSource:e.commercialSource,previewUrl:e.detail_url,isFavorite:Boolean(e.isFavorite),photostockUrl:e.photostockUrl,uniqId:e.reqid+"-"+e.id,images:[],preview:e.preview,snippet:function(e){return r(r({},e),{text:((null===e||void 0===e?void 0:e.text)||"").replace(/<b>/g,"[").replace(/<\/b>/g,"]"),redirUrl:e.redirUrl||e.url})}(e.snippet),similarOffers:function(e){if(e&&e.length)return e.map(function(e){return r(r({},e),{price:e.price?Number(e.price.toString().replace(/ +/g,"")):void 0})})}(e.similarOffers),marketSnippet:e.marketSnippet&&function(e){if(e)return{domain:e.domain,isMarketPlace:e.isMarketPlace,punycode:e.punycode,imageUrl:e.image_url,modelUrl:e.model_url,moneyId:e.money_id,price:e.price,shopRating:e.shop_rating,modelRating:e.model_rating,source:e.source,title:e.title,url:e.url,oldPrice:e.oldPrice,currency:e.currency,discount:e.discount,text:e.text,fullText:e.fullText}}(e.marketSnippet),schemaOrgSnippet:e.schemaOrgSnippet&&function(e){if(e)return{domain:e.domain,punycode:e.punycode,moneyId:e.money_id,price:e.price,currency:e.currency,source:e.source,title:e.title,url:e.url,redirUrl:e.redirUrl,text:e.text,fullText:e.fullText,availability:e.availability,brand:e.brand}}(e.schemaOrgSnippet),otherOffers:e.otherOffers,thumb:function(e){return{commercialCrop:e.commercialCrop,url:e.url,microImg:e.microImg,size:{w:e.size.width,h:e.size.height}}}(e.thumb),col:e.col,row:e.row,page:e.page,dups:e.dups,extraOrigin:e.extraOrigin,origOnlyOpen:e.origOnlyOpen}},i=function(e){for(var t=[],n=0;n!==e.length;n++){var r=o(e[n]);r&&t.push(r)}return t}},368:function(e,t,n){"use strict";n.d(t,"b",function(){return L}),n.d(t,"c",function(){return A}),n.d(t,"a",function(){return B});var r=n(0),o=n(6),i=n.n(o),a=n(1),s=n(2),c=n(5),u=n(35),l=n(259),d=n(131),p=n(48),f=n(23),h=(n(672),n(65)),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e){return r.createElement(h.b,m({size:h.a.s},e))}var g=n(312),b=n(4),y=Object(b.cn)("MMTiledImages"),O=(n(673),Object(c.withBaobab)({name:"item"})(function(e){var t=e.selected,n=e.onClick,o=e.style,i=e.src,a=e.title,s=void 0===a?"":a;return r.createElement("div",{className:y("Item",{selected:t}),onClick:n,style:o},r.createElement("img",{src:i,className:y("Image"),alt:s}))})),w=n(122),C=new s.Registry({id:Object(w.a)()});C.set(y(),function(e){var t=e.items,n=e.selectedItemIdx,o=e.onClick,i=e.clickedCounter,a=e.className,s=e.counterParams,u=e.incutStart,l=e.incutStep,d=e.incutRenderer,p=e.style,h=0;return r.createElement("div",{className:y(void 0,[a]),style:p},t.reduce(function(e,t,a){var p=s&&s.vars,m=t.thumb.url,v={},g=a===n;if(t.newWidth&&(v.width=t.newWidth+"px"),t.newHeight&&(v.height=t.newHeight+"px",t.rowHeight&&t.rowHeight>t.newHeight&&(v.paddingTop=Math.round((t.rowHeight-t.newHeight)/2)+"px")),e.push(r.createElement(O,{key:m,src:m,style:v,logNode:{events:{onClick:g?void 0:Object(c.logClick)(Object(f.b)(i,{"-rim-idx":a,"-rim_index":a,"-pos":p&&p["-pos"],"-rim_id":t.rimid}))}},selected:g,onClick:o&&o.bind(void 0,a,t)})),t.isLast&&(h++,void 0!==u&&void 0!==l&&void 0!==d)){var b=h-u;b>=0&&b%l===0&&e.push(d(h,b/l))}return e},[]))});var E=n(685),j=(n(671),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},k=i()(E),I=function(e,t){void 0===t&&(t=0);var n=[],r=e.length;if(r>0)for(var o=t;o<r;o++){var i=e[o],a=i.preview[0]||i.dups[0],s=a.origin&&a.origin.url||a.url;s&&n.push(i.id+":"+encodeURIComponent(s))}return n},P=function(e){var t=e.relatedImages,n=e.counterParams,r=I(t),o=n&&n.vars,i=S({},o);return r.length&&(i["-images"]=r.join(";")),i},x=function(e,t){var n=e.relatedImages,r=e.counterParams,o=n.length,i=r&&r.vars,a=S({},i);if(e.selectedRimIdx&&(a["-rim_id"]=e.rimid,a["-rim_index"]=e.selectedRimIdx),o>t){var s=I(n,t);s.length&&(a["-images"]=s.join(";"))}return a},M=y(),N=Object(w.a)(),R=Object(p.d)(function(e){return Object(w.a)(null,[d.a,e])}),T=Object(w.a)("Tiles"),D=Object(w.a)("Header",null,[l.a]),L=function(e){function t(t){var n=e.call(this,t)||this;return n.shownCount=0,n.prevShownCount=0,n.fittedItems=[],n.setDefaults(),n.justifierConfig={rowWidth:n.getSideblockWidth(),baseRowHeight:t.baseRowHeight||150,marginRight:5,minImageWidth:70},n.onClick=n.onClick.bind(n),n}return j(t,e),t.prototype.getSideblockWidth=function(){return this.props.sideblockWidth?this.props.sideblockWidth-21:319},t.prototype.componentDidMount=function(){this.handlePageLoad()},t.prototype.componentDidUpdate=function(){this.handlePageLoad()},t.prototype.handlePageLoad=function(){this.shownCount>this.prevShownCount&&this.props.onPageLoaded&&this.props.onPageLoaded()},t.prototype.render=function(){var e=this,t=this.props.relatedImages;if(!t||!t.length)return this.setDefaults(),null;var n=this.shownRimId===this.props.rimid;if(n&&t===this.prevRelatedImages||(this.prevShownCount=this.shownCount,this.fittedItems=this.fitAllItems(t),this.prevRelatedImages=t),n?this.fittedItems.length>this.shownCount&&this.props.onMore&&this.props.onMore(this.shownCount):this.props.onShow&&this.props.onShow(),this.shownRimId=this.props.rimid,this.shownCount=this.fittedItems.length,!this.fittedItems.length)return null;var o=this.props.sideblockWidth?{width:this.justifierConfig.rowWidth+"px"}:void 0;return r.createElement(s.ComponentRegistryConsumer,{id:N},function(t){var n=t[M];return r.createElement("div",{className:R(e.props.className)},r.createElement("div",{className:D},k("Связанные картинки",{context:"Заголовок блока в просмотрщике картинки"})),r.createElement(n,{className:T,style:o,items:e.fittedItems,onClick:e.onClick,counterParams:e.props.counterParams,selectedItemIdx:e.props.selectedRimIdx,clickedCounter:e.props.clickedCounter}),e.props.isLoading?r.createElement(v,{theme:"yellow"}):"")})},t.prototype.setDefaults=function(){this.shownRimId=void 0,this.shownCount=0,this.prevShownCount=0,this.fittedItems=[],this.prevRelatedImages=void 0},t.prototype.fitAllItems=function(e){var t=this,n=e.map(function(e){var n=e.thumb,r=t.justifierConfig.baseRowHeight,o=n.size?n.size.w:0,i=n.size?n.size.h:0,a=1.5*i<r?1.5*i:r,s=o*a/i;return S(S({},e),{width:s,height:a})});return Object(g.a)(n,this.justifierConfig)},t.prototype.onClick=function(e,t){this.props.setSelectedRim(e),this.props.onClick&&this.props.onClick(e,t)},t}(r.Component);function A(e){var t=Object(a.compose)(Object(s.withRegistry)(C),Object(c.withBaobab)({name:"related-images"}))(e);return function(e){var n=Object(u.b)(),o=n.rimShown,i=n.rimMore,a=n.rimClicked,s=r.useMemo(function(){return{events:{onShow:Object(c.logTech)("show",function(e){var t=e.props;return Object(f.b)(o,P(t),void 0,{href:t.imgHref})}),onMore:Object(c.logTech)("more",function(e,t){var n=e.props,r=_(t,1)[0];return Object(f.b)(i,x(n,r),void 0,{href:n.imgHref})})}}},[o,i]);return r.createElement(t,S({logNode:s,clickedCounter:a},e))}}var B=A(L)},369:function(e,t,n){"use strict";n.d(t,"b",function(){return w}),n.d(t,"c",function(){return C}),n.d(t,"a",function(){return E});var r=n(0),o=n(2),i=n(57),a=n(5),s=n(6),c=n.n(s),u=n(48),l=n(682),d=n(380),p=n(107),f=function(){return!!p.a&&Boolean("IntersectionObserver"in window&&"IntersectionObserverEntry"in window)}(),h=function(){return!!p.a&&(!(window.navigator.userAgent.indexOf("Edg/")>-1)&&window.navigator.userAgent.indexOf("Edge/")>-1)}(),m=n(42),v=(n(640),n(34)),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=c()(l),O=Object(u.d)(function(e){return{vars:{"-pos":e&&e.pos}}}),w=function(e){function t(t){var n=e.call(this,t)||this;return n.containerNode={current:null},n.fixedPaneRef=r.createRef(),n.fixedPaneVisibilityAnchorRef=r.createRef(),n.rootRef={current:null},n.scrollStartLogged=!1,n.scrollToBottomLogged=!1,n.scrollShowLogged=!1,n.autoScroll=!1,n.componentIsMounted=!1,n.BOTTOM_REACH_OFFSET=300,n.state={scrollShowLogged:!1,fixedPaneHidden:!0,fixedPaneAnimated:!1},n.onScroll=Object(i.throttle)(n.onScroll.bind(n),100,{delayedLastCall:!0}),n.onRootNodeRef=n.onRootNodeRef.bind(n),n.onContainerNodeRef=n.onContainerNodeRef.bind(n),n.onMutation=n.onMutation.bind(n),n.onRimPageLoaded=n.onRimPageLoaded.bind(n),n.observerCallback=n.observerCallback.bind(n),n}return g(t,e),t.prototype.isFixedPaneEnabled=function(){if(!f)return!1;if(!this.props.fixedPaneConfig)return!1;var e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("safari")||-1!==e.indexOf("chrome")},t.prototype.componentDidUpdate=function(e,t){var n=this;this.props.isVisible&&(e.activeImage&&this.props.activeImage&&e.activeImage.docid!==this.props.activeImage.docid&&(this.scrollShowLogged=!1,this.hasScroll()&&this.resetScroll(),this.setState({fixedPaneHidden:!0,fixedPaneAnimated:!1})),t.fixedPaneHidden!==this.state.fixedPaneHidden&&window.requestAnimationFrame(function(){n.setState({fixedPaneAnimated:!0})}))},t.prototype.componentDidMount=function(){this.componentIsMounted=!0,this.autoScroll=!1,this.props.fixedPaneConfig&&this.attachFixedPaneObserver()},t.prototype.attachFixedPaneObserver=function(){if(this.isFixedPaneEnabled()){var e=this.fixedPaneVisibilityAnchorRef&&this.fixedPaneVisibilityAnchorRef.current,t=this.rootNode;e&&t&&(this.fixedPaneAnchorObserver=new IntersectionObserver(this.observerCallback,{root:t,threshold:1}),this.fixedPaneAnchorObserver&&this.fixedPaneAnchorObserver.observe(e))}},t.prototype.detachFixedPaneObserver=function(){this.fixedPaneAnchorObserver&&this.fixedPaneAnchorObserver.disconnect()},t.prototype.componentWillUnmount=function(){this.componentIsMounted=!1,this.detachFixedPaneObserver()},t.prototype.render=function(){var e=this,t=this.props,n=t.activeImage,i=t.shownImage,a=t.cnSidebarParams,s=i&&i.schemaOrgSnippet,c=this.isFixedPaneEnabled(),u=this.props.fixedPaneConfig,l=u&&u.theme?u.theme:v.c.full,d=this.state,p=d.fixedPaneHidden,f=d.fixedPaneAnimated,g=!p&&f,b=h?"fixed":"sticky";return r.createElement("div",{className:Object(m.a)("",a),onScroll:this.onScroll,ref:this.onRootNodeRef,style:this.getSidebarStyle()},r.createElement(o.ComponentRegistryConsumer,{id:Object(m.a)()},function(t){var o=t.MMOrganicSnippet,i=t.MMSchemaOrgSnippet,a=t.MMRelatedImages,u=t.MMSimilarOffers,d=(null===s||void 0===s?void 0:s.url)?r.createElement(i,{type:"schemaorg",minified:!0}):r.createElement(o,{minified:!0});return r.createElement(r.Fragment,null,c&&!p&&r.createElement("div",{className:Object(m.a)("FixedPane",{hidden:p,type:p?"":b,animated:g,theme:l}),ref:e.fixedPaneRef},d,e.getViewerButtons(!0)),r.createElement("div",{className:Object(m.a)("Container"),ref:e.onContainerNodeRef},e.renderMarketSnippet(t,v.d.top),e.renderMainContent(t),e.renderMarketSnippet(t,v.d.middle),u&&r.createElement(u,null),r.createElement(a,{onPageLoaded:e.onRimPageLoaded,onClick:e.props.onRelatedItemClick,counterParams:O(n)})))}))},t.prototype.renderMainContent=function(e){var t,n=e.OtherOffers,o=e.MMViewerTags,i=this.props,a=i.shownImage,s=i.isDuckEnabled,c=i.onTagClick,u=a&&a.marketSnippet,l=this.isFixedPaneEnabled();return r.createElement(r.Fragment,null,this.renderBlock(r.createElement(r.Fragment,null,this.renderSnippet(e),n&&!u&&(null===a||void 0===a?void 0:a.otherOffers)&&0!==(null===(t=null===a||void 0===a?void 0:a.otherOffers)||void 0===t?void 0:t.length)&&r.createElement(r.Fragment,null,r.createElement("div",{className:Object(m.a)("OtherOffersDivider",{snippet:"schemaorg"})}),r.createElement("div",{className:Object(m.a)("Title",{snippet:"schemaorg"})},y("В других магазинах",{context:"Заголовок блока предложений товара в других магазинах"})),r.createElement(n,{fold:!0,className:Object(m.a)("OtherOffers",{snippet:"schemaorg"})}))),"baseOrganicSnippetContainer"),s&&r.createElement(o,{onTagClick:c}),this.getViewerButtons(),l&&r.createElement("div",{className:Object(m.a)("FixedPaneVisibilityAnchor"),ref:this.fixedPaneVisibilityAnchorRef}))},t.prototype.renderSnippet=function(e){var t=e.MMOrganicSnippet,n=e.MMSchemaOrgSnippet,o=e.ExtraLinks,i=this.props,a=i.shownImage,s=i.activeImage,c=null===a||void 0===a?void 0:a.schemaOrgSnippet,u=s&&o?r.createElement(o,{imageItem:s,scope:this.containerNode,scrollArea:this.rootRef}):void 0;return(null===c||void 0===c?void 0:c.url)?r.createElement(n,{type:"schemaorg",key:"baseOrganicSnippetNode",aside:u}):r.createElement(t,{key:"baseOrganicSnippetNode",aside:u})},t.prototype.renderMarketSnippet=function(e,t){var n,o=e.MMMarketSnippet,i=e.OtherOffers,a=this.props,s=a.shownImage,c=a.marketPosition,u=null===s||void 0===s?void 0:s.marketSnippet,l="undefined"!==typeof c?c:v.d.middle;if(u&&o&&l===t)return r.createElement(o,b({},u),i&&(null===s||void 0===s?void 0:s.otherOffers)&&0!==(null===(n=null===s||void 0===s?void 0:s.otherOffers)||void 0===n?void 0:n.length)&&r.createElement(r.Fragment,null,r.createElement("div",{className:Object(m.a)("Title",{snippet:"market"})},y("В других магазинах",{context:"Заголовок блока предложений товара в других магазинах"})),r.createElement(i,{fold:!0,className:Object(m.a)("OtherOffers",{snippet:"market"})})))},t.prototype.getSidebarStyle=function(){var e=this.props.width;if(e)return{width:e+"px"}},t.prototype.getViewerButtons=function(e){var t,n=this,i=this.props,a=i.shownImage,s=i.addToCollectionsLoginUrl,c=void 0===s?"":s,u=this.containerNode.current?this.containerNode:void 0,l=Boolean(a&&a.isFavorite);return t=e?v.b.compact:v.b.twoLines,r.createElement(o.ComponentRegistryConsumer,{id:Object(m.a)()},function(e){var o=e.MMViewerButtons;return r.createElement(o,{view:t,popupScope:u,onLog:n.props.onLog,loginUrl:c,isFavorite:l})})},t.prototype.renderBlock=function(e,t){return this.props.view===v.a.block?r.createElement("div",{className:Object(m.a)("Block"),key:t},e):e},t.prototype.onRootNodeRef=function(e){this.rootRef.current=e,e&&this.rootNode!==e&&(this.rootObserver&&this.rootObserver.disconnect(),this.rootObserver=new MutationObserver(this.onMutation),this.rootObserver.observe(e,{attributes:!0,childList:!0,subtree:!0})),this.props.nodeRef&&(this.props.nodeRef.current=e),this.rootNode=e,this.checkSidebarBottomReached()},t.prototype.onContainerNodeRef=function(e){this.containerNode.current!==e&&(this.containerNode.current=e,this.forceUpdate())},t.prototype.onMutation=function(){this.props.isVisible&&!this.scrollShowLogged&&this.countNewScrollState()},t.prototype.onRimPageLoaded=function(){this.checkSidebarBottomReached()},t.prototype.resetScroll=function(){var e=this;this.rootNode&&(this.autoScroll=!0,this.rootNode.scrollTop=0,setTimeout(function(){e.autoScroll=!1},0))},t.prototype.hasScroll=function(){var e=this.containerNode.current,t=e&&e.parentElement;return!(!e||!t)&&e.offsetTop+e.clientHeight>t.clientHeight},t.prototype.countNewScrollState=function(){this.scrollStartLogged=!1,this.scrollToBottomLogged=!1,this.hasScroll()&&(this.scrollShowLogged=!0,this.props.onScrollShow&&this.props.onScrollShow())},t.prototype.observerCallback=function(e){var t=this;this.componentIsMounted&&e.forEach(function(e){var n=e.rootBounds,r=e.boundingClientRect;n&&r.top<n.top?t.setState({fixedPaneHidden:!1,fixedPaneAnimated:!1}):t.setState({fixedPaneHidden:!0,fixedPaneAnimated:!1})})},t.prototype.isSidebarBottomReached=function(){var e=this.rootNode;if(!e)return!1;var t=e.scrollTop+e.clientHeight;return e.scrollHeight-t<=this.BOTTOM_REACH_OFFSET},t.prototype.checkSidebarBottomReached=function(){this.isSidebarBottomReached()&&this.props.onBottomSidebar&&this.props.onBottomSidebar()},t.prototype.onScroll=function(){if(this.componentIsMounted)if(this.autoScroll)this.autoScroll=!1;else if(this.checkSidebarBottomReached(),!this.scrollStartLogged||!this.scrollToBottomLogged){var e=this.containerNode.current,t=e&&e.parentElement;e&&t&&(this.scrollStartLogged||(this.scrollStartLogged=!0,this.props.onScrollStart&&this.props.onScrollStart()),!this.scrollToBottomLogged&&t.scrollTop+t.clientHeight>=e.clientHeight&&(this.scrollToBottomLogged=!0,this.props.onScrollToBottom&&this.props.onScrollToBottom()))}},t}(r.Component);function C(e){return Object(a.withBaobab)({name:"pane"})(Object(o.withRegistry)(d.a)(e))}var E=C(w)},37:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=n(0),o=n(4),i=(n(401),Object(o.cn)("MMIcon")),a=function(e){var t=e.className;return r.createElement("i",{className:i(null,[t])})}},371:function(e,t,n){},373:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(1),i=n(263),a=n(52),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=Object(o.withBemMod)(Object(a.a)(),{withTooltip:!0},function(e){return function(t){var n=r.useRef(null),o=t.onClick,c=t.onMouseEnter,u=t.onMouseOut,l=t.active,d=t.initVisibility;return r.createElement(i.a,{text:t.title,anchor:n,directions:["right-center"],initialVisibility:!l&&d,mainOffset:7,hasTail:!0},function(i,d){var p=r.useCallback(function(e){l||d(),null===o||void 0===o||o(e)},[l,o,d]),f=r.useCallback(function(e){l||i(),null===c||void 0===c||c(e)},[l,c,i]),h=r.useCallback(function(e){l||d(),null===u||void 0===u||u(e)},[l,u,d]);return r.createElement(e,s({},t,{className:Object(a.a)(null,[t.className]),forwardRef:n,onMouseEnter:f,onMouseOut:h,onClick:p}),t.children)})}})},374:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(5),i=n(52),a=(n(576),r.memo(function(e){var t=e.disabled,n=void 0!==t&&t,o=e.active,a=void 0!==o&&o,s=e.onMouseEnter,c=e.onMouseOut,u=e.forwardRef,l=e.onClick;return r.createElement("div",{className:Object(i.a)({disabled:n,active:a},[e.className]),onClick:n?void 0:l,onMouseEnter:s,onMouseOut:c,ref:u},e.children)})),s=Object(o.withBaobab)({name:"CircleButton"})(a)},375:function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"a",function(){return O});var r=n(0),o=n.n(r),i=n(422),a=n.n(i),s=n(154),c=n(1),u=n(25),l=n(59),d=n(175),p=n(148),f=n(168),h=n(258),m=n(93),v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},g=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},b=a()({loader:function(){return n.e("2af101").then(n.bind(null,955))},loading:function(){return null},render:function(e,t){var n=e.MMUnauthPopup;return o.a.createElement(n,v({logNode:"object"===typeof t.baobabLogOnClose?{events:{onCloseClick:t.baobabLogOnClose}}:void 0},t))}}),y=function(e){return function(t){var n=!t.loggedIn&&!t.isQueryPorn,r=Object(s.a)(),i=n&&0!==t.unauthPopupSimilarFlag&&Object(m.c)(h.b,t.unauthPopupSimilarFlag)&&f.a,a=v(v({},t),{isOpenImageUnauthPopupEnabled:n,isOpenImageUnauthPopupStrictEnabled:n,isSimilarUnauthPopupEnabled:i,isDiskShareUnauthPopupEnabled:!0}),c={visible:!1,loginUrl:"",registrationUrl:"",title:"",text:"",onCloseClick:void 0,skipUrl:"",skipText:"",baobabLogOnClose:void 0},u=g(o.a.useState(c),2),l=u[0],d=u[1],p=o.a.useCallback(function(e){d(c),l.onCloseClick&&l.visible&&l.onCloseClick(e)},[c,l]),y=o.a.useCallback(function(e){l.visible&&e&&27===e.keyCode&&(d(c),e.stopImmediatePropagation())},[c,l.visible]);o.a.useEffect(function(){return l.visible&&document.addEventListener("keydown",y,!0),function(){l.visible&&document.removeEventListener("keydown",y,!0)}},[y,l.visible]);var O=o.a.useCallback(function(e,t,n){return Object(m.d)(e,d,t,n)},[]);return n&&r()?(b.preload(),o.a.createElement(o.a.Fragment,null,l.visible&&o.a.createElement(b,{loginUrl:l.loginUrl,registrationUrl:l.registrationUrl,title:l.title,text:l.text,onCloseClick:p,skipUrl:l.skipUrl,skipText:l.skipText,baobabLogOnClose:l.baobabLogOnClose}),o.a.createElement(e,v({},a,{showUnauthPopup:O})))):o.a.createElement(e,v({},a))}},O=Object(c.compose)(Object(u.d)(p.b),Object(l.a)(["image"]),y)(d.a)},376:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var r=n(48),o=n(7),i=n(25),a=n(369),s=n(34),c=n(19),u=Object(r.d)(function(e){return function(){return e(Object(c.j)())}}),l=function(e,t){var n,r=Object(o.c)(e),i=Object(o.j)(e),a=e.config,c=a.isDuckEnabled,l=a.sidebar,d=null===l||void 0===l?void 0:l.view;return d&&((n||(n={})).view=d),{fixedPaneConfig:null===l||void 0===l?void 0:l.fixedPaneConfig,marketPosition:s.d.top,isDuckEnabled:Boolean(c),reqid:r&&r.reqid,activeImage:r,shownImage:i,onBottomSidebar:u(t),width:Object(o.l)(e),view:d,cnSidebarParams:n}};function d(e){return Object(i.d)(l)(e)}var p=d(a.a)},377:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n(1),i=n(6),a=n.n(i),s=n(318),c=n(61),u=(n(657),function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),l=a()(s),d=Object(o.withBemMod)(Object(c.b)(),{theme:"v2"},function(e){return function(t){return r.createElement(e,u({title:l("Похожие товары",{context:'Заголовок блока в просмотрщике картинок содержащего товары, похожие на показанный. Содержит данные из сервиса "Яндекс.Маркет"'})},t))}})},378:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r=n(1),o=n(48),i=n(7),a=n(203),s=n(59),c=n(19),u=n(25),l=n(368),d=Object(o.d)(function(e){return function(t){return e(Object(c.n)(t))}}),p=Object(o.c)(function(e,t){var n,r=e.experiments,o=void 0===r?{}:r,a=e.globalContext,s=Object(i.c)(e),c=e.rimForItem,u=null===(n=e.config.rim)||void 0===n?void 0:n.justifier.baseRowHeight,l=a.isCommercialEnabled||a.isCommercialQuery;o.commercialRimItemBaseHeight&&l&&(u=Number(o.commercialRimItemBaseHeight));var d=Object(i.l)(e);return[s,Object(i.j)(e),e.rimSelectedIdx,c,e.rimLoadingId,u,d,t]},function(e,t,n,r,o,i,s,c){return{imgHref:t&&t.imgHref?t.imgHref:function(e){var t=e&&e.dups&&e.dups[0];return t&&t.origin?t.origin.url:""}(t),rimid:Object(a.e)(e),relatedImages:r,selectedRimIdx:n,setSelectedRim:d(c),isLoading:""!==o,baseRowHeight:i,sideblockWidth:s}});function f(e){return Object(r.compose)(Object(u.d)(p),Object(s.a)(["relatedImages","rimid","isLoading"]))(e)}var h=f(l.a)},379:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n(16),i=n(153),a=new r.Registry({id:i.a.id}),s=Object(o.a)("OpenImage");Object.keys(i.a.snapshot()).forEach(function(e){e!==s&&a.set(e,function(){return null})})},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.BaobabContext=r.createContext(void 0),t.Provider=t.BaobabContext.Provider,t.Consumer=t.BaobabContext.Consumer},380:function(e,t,n){"use strict";n.d(t,"a",function(){return cn});var r=n(2),o=n(1),i=n(4),a=Object(i.cn)("MMOrganicSnippet"),s=n(0),c=n.n(s),u=n(192),l=n(62),d=n(780),p=n(857),f=n(42),h=(n(642),Object(f.a)("SectionTitle")),m=n(5),v=n(35),g=n(82),b=n(23),y=n(7),O=(n(641),n(755)),w=n(364),C=n(357),E=n(548),j=n(442),S=n(6),_=n.n(S),k=(n(643),n(683)),I=Object(o.compose)(O.a,w.a,C.a,E.a)(j.a),P=_()(k),x=a("Button"),M=Object(m.withBaobab)({name:"MMOrganicSnippetButton",events:{onClick:Object(m.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.onClick;return c.a.createElement(I,{className:x,width:"max",theme:"action",size:"m",type:"link",target:"_blank",url:t,onClick:n},P("В магазин",{context:"Надпись на кнопке перехода в магазин"}))}),N=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},R=Object(u.a)(l.a);function T(e,t,n,r,o,i,a){return Object(b.b)(e,t,{path:""+Object(y.b)(e)+a,redirUrl:n,pos:a?r:"",reqid:i},{href:o})}var D=Object(m.withBaobab)({name:"OrganicSnippet",events:{onShow:Object(m.logTech)("show",function(e,t){var n=e.props,r=N(t,1)[0],o=n.extra,i=n.pos;if(r&&o)return Object(b.b)(r,{"-pos":i,"-type":o.type,"-view":o.view},void 0,{href:n.url})})}})(function(e){var t=e.redirUrl,n=e.url,r=e.text,o=e.domain,i=e.title,c=e.favicon,u=e.pos,l=e.reqid,f=e.commercialPath,y=e.rimPos,O=e.rimid,w=e.path,C=e.extra,E=e.aside,j=e.onShow,S=e.showStoreButton,_=e.minified,k=Object(v.b)();s.useEffect(function(){j&&C&&j(k.organic.shown)},[n,j,C]);var I=k.organic,P=I.path,x=I.title,N=I.button,D=s.useMemo(function(){var e={"-pos":u};return"undefined"!==typeof y&&(e["-rim_id"]=O,e["-rim_index"]=y),e},[u,O,y]),L=s.useMemo(function(){return{attrs:(Object(b.a)(k.organic.path)||{}).attrs}},[k.organic.path,b.a]),A=s.useMemo(function(){return{url:t,counter:T(P,D,n,u,t,l,f),logNode:L}},[t,o,P,f,D,u,l,n]),B=s.useMemo(function(){return w&&w.length?w:[{text:o.toLowerCase()}]},[o,w]),F=s.useMemo(function(){return{name:"title",events:{onClick:Object(m.logClick)(T(x,D,n,u,t,l,f))},attrs:(Object(b.a)(k.organic.title)||{}).attrs}},[t,D,x,f,n,u,l,k.organic.title,b.a]),U=T(N,D,n,u,t,l,f);return s.createElement("div",{className:a()},s.createElement("div",{className:a("TitleWrap")},s.createElement(R,{className:a("Title",[h]),theme:"normal",url:t,key:u,logNode:F},s.createElement(p.a,null,i)),E&&s.createElement("div",{className:a("Aside")},E)),s.createElement(d.a,{className:a("Path"),favicon:c?s.createElement(g.a,{favicon:c}):void 0,link:A,items:B}),s.createElement("div",{className:a("Text")},s.createElement(p.a,null,r)),!_&&S?s.createElement(M,{url:t||n,counter:U}):null)}),L=n(25),A=Object(L.d)(function(e){var t,n=Object(y.c)(e),r=Object(y.j)(e)||{},o=r.snippet||{},i=o.title,a=void 0===i?"":i,s=o.redirUrl,c=void 0===s?"":s,u=o.url,l=void 0===u?"":u,d=o.text,p=void 0===d?"":d,f=o.domain,h=void 0===f?"":f,m=o.shopScore,v=o.path,g=void 0===v?[]:v,b=o.extra,O=Object(y.d)(e,Object(y.e)(r)),w=r.commercialSource||"market",C=r.isMarketIncut?"/commercial/"+w:"",E=null===(t=e.experiments)||void 0===t?void 0:t.organicSnippetStoreButtonThreshold,j=!1;return(e.globalContext.isCommercialEnabled||e.globalContext.isCommercialQuery)&&E&&m&&!(null===r||void 0===r?void 0:r.marketSnippet)&&(j=m>Number(E)),{title:a,text:p,reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,rimid:r&&r.rimid,commercialPath:C,domain:h,favicon:O&&O.data,showStoreButton:j,url:l,redirUrl:c,path:g,extra:b}}),B=Object(i.cn)("MMMarketSnippet"),F=n(386),U=n(131),H=n(58),z=n(781),q=(n(647),Object(i.cn)("DiscountBadge")),W=function(e){var t=e.currentPrice,n=e.className,r=e.oldPrice,o=e.size,i=void 0===o?"s":o,a=Object(s.useMemo)(function(){return function(e,t){return Math.round((t-e)/t*100)}(t,r)},[t,r]);return a<0?null:c.a.createElement("div",{className:q({size:i},[n])},"-",a,"%")},G=(n(646),Object(i.cn)("MMBigPrice")),V=function(e){var t=e.className,n=e.value,r=e.currency,o=e.oldValue,i=s.useMemo(function(){return Object(H.classnames)(G(),t)},[t]);return s.createElement("div",{className:i},o&&s.createElement(W,{className:G("Discount"),currentPrice:n,oldPrice:o,size:"l"}),s.createElement(z.a,{value:n,oldValue:o,currency:r,rurSymbolFont:!0}))},Y=Object(m.withBaobab)({name:"MMMarketSnippetImage",events:{onClick:Object(m.logClick)(),onError:Object(m.logClick)()}})(function(e){var t=e.url,n=e.imageUrl,r=e.title,o=e.onClick,i=e.onError;return s.createElement("a",{href:t,className:B("ImageLink"),onClick:o,rel:"noopener",target:"_blank"},s.createElement("img",{className:B("Image"),key:n,src:n,alt:r,onError:i}))});function K(e,t,n){if(void 0===n&&(n=""),t&&t.market&&t.market[e]){var r=t.market[e];if(!r)return;var o=Object(y.a)(r,n);return Object(b.a)(o)}}function X(e){return function(t){var n=t.props;if(n.counters&&n.counters.market&&n.counters.market[e]){var r=n.counters.market[e];if(!r)return;var o=Object(y.a)(r,n.source||"");if(void 0===n.pos)return o;var i={};return i="shown"===e?{"-pos":n.pos}:{"-pos":n.pos,"-data-source":n.source,"-click-source":"commercial-snippet","-action-type":"greenurl"},Object(b.b)(o,i,void 0,{href:encodeURIComponent(n.url)})}}}n(648);var Q=n(12),Z=(n(649),Object(o.withBemMod)(Object(Q.b)(),{theme:"mm-secondary"})),J=(n(650),Object(o.compose)(Z,O.a,w.a,C.a,Object(m.withBaobab)({name:"button"}))(j.a)),$=function(e){var t=e.withImage,n=e.theme,r=e.url,o=e.onClick,i=e.logNode,a=e.children,c=e.addonBefore,u=e.addonAfter,l=e.className;return s.createElement(J,{theme:n||"action",className:B("Button",{withImage:t,theme:n},[l]),size:"m",type:"link",url:r,target:"_blank",onClick:o,logNode:i,children:a,addonAfter:u,addonBefore:c})},ee=n(204),te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},re=_()(ee),oe=re("В магазин",{context:"Надпись на кнопке, которая ведет на сайт продавца товара"}),ie=re("Купить на Маркете",{context:'Надпись на кнопке, которая ведет на товар на "Яндекс.Маркет"'}),ae=function(e){var t=e.isMarketPlace,n=void 0!==t&&t,r=ne(e,["isMarketPlace"]);return s.createElement($,te({},r,{className:B("Button",{withoutPrice:!0}),children:n?ie:oe}))},se=n(384),ce=n(385),ue=Object(se.a)(ce.a),le=function(e){var t=e.value;return s.createElement("div",{className:B("RatingLine")},s.createElement(ue,{type:"market",value:t}))},de=n(37),pe=(n(652),Object(o.createClassNameModifier)(Object(de.b)(),{type:"turbo"})),fe=n(756),he=n(97),me=(n(653),_()(ee)),ve=Object(fe.a)(de.a),ge=me("Магазин на Маркете",{context:'Подпись блока, который содержит данные из сервиса "Яндекс.Маркет"'}),be=me("Покупка на Маркете",{context:'Подпись блока, который по клику открывает страницу "Яндекс.Маркет"'}),ye=Object(o.composeU)(pe,fe.a)(de.a),Oe=new r.Registry({id:B()});Oe.set("MMMarketSnippetLabel",function(e){var t=e.isMarketPlace,n=void 0!==t&&t;return c.a.createElement("div",{className:B("MarketLabel")},!n&&c.a.createElement(ve,{className:B("MarketLabelIcon"),type:"market-logo"}),n?be:ge)}),Oe.set("MarketIcon",Object(he.a)({type:"market-logo"})(ye)),Oe.set("TruboIcon",Object(he.a)({type:"turbo"})(ye));n(644);var we=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ce=Object(u.a)(l.a),Ee=_()(ee),je=B("ImageContainer"),Se=B("Description"),_e=B("ShopInfo"),ke=B("BigPrice"),Ie=B("GreenUrl"),Pe=B("MarketPlaceFavicon"),xe=B("Content"),Me=B("Appendix"),Ne=B("AppendixDivider"),Re=B("TurboIcon"),Te=Object(r.withRegistry)(Oe)(function(e){var t=e.source,n=e.theme,o=e.url,i=e.domain,a=e.title,c=e.price,u=e.imageUrl,l=e.shopRating,p=e.modelRating,f=e.oldPrice,b=e.currency,y=e.text,O=e.buttonTheme,w=e.onShow,C=e.onButtonClick,E=e.onImageClick,j=e.onPathClick,S=e.onTitleClick,_=e.favicon,k=e.pos,I=e.isMarketPlace,P=e.children,x=Object(r.useComponentRegistry)(B()),M=x.MMMarketSnippetLabel,N=x.MarketIcon,R=x.TruboIcon;s.useEffect(function(){w&&w()},[o,w]);var T=function(e){var t=e.source,n=e.pos,r=e.url,o=Object(v.b)(),i=s.useMemo(function(){return{props:{source:t,counters:o,pos:n,url:r}}},[n,r,o,t]),a=s.useMemo(function(){var e=K("image",o,t);return{name:"image",events:{onClick:Object(m.logClick)(X("image").bind(null,i))},attrs:e&&e.attrs}},[o,i,t]),c=s.useMemo(function(){var e=K("title",o,t);return{name:"title",events:{onClick:Object(m.logClick)(X("title").bind(null,i))},attrs:e&&e.attrs}},[o,i,t]),u=s.useMemo(function(){var e=K("title",o,t);return{attrs:e&&e.attrs}},[o,t]);return{buttonLogNode:s.useMemo(function(){var e=K("button",o,t);return{events:{onClick:Object(m.logClick)(X("button").bind(null,i))},attrs:e&&e.attrs}},[o,i,t]),pathLinkLogNode:u,titleLogNode:c,imageLogNode:a}}({pos:k,url:o,source:t}),D=T.imageLogNode,L=T.titleLogNode,A=T.pathLinkLogNode,H=T.buttonLogNode,z=we(s.useState(!1),2),q=z[0],W=z[1];Object(F.a)(function(){W(!1)},[u]);var G=Boolean(u&&!q),Q="market"===t||"market-cpa"===t,Z=s.useMemo(function(){return[{url:o,text:I?Ee("Яндекс.Маркет",{context:'Подпись блока, который содержит данные из сервиса "Яндекс.Маркет"'}):i,onClick:j,logNode:A}]},[o,i,I,j,A]),J=p&&0!==Number(p),$=p&&J&&s.createElement("div",{className:B("ModelRating",{level:p&&Math.floor(Number(p)),type:G?"image-sticker":"title-suffix"})},function(e){return parseFloat(e).toFixed(1).replace(".",",")}(p)),ee=s.createElement("div",{className:je},s.createElement(Y,{url:o,imageUrl:u,title:a,onClick:E,onError:function(){return W(!0)},logNode:D}),G&&$),te=s.createElement(Ce,{className:B("Title",{withModelRating:!G&&Boolean($)},[h]),theme:"normal",url:o,onClick:S,logNode:L},a,!G&&$),ne=s.createElement("div",{className:Se},y),re=s.createElement(le,{value:l}),oe=void 0;I?oe=s.createElement(N,{className:Pe}):_&&(oe=s.createElement(g.a,{favicon:_}));var ie=s.createElement("div",{className:_e},s.createElement(d.a,{className:Ie,favicon:oe,items:Z}),"turbo"===t&&s.createElement(R,{className:Re}),"market"===t&&!I&&re),se=s.createElement(s.Fragment,null,s.createElement(V,{value:c,oldValue:f,currency:b||"RUR",className:ke}),s.createElement(ae,{url:o,withImage:G,isMarketPlace:I,theme:O,onClick:C,logNode:H}));return s.createElement("div",{className:B({source:t,theme:n,withImage:G,withDescription:!0},[U.a])},Q&&s.createElement(M,{isMarketPlace:I}),s.createElement("div",{className:xe},s.createElement("div",{className:B("Info",{withImage:G})},G&&ee,te,ie,y?ne:null,se)),P&&s.createElement("div",{className:Me},s.createElement("div",{className:Ne}),P))}),De=Object(v.d)(Object(m.withBaobab)({name:"MarketSnippet",events:{onShow:Object(m.logTech)("show",X("shown")),onPathClick:Object(m.logClick)(X("path"))}})(Te)),Le=n(59),Ae=function(){return(Ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Be=Object(o.compose)(Object(L.d)(function(e){var t,n=Object(y.j)(e),r=n&&n.marketSnippet,o=r&&Object(y.d)(e,r.punycode||r.domain),i=e.config.marketSnippetParams||{},a=i.experiments,s=void 0===a?{}:a,c=i.buttonTheme;return Ae(Ae({experiments:s,buttonTheme:"turbo"===(null===(t=null===n||void 0===n?void 0:n.marketSnippet)||void 0===t?void 0:t.source)?"mm-secondary":c},n&&n.marketSnippet),{pos:n&&n.pos,favicon:o&&o.data})}),Object(Le.a)(["domain","title","url","price"])),Fe=n(1008),Ue=n(377),He=n(359),ze=Object(i.cn)("MMViewerTags"),qe=n(203),We=n(10),Ge=n(149);n(667);var Ve=s.memo(function(e){var t=e.text,n=e.tld,r=e.target,o=e.onClick,i=e.onVisible,a=e.expRedesign,c=s.useMemo(function(){return function(e,t){return Object(Ge.a)("images",e,{text:t,source:"related-duck"})}(n,t)},[n,t]),u=s.useCallback(function(e){return function(e,t){if(e&&e.parentElement){var n=e.parentElement.getBoundingClientRect().bottom;e.getBoundingClientRect().bottom>n||t&&t()}}(e,i)},[i]),l=s.useCallback(function(e){return o&&o(e,c)},[o,c]);return s.createElement("a",{ref:u,className:ze("Item",{expRedesign:a}),href:c,target:r||"_blank",onClick:l},t)}),Ye=Object(m.withBaobab)({name:"tag"})(Ve),Ke=s.memo(function(e){var t=e.expRedesign,n=e.className;return s.createElement("span",{className:ze("Item",{blink:!0,expRedesign:t},[n])})}),Xe={more:{icon:c.a.createElement("g",{fill:"currentColor",fillRule:"evenodd"},c.a.createElement("path",{d:"M8.75 0.5L5 4.1L1.25 0.5L0.5 1.22L5 5.5L9.5 1.22L8.75 0.5Z"})),width:10,height:6}},Qe=function(e){var t=e.className,n=e.icon,r=Xe[n],o=r.icon,i=r.width,a=r.height;return c.a.createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+i+" "+a,width:12,height:12},o)},Ze=(n(670),function(e){var t=e.onClick;return c.a.createElement("div",{className:ze("Item",{expRedesign:!0},[ze("ItemMore")]),onClick:t},c.a.createElement(Qe,{className:ze("ItemMoreIcon"),icon:"more"}))});var Je=function(e,t){var n=function(e){var t=Object(s.useRef)();return Object(s.useEffect)(function(){t.current=e}),t.current}(t);n&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,t)||e()};var $e,et=Object(i.cn)("FlexLineExpandable"),tt=(n(669),function(e){var t=e.margin,n=e.width,r=e.onClick,o=e.children;return c.a.createElement("div",{className:et("Item"),style:{marginLeft:t,marginTop:t,width:n,maxWidth:"calc(100% - "+t+"px)"},onClick:r},o)}),nt=(n(668),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a});!function(e){e.calculating="calculating",e.fold="fold",e.expanded="expanded"}($e||($e={}));var rt=function(e){var t=e.className,n=e.items,r=e.more,o=e.margin,i=e.itemMinWidth,a=e.lines,u=void 0===a?1:a,l=nt(Object(s.useState)({capacity:n.length}),2),d=l[0],p=l[1],f=nt(Object(s.useState)(!1),2),h=f[0],m=f[1],v=Object(s.useCallback)(function(){return m(!0)},[]),g=function(e,t){var n=e.items,r=e.more,o=e.margin,i=e.itemMinWidth,a=$e.fold;return Je(function(){return a=$e.calculating},[]),Je(function(){return a=$e.calculating},[n,r,o,i]),Je(function(){return t=!1},[n]),t?$e.expanded:a}(e,h),b=Object(s.useCallback)(function(e){if(g===$e.calculating&&e){var t=function(e,t,n,r){var o=e.children,i=o&&o[o.length-1],a=o.length-1,s=ot(e)-t;if(!i||!o||s<=0)return;for(var c=ot(i)+t,u=1,l=-t,d=0;d<a;d++){var p=o[d],f=ot(p),h=l+t+f,m=d===a-1,v=u===r;if(v){if(m&&h<=s)return{capacity:a};var g=s-h-c;if(g<0){var b=void 0;return g+f>=n&&(b=Math.floor(g+f)),{capacity:d+(b?1:0),lastWidth:b}}l+=t+f}else{if(m)return{capacity:a};var y=s-h;y>=0?l+=t+f:(u++,l=-t,d--)}}return{capacity:a}}(e,o,i,u);t&&(p(t),m(!1))}},[g,o,i,p,u]),y=g===$e.fold?d.capacity:n.length,O=d.capacity===n.length&&!d.lastWidth;return c.a.createElement("div",{className:et({state:g},[t]),style:{marginLeft:-o,marginTop:-o},ref:b},n.slice(0,y).map(function(e,t){return c.a.createElement(tt,{key:t,margin:o,width:t===y-1&&g===$e.fold?d.lastWidth:void 0},e)}),g===$e.calculating||g===$e.fold&&!O?c.a.createElement(tt,{margin:o,onClick:v},r):null)};function ot(e){return e.getBoundingClientRect().width}n(666);var it=Object(i.cn)("MMViewerTagsPlaceholder"),at=function(e){for(var t=e.lines,n=void 0===t?1:t,r=new Array(n),o=0;o<n;o++)r[o]=c.a.createElement(c.a.Fragment,{key:o},c.a.createElement(Ke,{expRedesign:!0,className:it("Item",{small:o%2===1})}),c.a.createElement(Ke,{expRedesign:!0,className:it("Item",{small:o%2===0})}));return c.a.createElement("div",{className:it()},r)},st=(n(665),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ct=function(){return(ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ut=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},lt=Object(i.cn)("MMViewerTags");var dt=function(e){var t=Object(y.j)(e),n=Object(y.c)(e);return{reqid:n&&n.reqid,pos:n&&n.pos,rimPos:e.rimSelectedIdx,rimid:t&&t.rimid,openServiceOnNewTab:e.config.openServiceOnNewTab,tld:e.globalContext.tld,tagsItem:Object(qe.h)(e,Object(qe.i)(Object(y.j)(e))),expRedesignLines:function(e){var t=e.globalContext,n=e.experiments,r=void 0===n?{}:n;if("number"!==typeof r.duckRedesign)return;if(t.isCommercialEnabled||t.isCommercialQuery)return 0;return r.duckRedesign}(e)}};var pt,ft=function(e){return Object(L.d)(dt)(e)}(function(e){var t=Object(m.withBaobab)({name:"tags"})(e);return function(e){return 0===e.expRedesignLines?null:s.createElement(v.a,null,function(n){return s.createElement(t,ct({logNode:{events:{onTagShow:Object(m.logTech)("show",function(e,t){var r=ut(t,2),o=r[0],i=r[1];return Object(b.b)(n.tagsShown,o,i)})}},tagClickedCounter:n.tagsClicked},e))})}}(function(e){function t(t){var n=e.call(this,t)||this;return n.visibleTagsCount=0,n.onTagVisible=n.onTagVisible.bind(n),n.handleMore=n.handleMore.bind(n),n}return st(t,e),t.prototype.handleMore=function(){var e=this.props,t=e.reqid,n=e.pos;Object(We.a)("/image/new/preview/tags/more",{reqid:t,vars:{pos:n}})},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.tagsItem,n=e.reqid,r=e.rimPos,o=e.pos,i=e.rimid,a=e.onTagShow;if(t&&t.data&&t.data.length&&this.shownData!==t.data){if(a){var s={"-pos":o,"-visibleTags":this.visibleTagsCount};"undefined"!==typeof r&&(s["-rim_id"]=i,s["-rim_index"]=r),a(s,{reqid:n})}this.shownData=t.data}},t.prototype.render=function(){var e=this.props,t=e.tagsItem,n=e.expRedesignLines,r=Boolean(n);return this.visibleTagsCount=0,t?r?t.data&&t.data.length?s.createElement("div",{className:lt({expRedesign:!0})},s.createElement(rt,{items:this.renderItems(),more:s.createElement(Ze,{onClick:this.handleMore}),margin:6,itemMinWidth:65,lines:n})):null:t.data&&t.data.length?s.createElement("div",{className:lt()},this.renderItems()):null:s.createElement("div",{className:lt()},r?s.createElement(at,{lines:n}):s.createElement(s.Fragment,null,s.createElement(Ke,null)," ",s.createElement(Ke,null),s.createElement(Ke,null)," ",s.createElement(Ke,null)))},t.prototype.renderItems=function(){var e=this,t=this.props,n=t.tagsItem,r=t.expRedesignLines,o=t.reqid,i=t.rimPos,a=t.rimid,c=t.pos,u=t.tagClickedCounter,l=t.onTagClick,d=t.tld,p=Boolean(r),f=Object(b.a)(u),h={"-pos":c};return"undefined"!==typeof i&&(h["-rim_id"]=a,h["-rim_index"]=i),n&&n.data&&n.data.length?n.data.map(function(t,n){return s.createElement(Ye,{onVisible:e.onTagVisible,onClick:l,tld:d,key:t,text:t,target:e.props.openServiceOnNewTab?"_blank":"_self",expRedesign:p,logNode:{attrs:f&&f.attrs,events:{onClick:Object(m.logClick)(Object(b.b)(u,ct(ct({},h),{"-tag-position":n,"-text":t}),{reqid:o,pos:c}))}}})}):[]},t.prototype.onTagVisible=function(){this.visibleTagsCount++},t}(s.Component))),ht=n(122),mt=n(378),vt=n(16),gt=n(148),bt=Object(i.cn)("MMSchemaOrgSnippet"),yt=n(777),Ot=n(292),wt=(n(659),Object(yt.a)(Ot.a)),Ct=function(e){var t=e.url,n=e.redirUrl,r=e.onClick,o=e.logNode,i=e.children,a=e.minified,c=bt("Title",{minified:a},[h]);return s.createElement(wt,{className:c,theme:"normal",url:n||t,onClick:r,logNode:o},i)};!function(e){e.soldOut="soldOut",e.inStock="inStock",e.preOrder="preOrder"}(pt||(pt={}));var Et,jt=n(207),St=(n(660),_()(jt)),_t=bt("GreenUrl"),kt=bt("GreenUrlLine"),It=bt("Favicon"),Pt=bt("GreenUrlSeparator"),xt=((Et={})[pt.inStock]=St("В наличии",{context:"Товар есть в наличии"}),Et[pt.preOrder]=St("Предзаказ",{context:"Товар доступен по предзаказу"}),Et[pt.soldOut]=St("Товар закончился",{context:"Товара нет в наличии"}),Et),Mt=function(e){var t=e.availability,n=t&&xt[t];return n?s.createElement(s.Fragment,null,s.createElement("div",{className:Pt}),s.createElement("div",{className:bt("Availability",{type:t})},n)):null},Nt=Object(m.withBaobab)({name:"MMSchemaOrgSnippetGreenUrl",events:{onClick:Object(m.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.redirUrl,r=e.domain,o=e.onClick,i=e.favicon,a=e.availability,c=s.useMemo(function(){return{name:"path",attrs:e.logNode&&e.logNode.attrs}},[e.logNode]),u=s.useMemo(function(){return[{url:n||t,text:r,onClick:o}]},[n,t,r,o]);return s.createElement("div",{className:kt},s.createElement(d.a,{logNode:c,className:_t,favicon:i?s.createElement(g.a,{className:It,favicon:i}):void 0,items:u}),s.createElement(Mt,{availability:a}))}),Rt=(n(663),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),Tt=_()(jt),Dt=bt("Description"),Lt=bt("ReadMore"),At=Object(yt.a)(Ot.a),Bt=Object(m.withBaobab)({name:"MMSchemaOrgSnippetDescription",events:{onExpand:Object(m.logClick)(function(e){var t=e.props;return Object(b.b)(t.readMoreCounter,{"-action":"expand"})}),onCollapse:Object(m.logClick)(function(e){var t=e.props;return Object(b.b)(t.readMoreCounter,{"-action":"collapse"})})}})(function(e){var t=e.text,n=e.onExpand,r=e.onCollapse,o=e.fullText,i=void 0===o?"":o,a=e.readMoreEnabled,c=(void 0===a||a)&&Boolean(i)&&i.length!==t.length,u=Rt(s.useState(!0),2),l=u[0],d=u[1],f=s.useCallback(function(){l?n&&n():r&&r(),d(!l)},[l,n,r]);return c?s.createElement("div",{className:Dt},s.createElement(p.a,{start:"<hl>",end:"</hl>"},l?t:i),s.createElement(At,{onClick:f,className:Lt,theme:"normal"},l?Tt("Читать еще",{context:"Развернуть описание схема-орг сниппета"}):Tt("Скрыть",{context:"Свернуть описание схема-орг сниппета"}))):s.createElement("div",{className:Dt},s.createElement(p.a,{start:"<hl>",end:"</hl>"},t))}),Ft=(n(664),Object(o.compose)(O.a,w.a,C.a,E.a)(j.a)),Ut=bt("Button"),Ht=_()(jt),zt=Object(m.withBaobab)({name:"MMSchemaOrgSnippetButton",events:{onClick:Object(m.logClick)(function(e){return e.props.counter})}})(function(e){var t=e.url,n=e.onClick;return c.a.createElement(Ft,{className:Ut,theme:"action",width:"max",size:"m",type:"link",target:"_blank",url:t,onClick:n},Ht("В магазин",{context:"Надпись на кнопке перехода в магазин"}))}),qt=(n(658),Object(i.cn)("OneLine")),Wt=(n(662),function(e){var t=e.className,n=e.children;return c.a.createElement("div",{className:qt(null,[t])},n)}),Gt=n(684),Vt=(n(661),_()(Gt)),Yt=s.memo(function(e){var t=e.minified;return s.createElement(Wt,{className:Object(i.cn)("MMSchemaOrgDisclaimer")({minified:t})},Vt("Цена и наличие товара могли измениться",{context:"Дисклеймер о несоответствии информации о товаре. https://nda.ya.ru/t/dtTnE1gK3YY8cW"}))}),Kt=function(){return(Kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Xt=bt("Content"),Qt=bt("Info"),Zt=bt("ShopInfo"),Jt=bt("HeaderLine"),$t=bt("TitlePriceSeparator"),en=bt("PriceWrap"),tn=bt("Price"),nn={},rn=Object(o.compose)(v.d,Object(m.withBaobab)({name:"MMSchemaOrgSnippetPresenter",events:{onShow:Object(m.logClick)(function(e){var t,n=e.props;return Object(b.b)(null===(t=n.counters.schemaOrg)||void 0===t?void 0:t.shown,{"-pinned":Number(Boolean(n.minified)),"-pos":n.pos,"-availability":n.availability},void 0,{href:n.url})})}}))(function(e){var t,n,r,o,i,a,c=e.minified,u=void 0!==c&&c,l=e.onShow,d=e.favicon,p=e.domain,f=e.title,h=e.url,v=e.redirUrl,g=e.price,y=e.currency,O=e.text,w=e.availability,C=e.fullText,E=e.pos,j=e.counters,S=e.aside,_=s.useCallback(function(e){return Object(b.b)(e,{"-pos":E,"-pinned":Number(u),"-availability":w},void 0,{href:h})},[E,u,w,h]);return s.useEffect(function(){nn.url!==h&&(nn={url:h}),u||nn.default||(nn.default=!0,l&&l()),u&&!nn.pinned&&(nn.pinned=!0,l&&l())},[h,l,u]),s.createElement("div",{className:bt({minified:u},[U.a])},s.createElement("div",{className:Xt},s.createElement("div",{className:Qt},s.createElement("div",{className:bt("HeaderWrap")},s.createElement("div",{className:Jt},s.createElement(Ct,{minified:u,url:h,redirUrl:v,logNode:Kt(Kt({name:"MMSchemaOrgSnippetTitle"},Object(b.a)(null===(t=j.schemaOrg)||void 0===t?void 0:t.title)||{}),{events:{onClick:Object(m.logClick)(_(null===(n=j.schemaOrg)||void 0===n?void 0:n.title))}})},f),u?s.createElement("span",{className:$t},"–"):null,u?s.createElement(z.a,{className:tn,value:g,rurSymbolFont:!0,currency:y||"RUR"}):null),S&&s.createElement("div",{className:bt("Aside")},S)),s.createElement("div",{className:Zt},s.createElement(Nt,{logNode:Object(b.a)(null===(r=j.schemaOrg)||void 0===r?void 0:r.path),counter:_(null===(o=j.schemaOrg)||void 0===o?void 0:o.path),availability:w,favicon:d,url:h,redirUrl:v,domain:p})),u?s.createElement(Yt,{minified:!0}):null,u?null:s.createElement(s.Fragment,null,O?s.createElement(Bt,{key:h,text:O,fullText:C,readMoreEnabled:!0,readMoreCounter:_(null===(i=j.schemaOrg)||void 0===i?void 0:i.readMore)}):null,s.createElement(Yt,null),s.createElement("div",{className:en},s.createElement(V,{className:tn,value:g,currency:y||"RUR"})),s.createElement(zt,{url:h,counter:_(null===(a=j.schemaOrg)||void 0===a?void 0:a.button)})))))}),on=function(){return(on=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},an=Object(o.compose)(Object(L.d)(function(e){var t=Object(y.j)(e),n=t&&t.schemaOrgSnippet,r=n&&Object(y.d)(e,n.punycode||n.domain);return n&&"schemaorg"===n.source?on(on({},t&&t.schemaOrgSnippet),{shownImage:t,pos:t&&t.pos,favicon:r&&r.data}):{}}),Object(Le.a)(["source"])),sn=Object(o.compose)(an)(rn),cn=new r.Registry({id:Object(f.a)()});cn.set(a(),A(D)),cn.set(B(),Be(De)),cn.set(Object(Fe.b)(),Object(o.compose)(He.a,Ue.a)(Fe.a)),cn.set(bt(),sn),cn.set(ze(),ft),cn.set(Object(ht.a)(),mt.a),cn.set(Object(vt.a)(),gt.a)},381:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r=n(1),o=n(243),i=n(67),a=(n(562),Object(r.withBemMod)(Object(i.a)(),{edgeCentered:"left"})),s=(Object(r.withBemMod)(Object(i.a)(),{edgeCentered:"right"}),Object(r.withBemMod)(Object(i.a)(),{edgeCentered:"both"}),n(563),Object(r.withBemMod)(Object(i.a)(),{vertical:!0})),c=n(0),u=n.n(c),l=n(4),d=Object(l.cn)("MMThumbImage"),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=(n(561),function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),h=function(e,t){return function(n){var r=t(n);return function(t){return t.fit===e?u.a.createElement(r,p({},t)):u.a.createElement(n,p({},t))}}}("square",function(e){return function(t){var n=t.width,r=void 0===n?0:n,o=t.height,i=void 0===o?0:o,a=t.targetSize,s=t.fit,l=t.src,p=t.className,h=Object(c.useMemo)(function(){return function(e,t,n){var r;if(t&&e&&t>e&&t>n&&(r=(t/.02618-e/.02)/(t-n)),r)return r+"%"}(r,i,a)},[r,i,a]),m=i<a||r<a,v=i<a,g=Object(c.useMemo)(function(){return{yCentered:v,small:m}},[m,v]),b=Object(c.useMemo)(function(){return{backgroundPositionY:h,backgroundImage:"url("+l+")"}},[h,l]);return u.a.createElement(e,f({},t,{className:d({fit:s},[p])}),u.a.createElement("div",{className:d("Image",g),style:b}))}}),m=n(3),v=Object(l.cn)("Cover"),g=v("StickersWrapper"),b=(n(559),u.a.memo(function(e){var t=e.top,n=e.topLeft,r=e.topRight,o=e.bottom,i=e.bottomLeft,a=e.bottomRight;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement("div",{className:v("Sticker",{top:!0})},t),n&&u.a.createElement("div",{className:v("Sticker",{topLeft:!0})},n),r&&u.a.createElement("div",{className:v("Sticker",{topRight:!0})},r),o&&u.a.createElement("div",{className:v("Sticker",{bottom:!0})},o),i&&u.a.createElement("div",{className:v("Sticker",{bottomLeft:!0})},i),a&&u.a.createElement("div",{className:v("Sticker",{bottomRight:!0})},a))})),y=(n(560),u.a.memo(function(e){var t=e.className,n=e.height,r=e.children,o=e.forwardRef,i=e.onHover,a=e.wrapHeight,s=Object(m.__rest)(e,["className","height","children","forwardRef","onHover","wrapHeight"]),l=Object(c.useCallback)(function(e){i&&i("mouseenter"===e.type,o)},[i,o]),d=u.a.createElement(b,Object(m.__assign)({},s));return u.a.createElement("div",{className:v(null,[t]),ref:o,style:{height:n},onMouseEnter:i?l:void 0,onMouseLeave:i?l:void 0},r&&u.a.createElement("div",{className:v("Content")},r),"undefined"!==typeof a?u.a.createElement("div",{className:g,style:{height:a}},d):d)})),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},C=n(756),E=n(37),j=n(97),S=n(2),_=n(128),k=new S.Registry({id:Object(_.a)()}),I=function(e){return function(t){var n=t.stickers,r=w(t,["stickers"]);return u.a.createElement(y,O({},n),u.a.createElement(e,O({},r)))}}(h(function(e){var t=e.className,n=e.children;return u.a.createElement("div",{className:d({},[t])},n)})),P=Object(r.compose)(a,s)(o.a),x=Object(r.compose)(C.a)(E.a);k.set("Gallery",P),k.set("Thumb",I),k.set("Icon",Object(j.a)({type:"market-logo"})(x))},382:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var r=n(0),o=n(1),i=n(6),a=n.n(i),s=n(5),c=n(990),u=n(37),l=(n(589),Object(o.createClassNameModifier)(Object(u.b)(),{type:"favorites-empty"})),d=(n(590),Object(o.createClassNameModifier)(Object(u.b)(),{type:"favorites-filled"})),p=n(35),f=n(36),h=n(130),m=n(23),v=n(81),g=n(171);var b=n(16),y=(n(588),n(34)),O=n(121),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=a()(O),E=Object(h.a)(f.b),j=Object(o.composeU)(l,d)(u.a),S=Object(b.a)("AddToCollection"),_=Object(b.a)("FavoritesPopup"),k=function(e){var t=e.vars,n=e.reqid,o=e.text,i=e.innerRef;return r.createElement(p.a,null,function(e){return r.createElement(E,{className:S,text:o,icon:r.createElement(j,{type:"favorites-filled"}),url:"/collections/user/",type:f.a.link,forwardRef:i,logNode:{events:{onClick:Object(s.logClick)(Object(m.b)(e.favoriteLink,t,{reqid:n}))}}})})},I=function(e){var t=e.onClick,n=e.vars,o=e.reqid,i=e.text,a=e.innerRef;return r.createElement(p.a,null,function(e){return r.createElement(E,{className:S,text:i,icon:r.createElement(j,{type:"favorites-empty"}),onClick:t,forwardRef:a,logNode:{events:{onClick:Object(s.logClick)(Object(m.b)(e.favoriteAdd,n,{reqid:o}))}}})})},P=function(e){function t(t){var n=e.call(this,t)||this;return n.state={itemSavedToFavorite:!1,wasMounted:!1},n.wasMounted=!1,n.domNode=r.createRef(),n.getAddButton=n.getAddButton.bind(n),n.getGotoButton=n.getGotoButton.bind(n),n}return w(t,e),t.prototype.componentDidMount=function(){this.setState({wasMounted:!0})},t.prototype.componentWillUnmount=function(){this.setState({wasMounted:!1})},t.prototype.render=function(){var e,t=this.props,n=t.image,o=t.loggedIn,i=t.loginUrl,a=t.isFavorite,s=t.view;return e=this.state.wasMounted?r.createElement(c.Favorites,{loginUrl:i,card:function(e){var t=function(e){if(e)return e.dups&&e.dups.length?e.dups:e.images&&e.images.length?e.images:e.preview&&e.preview.length?e.preview:void 0}(e),n=Object(g.a)(e),r=n.title||"",o=t&&t[0],i=o?o.origin&&o.origin.url||o.url:"";return{doc_id:e.docid,description:r,content:(t||[]).map(function(e){return{source_type:"image",source:{url:function(e){return e?e.origin&&e.origin.url||e.url:""}(e)}}}),source_meta:{page_title:r,page_url:n.url||e.imgHref||i,page_domain:n.domain||""}}}(n),sourceName:"lego_img_viewer",loggedIn:Boolean(o),goTo:this.getGotoButton,add:this.getAddButton,isFavorite:a,scope:this.domNode,popupMainOffset:s===y.b.compact?void 0:-1,popupClassName:_,popupZIndex:1}):a?this.getGotoButton({}):this.getAddButton({onClick:v.a}),r.createElement("span",{ref:this.domNode,className:Object(b.a)("AddToCollectionWrapper",{view:s,wide:n.previewUrl?void 0:"yes"})},e)},t.prototype.getAddButton=function(e){var t,n=this.props,o=n.image,i=n.reqid,a=n.view,s=e.innerRef,c=e.onClick;return t=a===y.b.twoLines&&o.previewUrl?"":a===y.b.twoLines&&!o.previewUrl||a===y.b.compact?C("В коллекцию",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqR"}):C("Добавить в коллекцию",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqR"}),r.createElement(I,{text:t,vars:{"-pos":o.pos},reqid:i,onClick:c,innerRef:s})},t.prototype.getGotoButton=function(e){var t,n=this.props,o=n.image,i=n.reqid,a=n.view,s=e.innerRef;return t=a===y.b.twoLines&&o.previewUrl?"":a===y.b.twoLines&&!o.previewUrl||a===y.b.compact?C("Перейти",{context:"Кнопка в просмотрщике картинки https://nda.ya.ru/3UYbqY"}):C("Перейти в коллекции",{context:"Кнопка в просмоторщике картинки https://nda.ya.ru/3UYbqY"}),r.createElement(k,{text:t,vars:{"-pos":o.pos},reqid:i,innerRef:s})},t}(r.Component)},383:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(1),i=n(52),a=(n(570),r.memo(function(){return r.createElement("i",{className:Object(i.a)("Icon")})})),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=Object(o.withBemMod)(Object(i.a)(),{type:"*"},function(e){return function(t){return r.createElement(e,s({},t,{className:Object(i.a)({type:!0},[t.className])}),t.children,r.createElement(a,null))}})},384:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),o=n.n(r),i=n(1),a=n(756),s=n(37),c=n(205),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=Object(i.compose)(a.a)(s.a),d=Object(i.withBemMod)(c.c,{type:"market"},function(e){return function(t){var n=Object(r.useCallback)(function(e){var t=e.className;return o.a.createElement(l,{className:t,type:"market-logo"})},[]);return o.a.createElement(e,u({icon:n},t))}})},385:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=n.n(r),i=n(205),a=(n(645),function(e){var t=e.className,n=void 0===t?"":t,r=e.value,a=e.icon,s=e.bold,c=e.children,u=function(e,t){return void 0===t&&(t=","),("string"===typeof e?parseFloat(e):e).toFixed(1).replace(".",t)}(r);return o.a.createElement("div",{className:Object(i.a)(null,[n]),role:"text"},a?a({className:i.b}):null,s?o.a.createElement("b",null,u):u,c)})},386:function(e,t,n){"use strict";var r=n(0),o=n(190);t.a=function(e,t){var n=Object(o.a)();Object(r.useEffect)(function(){if(!n)return e()},t)}},392:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),o=n(0),i=function(e,t){var n=Object(o.useRef)(!0);Object(o.useEffect)(function(){n.current?n.current=!1:e()},Object(r.__spread)([e],t))}},393:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(11),i={value:0,id:0},a=Object(r.createContext)(i);function s(e){void 0===e&&(e="xuniq");var t=Object(r.useContext)(a),n=Object(r.useMemo)(function(){return e+"-"+t.id+"-"+ ++t.value},[]);return console.assert(Object(o.a)()||t!==i,"При серверном рендеринге необходимо обернуть приложение в <SSRProvider> для синхронизации id между сервером и клиентом."),n}},396:function(e,t,n){},4:function(e,t,n){"use strict";e.exports=n(87)},400:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){"use strict";var r;!function(e){e[e.disabled=0]="disabled",e[e.enabled=1]="enabled"}(r||(r={}))},403:function(e,t){},404:function(e,t,n){"use strict";var r,o;!function(e){e.organic="organic",e.wizard="wizard",e.adv="adv"}(r||(r={})),function(e){e.adv="banner"}(o||(o={}))},405:function(e,t){},406:function(e,t){},407:function(e,t){},408:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(3),o=n(0),i=n.n(o),a=n(1),s=n(124),c=(n(597),Object(a.withBemMod)(Object(s.b)(),{theme:"strong"},function(e){return function(t){t.theme;var n=Object(r.__rest)(t,["theme"]);return i.a.createElement(e,Object(r.__assign)({},n))}}))},409:function(e,t,n){},41:function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,a={},s=0,c=0;function u(e){var t="";do{t=o[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function l(){var e=u(+new Date);return e!==r?(s=0,r=e):e+"."+u(s++)}for(;c<i;c++)a[o[c]]=c;l.encode=u,l.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*i+a[e.charAt(c)];return t},e.exports=l},410:function(e,t){},411:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},417:function(e,t,n){},42:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMSidebar")},420:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e){var t=e.logged,n=e.counterParams,r=void 0===n?{}:n;this.logged=t,this.params=r}return e.prototype.send=function(e,t,n){var r=(this.logged?"-authorized=1":"-authorized=0")+(n?","+n:"");this.counter(e,r,t,this.params)},e.prototype.counter=function(e,t,n,r){r=r||{};var o,i=["reqid","yuid","serpid","service","ui"].reduce(function(e,t){return e+(r[t]?"/"+t+"="+r[t]:"")},"");window.Ya.SerpContext&&window.Ya.SerpContext.noSignTechTable&&(o=window.Ya.SerpContext.noSignTechTable);var a=window.Ya.SerpContext&&window.Ya.SerpContext.noSignTechTables||{};a.favorites&&(o=a.favorites);var s=document&&document.location&&document.location.host&&document.location.host.match(/^.*(\..+)$/),c="//yandex"+(s&&s[1]||".ru")+"/clck/click/pid=902/cid="+n+"/dtype=stred"+(e?"/path="+e:"")+(t?"/vars="+t:"")+i+(o?"/table="+o:"");(new Date).getTime(),document.location.href,document.createElement("IMG").setAttribute("src",c)},e}()},421:function(e,t,n){"use strict";function r(e){var t=!1;try{var n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();if(!r)return!1;r.removeAllRanges(),r.addRange(n),t=document.execCommand("copy"),r.removeAllRanges()}catch(e){return!1}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.copyToBufferFromHtml=r,t.copyToBuffer=function(e){var t=document.createElement("div");t.textContent=e,document.body.appendChild(t);var n=r(t);return document.body.removeChild(t),n}},422:function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=n(98),u=[],l=[];function d(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function p(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach(function(r){var o=d(e[r]);o.loading?t.loading=!0:(t.loaded[r]=o.loaded,t.error=o.error),n.push(o.promise),o.promise.then(function(e){t.loaded[r]=e}).catch(function(e){t.error=e})})}catch(e){t.error=e}return t.promise=Promise.all(n).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function f(e,t){return s.createElement(function(e){return e&&e.__esModule?e.default:e}(e),t)}function h(e,t){var d,p;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var h=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:f,webpack:null,modules:null},t),m=null;function v(){return m||(m=e(h.loader)),m.promise}return u.push(v),"function"===typeof h.webpack&&l.push(function(){if(function(e){return"object"===r(n.m)&&e().every(function(e){return"undefined"!==typeof e&&"undefined"!==typeof n.m[e]})}(h.webpack))return v()}),p=d=function(t){function n(r){o(this,n);var a=i(this,t.call(this,r));return a.retry=function(){a.setState({error:null,loading:!0,timedOut:!1}),m=e(h.loader),a._loadModule()},v(),a.state={error:m.error,pastDelay:!1,timedOut:!1,loading:m.loading,loaded:m.loaded},a}return a(n,t),n.preload=function(){return v()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(h.modules)&&h.modules.forEach(function(t){e.context.loadable.report(t)}),m.loading){"number"===typeof h.delay&&(0===h.delay?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},h.delay)),"number"===typeof h.timeout&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},h.timeout));var t=function(){e._mounted&&(e.setState({error:m.error,loaded:m.loaded,loading:m.loading}),e._clearTimeouts())};m.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?s.createElement(h.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?h.render(this.state.loaded,this.props):null},n}(s.Component),d.contextTypes={loadable:c.shape({report:c.func.isRequired})},p}function m(e){return h(d,e)}m.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return h(p,e)};var v=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return s.Children.only(this.props.children)},t}(s.Component);function g(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then(function(){if(e.length)return g(e)})}v.propTypes={report:c.func.isRequired},v.childContextTypes={loadable:c.shape({report:c.func.isRequired}).isRequired},m.Capture=v,m.preloadAll=function(){return new Promise(function(e,t){g(u).then(e,t)})},m.preloadReady=function(){return new Promise(function(e,t){g(l).then(e,e)})},e.exports=m},423:function(e,t,n){"use strict";n.d(t,"a",function(){return $});var r=n(0),o=n.n(r),i=n(6),a=n.n(i),s=n(1),c=n(4),u=n(90),l=(n(596),Object(s.withBemMod)(Object(u.b)(),{theme:"normal"})),d=n(3),p=n(132),f=n(150);function h(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function m(e){return e?(e.nodeName||"").toLowerCase():null}function v(e){return"html"===m(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function g(e){var t=m(e);if(t&&["html","body"].indexOf(t)>=0)return e.ownerDocument.body;if(function(e){return e instanceof h(e).HTMLElement}(e)){var n=function(e){return h(e).getComputedStyle(e)}(e),r=n.overflow,o=n.overflowX,i=n.overflowY;if(/auto|scroll|overlay|hidden/.test(r+i+o))return e}return g(v(e))}var b,y=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},O=function(e,t){return e.indexOf("-"+t)>0},w={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:Object(p.a)()?document.body:null}},C={top:-9999,left:-9999},E=Object(s.withBemMod)(Object(u.b)(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=Object(r.createRef)(),n.tailRef=Object(r.createRef)(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=g(t),o="body"===m(r),i=n.concat(r);return o?i:i.concat(e(v(r)))}(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return y(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):y(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(O(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):O(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):O(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),y(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),O(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):O(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):O(n,"center")&&y(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return Object(d.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,r=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),i=Object(d.__rest)(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return Object(p.a)()&&void 0!==r&&r(this.getPossibleDrawingParams()),o.a.createElement(e,Object(d.__assign)({},i,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:Object(f.a)(this.popupRef,this.props.innerRef),tailRef:Object(f.a)(this.tailRef,this.props.tailRef),position:C}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,r={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},o=this.getPopupDimensions(this.popupRef),i=this.getAnchorDimensions(this.props.anchor),a=this.getViewportDimensions(),s=this.getScopeDimensions(this.props.scope),c=0;try{for(var u=Object(d.__values)(e),l=u.next();!l.done;l=u.next()){var p=l.value,f=this.getPopupPosition(p,i,o),h=this.getViewportFactor(f,a,o);if((h>c||this.state.direction===p)&&(r.popupPosition={top:f.top-(s.top+window.pageYOffset),left:f.left-(s.left+window.pageXOffset)},r.direction=p,c=h),c>.99)break}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(r.tailPosition=this.getTailPosition(r.direction,i,o)),r},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,s=i.height;t.area=r*o,t.height=Math.round(s),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return y(e,"bottom")?r.top=t.top+t.height+o.main:y(e,"top")?r.top=t.top-n.height-o.main:y(e,"left")?r.left=t.left-n.width-o.main:y(e,"right")&&(r.left=t.left+t.width+o.main),O(e,"right")?r.left=t.left+t.width-n.width-o.secondary:O(e,"left")?r.left=t.left+o.secondary:O(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:O(e,"top")?r.top=t.top+o.secondary:O(e,"center")&&(y(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:y(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,s=a?i:i/2,c=this.getOffsets();if(y(e,"bottom")?r.top=-s:y(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-s):y(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-s):y(e,"right")&&(r.left=-s),O(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-s-c.tail;else if(O(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-s+c.tail;else if(O(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-s-c.tail;else if(O(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-s+c.tail;else if(O(e,"center")){var u=a?s/2:s;y(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+c.tail:r.top=Math.ceil(n.popupHeight/2)-u+c.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),s=Math.max(e.top,t.top+o.viewport),c=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&s<c&&(r=(a-i)*(c-s)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),s=Math.floor(i.height),c=Math.floor(y(this.state.direction,"top")?a:a+s);if(c<n||n+r<c)return!1;var u=Math.floor(t.left),l=Math.floor(t.width),d=Math.floor(i.left),p=Math.floor(i.width),f=Math.floor(y(this.state.direction,"left")?d:d+p);if(!(f>=u&&u+l>=f))return!1}return!0},n}(r.PureComponent)).defaultProps=w,t}),j=n(425),S=n(408),_=(n(598),n(433)),k=n(991),I=n(174),P=(n(601),Object(s.withBemMod)(Object(I.b)(),{size:"xxs"})),x=n(111),M=(n(604),function(e){var t=e.side,n=e.provider,r=Object(d.__rest)(e,["side","provider"]);return n(R("Icon",{side:t},[r.className]))}),N=(n(605),function(e){var t=e.children,n=e.className,r=Object(d.__rest)(e,["children","className"]);return o.a.createElement("span",Object(d.__assign)({},r,{className:R("Text",null,[n])}),t)}),R=(n(603),Object(c.cn)("Button2")),T={autoComplete:"off",pressKeys:[x.a.SPACE,x.a.ENTER],prvntKeys:[],as:"button",type:"button"},D=((b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={pressed:!1},t.internalInnerRef=Object(r.createRef)(),t.onKeyDown=function(e){Object(x.b)(e.keyCode,t.props.pressKeys)&&(t.setState({pressed:!0}),Object(x.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault()),void 0!==t.props.onKeyDown&&t.props.onKeyDown(e)},t.onKeyUp=function(e){Object(x.b)(e.keyCode,t.props.prvntKeys)&&e.preventDefault(),Object(x.b)(e.keyCode,t.props.pressKeys)&&t.setState({pressed:!1}),void 0!==t.props.onKeyUp&&t.props.onKeyUp(e)},t.onClick=function(e){null!==t.internalInnerRef.current&&t.internalInnerRef.current.focus(),void 0!==t.props.onClick&&t.props.onClick(e)},t.onMouseDown=function(e){navigator.userAgent.match(/safari/i)&&e.preventDefault(),t.setState({pressed:!0}),void 0!==t.props.onMouseDown&&t.props.onMouseDown(e)},t.onMouseUp=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseUp&&t.props.onMouseUp(e)},t.onMouseLeave=function(e){t.setState({pressed:!1}),void 0!==t.props.onMouseLeave&&t.props.onMouseLeave(e)},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.addonAfter,n=e.addonBefore,r=e.autoComplete,i=e.checked,a=e.children,s=e.icon,c=e.iconLeft,u=e.iconRight,l=e.progress,p=e.disabled,h=e.as,m=e.type,v=e.className,g=e.innerRef,b=e.controlRef,y=e.title,O=e.role,w=(e.pressKeys,e.prvntKeys,e.view,e.theme,e.baseline,e.pin,e.width,Object(d.__rest)(e,["addonAfter","addonBefore","autoComplete","checked","children","icon","iconLeft","iconRight","progress","disabled","as","type","className","innerRef","controlRef","title","role","pressKeys","prvntKeys","view","theme","baseline","pin","width"])),C=this.state.pressed,E=h;w["string"===typeof h?"ref":"innerRef"]=Object(f.a)(this.internalInnerRef,g,b);var j=c||s;return o.a.createElement(E,Object(d.__assign)({},w,{type:m,disabled:Boolean(l||p),className:R({checked:i,progress:l,pressed:C},[v]),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,"aria-pressed":i,"aria-disabled":p,autoComplete:r,title:y,role:O,"aria-busy":l}),n,j&&o.a.createElement(M,{provider:j,side:a&&c?"left":void 0}),u&&o.a.createElement(M,{provider:u,side:a?"right":void 0}),a&&o.a.createElement(N,null,a),t)},t}(r.PureComponent)).displayName=R(),b.defaultProps=T,b),L=(n(602),Object(s.withBemMod)(R(),{theme:"clear"})),A=(n(606),n(607),Object(s.withBemMod)(R(),{theme:"action"})),B=(n(608),n(609),Object(s.withBemMod)(R(),{size:"m"})),F=Object(s.withBemMod)(R(),{type:"link"},function(e){return function(t){t.type;var n=t.target,r=t.rel,i=t.url,a=t.disabled,s=t.tabIndex,c=Object(d.__rest)(t,["type","target","rel","url","disabled","tabIndex"]),u=r;return"_blank"===n&&void 0!==r&&-1===r.indexOf("noopener")&&(u=r+" noopener"),o.a.createElement(e,Object(d.__assign)({},c,{rel:u,target:n,disabled:a,pressKeys:[x.a.ENTER],href:a?void 0:i,tabIndex:a?-1:s,type:null,autoComplete:null,as:"a"}))}}),U=(n(610),n(591),Object(s.withBemMod)(Object(j.b)(),{view:"tooltip"})),H=(n(594),Object(s.withBemMod)(Object(j.b)(),{tone:"blue"})),z=n(680),q=(n(595),a()(z)),W=Object(s.compose)(U,l,E,Object(s.composeU)(H))(j.a),G=Object(s.compose)(S.a)(_.a),V=Object(s.compose)(k.a,P)(I.a),Y=Object(s.compose)(Object(s.composeU)(L,A),B,F)(D),K=Object(c.cn)("FavoritesPopup"),X=function(){return o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Progress")},o.a.createElement(V,{className:K("Spin"),progress:!0,view:"default",size:"xxs"}),q("Добавляем в коллекцию...")))},Q=function(e){var t=e.onEditButtonClick,n=e.onLinkClick,r=e.board;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Message")},q("Добавлено в")," ",o.a.createElement(G,{theme:"strong",onClick:n,href:r&&r.url,className:K("CollectionName")},r&&r.title))),o.a.createElement("div",{className:K("Buttons")},o.a.createElement(Y,{className:K("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:t},q("Изменить")),o.a.createElement(Y,{className:K("Button",{theme:"action"}),size:"m",theme:"action",type:"link",url:r&&r.url,target:"_blank"},q("Перейти"))))},Z=function(e){var t=e.onClose,n=e.board,r=e.onLinkClick,i=e.loginUrl;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("Message")},q("Добавлено в")," ",o.a.createElement(G,{theme:"strong",onClick:r,href:n&&n.url,className:K("CollectionName")},n&&n.title)),o.a.createElement("div",{className:K("SubMessage")},q("Войдите, чтобы добавить в другую коллекцию"))),o.a.createElement("div",{className:K("Buttons")},o.a.createElement(Y,{className:K("Button",{theme:"clear"}),size:"m",theme:"clear",onClick:t},q("Не сейчас")),o.a.createElement(Y,{className:K("Button",{theme:"action"}),size:"m",theme:"action",type:"link",url:i},q("Войти и изменить"))))},J=function(){return o.a.createElement("div",{className:K("Description")},o.a.createElement("div",{className:K("ErrorMessage")},q("Не удалось добавить в коллекцию")))},$=function(e){var t=e.anchor,n=e.scope,i=e.onClose,a=e.status,s=e.loggedIn,c=e.onClickEdit,u=e.board,l=e.counter,d=e.tone,p=e.loginUrl,f=e.mainOffset,h=e.zIndex,m=e.className,v=Object(r.useCallback)(function(){i(),l.send("1352.1382.2052.486","73362","-type=cross")},[i,l]),g=Object(r.useCallback)(function(){l.send("1352.1382.2052.486","73362","-type=cross")},[l]),b=Object(r.useCallback)(function(){c(),l.send("1352.1382.2052.2818","73320")},[c,l]),y=Object(r.useRef)(a);return"hidden"!==a&&(y.current=a),o.a.createElement(W,{className:K({tone:d},[m]),visible:"hidden"!==a,anchor:t,scope:n,onClose:i,target:"anchor",directions:["bottom-center","bottom-left","bottom-right"],theme:"normal",tone:d,view:"tooltip",zIndex:void 0===h?110001:h,mainOffset:f,hasTail:!0},o.a.createElement("div",{className:K("Close"),title:"Закрыть",onClick:v}),"progress"===y.current?o.a.createElement(X,null):null,"saved"!==y.current||s?null:o.a.createElement(Z,{onClose:i,onLinkClick:g,loginUrl:p,board:u}),"saved"===y.current&&s?o.a.createElement(Q,{onEditButtonClick:b,onLinkClick:g,board:u}):null,"error"===a?o.a.createElement(J,null):null)}},424:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n(3),o=n(0),i=n.n(o),a=n(1),s=n(4),c=n(2),u=(n(614),Object(s.cn)("Modal")),l=function(e){var t=e.children,n=e.className,a=e.contentVerticalAlign,s=void 0===a?"middle":a,l=e.hasAnimation,d=void 0===l||l,p=e.visible,f=e.onClick,h=Object(r.__rest)(e,["children","className","contentVerticalAlign","hasAnimation","visible","onClick"]),m=Object(o.useRef)(null),v=Object(c.useComponentRegistry)(u()).Popup;return i.a.createElement(v,Object(r.__assign)({},h,{className:u({visible:p,hasAnimation:d},[n]),visible:p,unstable_hostRef:m,onClick:f}),i.a.createElement("div",{className:u("Table")},i.a.createElement("div",{className:u("Cell",{align:s})},i.a.createElement("div",{ref:m,className:u("Content")},t))),i.a.createElement("div",{className:u("Overlay")}))};l.displayName=u();n(613);var d=Object(a.withBemMod)(u(),{theme:"normal"}),p=(n(615),n(425)),f=new c.Registry({id:u()});f.set("Popup",p.a);var h=Object(c.withRegistry)(f)(l),m=n(991),v=n(174),g=(n(616),Object(a.withBemMod)(Object(v.b)(),{size:"m"})),b=(n(611),n(612)),y=Object(a.compose)(d)(h),O=Object(a.compose)(m.a,g)(v.a),w=Object(s.cn)("FavoritesIframe"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.win=window,n.state={saved:!1,cardData:void 0},n.loadIframeFirstTime=n.loadIframeFirstTime.bind(n),n.loadIframe=n.loadIframe.bind(n),n.onIframeLoad=n.onIframeLoad.bind(n),n.getLoaderUrl=n.getLoaderUrl.bind(n),n.getIframeUrl=n.getIframeUrl.bind(n),n.getRPCBridge=n.getRPCBridge.bind(n),n.modalClose=n.modalClose.bind(n),n}return Object(r.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.status!==e.status&&"load"===this.props.status&&(this.setState({saved:!1,cardData:void 0}),this.loadIframeFirstTime())},t.prototype.loadIframeFirstTime=function(e){if((this.currentIframeUrl&&e&&this.currentIframeUrl!==e||!e&&this.currentIframeUrl!==this.getIframeUrl())&&this.removeIfame(),void 0!==this.rpcBridge)return this.ready();this.loadIframe(e)},t.prototype.removeIfame=function(){this.rpcBridge&&(this.rpcBridge.clean(),this.rpcBridge=void 0,this.currentIframeUrl=void 0)},t.prototype.loadIframe=function(e){var t=this;this.setState({iframeUrl:e||this.getIframeUrl()},function(){t.currentIframeUrl=t.state.iframeUrl,t.rpcBridge=t.getRPCBridge(),t.rpcBridge.pushMessagesToStack=!0})},t.prototype.getRPCBridge=function(){return this.rpcBridge?this.rpcBridge:new b(this,{url:this.state.iframeUrl})},t.prototype.onIframeLoad=function(e){if(e&&e.target&&this.rpcBridge){var t=e.target;this.rpcBridge.contrAgent.win=t.contentWindow,this.rpcBridge.onIframeLoad()}},t.prototype.getLoaderUrl=function(){var e=this.props,t=e.loaderUrl,n=e.baseUrl,r=e.loaderVersion;return t||n+"/iframe-loader/'"+r+"/index.min.js"},t.prototype.getIframeUrl=function(){var e=this.props,t=e.source_type,n=e.iframeOrigin,r=void 0===n?location.origin:n,o=e.iframePath;return(this.state.iframeUrl||r+o)+(t?"&source_type="+t:"")},t.prototype.ready=function(){this.addCard(),this.props.readyIframe()},t.prototype.close=function(e){this.cardSaved(e,this.modalClose)},t.prototype.cardSaved=function(e,t){void 0===t&&(t=function(){}),e&&e.card&&e.card.board?this.setState({saved:!0,cardData:e},t):this.setState({saved:!1,cardData:void 0},t)},t.prototype.addCard=function(){this.props.card&&this.props.card.task_id?this.props.counter.send("1352.1544.487.2818","73311"):this.props.counter.send("1352.1544.487.160","73310"),void 0!==this.rpcBridge&&this.rpcBridge.invokeMethod("pdb-add-card",{card:this.props.card,sourceName:this.props.sourceName})},t.prototype.modalClose=function(){var e=this.state,t=e.cardData,n=e.saved;this.props.onClose(),n||(this.props.closeIframe({eventName:"closed"}),this.props.counter.send("1352.1544.486.3177","73319")),n&&t&&t.card&&this.props.closeIframe({eventName:"saved",card:t.card})},t.prototype.render=function(){var e=this.props,t=e.status,n=e.zIndex,r=this.state.iframeUrl,o={display:"block",width:"100%",height:"100%",zIndex:n,border:0,transform:"translate3d(0px, 0px, 0px)"};return i.a.createElement(y,{className:w({theme:"normal"}),visible:"hidden"!==t,onClose:this.modalClose,theme:"normal",zIndex:n},"load"===t?i.a.createElement(O,{progress:!0,view:"default",size:"m"}):null,r?i.a.createElement("div",{className:w("Content")},i.a.createElement("iframe",{src:r,style:o,onWheel:function(){},onLoad:this.onIframeLoad,"aria-hidden":!0})):null)},t.defaultProps={zIndex:110002,baseUrl:"https://yastatic.net/q/global-notifications",loaderVersion:"v0.0.3",iframePath:"/collections/add/?bus=2"},t}(i.a.Component)},425:function(e,t,n){"use strict";n.d(t,"b",function(){return o.b}),n.d(t,"a",function(){return u});var r=n(2),o=n(90),i=n(3),a=n(0),s=n.n(a),c=(n(593),new r.Registry({id:Object(o.b)()}));c.set("Tail",function(e){var t=e.className,n=e.innerRef,r=e.children,a=Object(i.__rest)(e,["className","innerRef","children"]);return s.a.createElement("div",Object(i.__assign)({},a,{className:Object(o.b)("Tail",null,[t]),ref:n}),r)});var u=Object(r.withRegistry)(c)(o.a)},426:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(3);var o="undefined"!==typeof window&&window.document&&window.document.createElement;var i=n(617),a=function(){function e(){}return e.getInstance=function(){if(!o)throw new Error("Нельзя иметь инстанс FavoritesController на сервере");return this.instance||(this.instance=new e),this.instance},e.prototype.createCard=function(e,t,n,o,i){var a=this,s=!1;if(!e||!e.doc_id)return new Promise(function(t){t({eventName:"saved",card:Object(r.__assign)(Object(r.__assign)({},e),{failed:!0})})});if("undefined"!==typeof t&&(s=!t),n[e.content[0].source_type]||s){var c=Object(r.__assign)(Object(r.__assign)({},e),{board:n&&n[e.content[0].source_type]});return this.favoritesRequest("POST",c,void 0,i).then(function(t){return a.favoritesRequestSuccess("create",e.doc_id,t.task_id,o),t}).then(function(t){return a.favoritesRequestFinally("create",e.doc_id,e,t,o)})}return new Promise(function(t){t({eventName:"iframe",card:e,fav:!0})})},e.prototype.addCard=function(e,t,n,o,i){var a=this,s=Object(r.__assign)({},t);return s.board=n,this.favoritesRequest("POST",s,void 0,i).then(function(t){return a.favoritesRequestSuccess("create",e,t.task_id,o),t}).then(function(n){return a.favoritesRequestFinally("create",e,t,n,o)})},e.prototype.removeCard=function(e,t,n,r,o){var i=this,a=n.cardId||void 0;return!a&&t&&t.card_id&&(a=t.card_id),a?this.favoritesRequest("DELETE",{},a,o).then(function(t){return i.favoritesRequestSuccess("remove",e,t.task_id,r),t}).then(function(n){return i.favoritesRequestFinally("remove",e,t,n,r)}):this.oldRemoveCard(e,t,n,r)},e.prototype.oldRemoveCard=function(e,t,n,o){var i=this,a=Object(r.__assign)({},t);return n&&n.byTaskId&&(a.task_id=n.taskId),fetch("/collections/api/favorites/cards/",{credentials:"same-origin",method:"DELETE",headers:{contentType:"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){return i.favoritesRequestSuccess("remove",e,t.task_id,o),t}).then(function(n){return i.favoritesRequestFinally("remove",e,t,n,o)})},e.prototype.moveCollectionsCard=function(e,t,n,r){var o=this;if(t&&e.card_id)return this.favoritesRequest("PATCH",{board_id:t},e.card_id,r).then(function(t){return o.favoritesRequestSuccess("move",e.item_id,t.task_id,n),t}).then(function(t){return o.favoritesRequestFinally("move",e.item_id,e,t,n)})},e.prototype.favoritesRequest=function(e,t,n,r){var o="/collections/api/v1.0/cards"+(n?"/"+n:"")+"?source_name="+(r||"serp-components")+"&source_version="+i+"&ui=common";return this.getCrf().then(function(n){return fetch(o,{credentials:"same-origin",method:e,headers:{"Content-Type":"application/json","x-csrftoken":n["csrf-token"]},body:JSON.stringify(t)}).then(function(e){return e.json()})})},e.prototype.favoritesRequestSuccess=function(e,t,n,r){"create"===e&&r(t,{taskId:n})},e.prototype.favoritesRequestFinally=function(e,t,n,o,i){var a="create"===e||"move"===e?"saved":"removed",s=Boolean(o&&o.id);if(!o)return{eventName:a,card:Object(r.__assign)(Object(r.__assign)({},n),{failed:!0})};if("remove"!==e){var c={cardId:o.id};s&&(c.isSaved=s),i(t,c)}else i(t,{isSaved:!1});return{eventName:a,card:Object(r.__assign)(Object(r.__assign)({},n),{id:o.id,item_id:t,failed:!s,card_id:o.id,task_id:o.task_id,board:o.board})}},e.prototype.getCrf=function(){var e=this,t=this.crfToken&&this.crfToken.expires;return t&&1e3*Number(new Date(Number(t)))>Number(new Date)?new Promise(function(t){t(e.crfToken)}):fetch("/collections/api/v1.0/csrf-token",{credentials:"same-origin",method:"get",headers:{contentType:"application/json"}}).then(function(e){return e.json()}).then(function(t){return e.crfToken=t,t})},e}()},43:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object(r.useMemo)(function(){return e.bind.apply(e,i([null],t))},i([e],t))}},433:function(e,t,n){"use strict";n(409);var r=n(124);n.d(t,"a",function(){return r.a})},434:function(e,t,n){n.r(t);var r=n(2509);n.d(t,"en",function(){return r.a})},436:function(e,t,n){n.r(t);var r=n(2418);n.d(t,"en",function(){return r.a})},442:function(e,t,n){"use strict";n(197),n(304);var r=n(12);n.d(t,"a",function(){return r.a})},447:function(e,t,n){},448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var r=n(0);t.useFirstMountState=function(){var e=r.useRef(!0);return e.current?(e.current=!1,!0):e.current}},449:function(e,t,n){},450:function(e,t,n){},451:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(26),i=(n(354),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))},452:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(3),o=n(0),i=n.n(o),a=n(1),s=n(11),c=n(22),u=n(26);function l(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function d(e){return e?(e.nodeName||"").toLowerCase():null}function p(e){return"html"===d(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function f(e){var t=d(e);if(t&&["html","body"].indexOf(t)>=0)return e.ownerDocument.body;if(function(e){return e instanceof l(e).HTMLElement}(e)){var n=function(e){return l(e).getComputedStyle(e)}(e),r=n.overflow,o=n.overflowX,i=n.overflowY;if(/auto|scroll|overlay|hidden/.test(r+i+o))return e}return f(p(e))}var h=function(e,t,n){return 0===e.indexOf(t)||n&&0===e.indexOf(n)},m=function(e,t){return e.indexOf("-"+t)>0},v={directions:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],mainOffset:0,secondaryOffset:0,tailOffset:0,viewportOffset:0,scope:{current:Object(s.a)()?document.body:null}},g={top:-9999,left:-9999},b=Object(a.withBemMod)(Object(u.b)(),{target:"anchor"},function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.state={direction:"bottom-left",forwarded:{},isAnchorVisible:!0},n.popupRef=Object(o.createRef)(),n.tailRef=Object(o.createRef)(),n.anchorScrollParents=[],n.subscribeToEvents=function(){n.anchorScrollParents=function e(t,n){if(void 0===n&&(n=[]),!t)return[document.body];var r=f(t),o="body"===d(r),i=n.concat(r);return o?i:i.concat(e(p(r)))}(n.props.anchor&&n.props.anchor.current||null),n.anchorScrollParents.forEach(function(e){e.addEventListener("scroll",n.updateRefsPosition)}),window.addEventListener("resize",n.updateRefsPosition),document.addEventListener("documentchange",n.updateRefsPosition)},n.unsubscribeFromEvents=function(){n.anchorScrollParents.forEach(function(e){e.removeEventListener("scroll",n.updateRefsPosition)}),window.removeEventListener("resize",n.updateRefsPosition),document.removeEventListener("documentchange",n.updateRefsPosition)},n.updateRefsPosition=function(){requestAnimationFrame(function(){var e=n.props.directions,t=n.getDrawingParams(e),r=t.direction,o=t.popupPosition,i=t.tailPosition;n.state.direction!==r&&n.setState({direction:r}),null!==n.popupRef.current&&(n.popupRef.current.style.top=o.top+"px",n.popupRef.current.style.left=o.left+"px"),null!==n.tailRef.current&&(n.tailRef.current.style.top=i.top+"px",n.tailRef.current.style.left=i.left+"px");var a=!n.props.hideWithAnchor||n.calcIsAnchorVisible();null!==n.popupRef.current&&(n.popupRef.current.style.display=a?"":"none")})},n.getPossibleDrawingParams=function(){var e=n.getAnchorDimensions(n.props.anchor),t=n.getViewportDimensions(),r=n.getOffsets();return n.props.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return h(n,"bottom")?(o.top=e.top+e.height+2*r.main,o.height=t.bottom-o.top-r.viewport):h(n,"top")?(o.height=e.top-t.top-r.main-r.viewport,o.top=e.top-o.height-r.main):(m(n,"center")?(o.height=t.bottom-t.top-2*r.viewport,o.top=e.top+(e.height-o.height)/2):m(n,"bottom")?(o.height=e.top+e.height-t.top-r.secondary-r.viewport,o.top=e.top+e.height-o.height-r.secondary):m(n,"top")&&(o.top=e.top+r.secondary,o.height=t.bottom-o.top-r.viewport),h(n,"left")?(o.width=e.left-t.left-r.main-r.viewport,o.left=e.left-o.width-r.main):(o.left=e.left+e.width+r.main,o.width=t.right-o.left-r.viewport)),m(n,"right")?(o.width=e.left+e.width-t.left-r.secondary-r.viewport,o.left=e.left+e.width-o.width-r.secondary):m(n,"left")?(o.left=e.left+r.secondary,o.width=t.right-o.left-r.viewport):m(n,"center")&&h(n,"top","bottom")&&(o.width=t.right-t.left-2*r.viewport,o.left=e.left+e.width/2-o.width/2),o})},console.assert(void 0!==e.anchor,'Для работы "withTargetAnchor" требуется наличие свойства "anchor".'),console.assert(0!==e.directions.length,'Для работы "withTargetAnchor" требуется наличие хотя бы одного направления для раскрытия.'),n}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.setState({forwarded:{}}),this.shouldSubscribeToEvents()&&this.subscribeToEvents()},n.prototype.componentDidUpdate=function(e,t){var n=this;null===this.popupRef.current&&this.props.visible&&requestAnimationFrame(function(){n.setState({forwarded:{}})}),e.visible===this.props.visible&&e.anchor===this.props.anchor&&t.forwarded===this.state.forwarded||this.updateRefsPosition(),this.shouldSubscribeToEvents()?this.subscribeToEvents():this.unsubscribeFromEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=t.anchor,o=(t.directions,t.mainOffset,t.motionless,t.secondaryOffset,t.tailOffset,t.target,t.viewportOffset,t.getPossibleDrawingParams),a=Object(r.__rest)(t,["anchor","directions","mainOffset","motionless","secondaryOffset","tailOffset","target","viewportOffset","getPossibleDrawingParams"]);return Object(s.a)()&&void 0!==o&&o(this.getPossibleDrawingParams()),i.a.createElement(e,Object(r.__assign)({},a,{unstable_essentialRefs:[n],direction:this.state.direction,innerRef:Object(c.a)(this.popupRef,this.props.innerRef),tailRef:Object(c.a)(this.tailRef,this.props.tailRef),position:g}))},n.prototype.shouldSubscribeToEvents=function(){return this.props.visible&&!this.props.motionless},n.prototype.getDrawingParams=function(e){var t,n,o={direction:"bottom-left",popupPosition:{top:0,left:0},tailPosition:{top:0,left:0}},i=this.getPopupDimensions(this.popupRef),a=this.getAnchorDimensions(this.props.anchor),s=this.getViewportDimensions(),c=this.getScopeDimensions(this.props.scope),u=0;try{for(var l=Object(r.__values)(e),d=l.next();!d.done;d=l.next()){var p=d.value,f=this.getPopupPosition(p,a,i),h=this.getViewportFactor(f,s,i);if((h>u||this.state.direction===p)&&(o.popupPosition={top:f.top-(c.top+window.pageYOffset),left:f.left-(c.left+window.pageXOffset)},o.direction=p,u=h),u>.99)break}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return null!==this.tailRef.current&&(o.tailPosition=this.getTailPosition(o.direction,a,i)),o},n.prototype.getPopupDimensions=function(e){var t={area:0,height:0,width:0,popupHeight:0,popupWidth:0};if(void 0!==e&&null!==e.current){var n=e.current,r=n.clientWidth,o=n.clientHeight,i=e.current.getBoundingClientRect(),a=i.width,s=i.height;t.area=r*o,t.height=Math.round(s),t.width=Math.round(a),t.popupHeight=o,t.popupWidth=r}return t},n.prototype.getAnchorDimensions=function(e){var t={left:0,top:0,height:0,width:0},n=e&&e.current,r=n&&n.offsetParent;if(n&&r){var o=n.getBoundingClientRect(),i=o.left,a=o.top;t.left=i+window.pageXOffset,t.top=a+window.pageYOffset,t.height=n.offsetHeight,t.width=n.offsetWidth}return t},n.prototype.getTailDimensions=function(){return null===this.tailRef.current?{size:0,withChildren:!1}:{size:this.tailRef.current.offsetWidth,withChildren:this.tailRef.current.hasChildNodes()}},n.prototype.getViewportDimensions=function(){return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth}},n.prototype.getScopeDimensions=function(e){var t={top:0,left:0};if(void 0!==e&&null!==e.current){var n=e.current.getBoundingClientRect(),r=n.left,o=n.top;t.top=o,t.left=r}return t},n.prototype.getPopupPosition=function(e,t,n){var r={left:0,top:0},o=this.getOffsets();return h(e,"bottom")?r.top=t.top+t.height+o.main:h(e,"top")?r.top=t.top-n.height-o.main:h(e,"left")?r.left=t.left-n.width-o.main:h(e,"right")&&(r.left=t.left+t.width+o.main),m(e,"right")?r.left=t.left+t.width-n.width-o.secondary:m(e,"left")?r.left=t.left+o.secondary:m(e,"bottom")?r.top=t.top+t.height-n.height-o.secondary:m(e,"top")?r.top=t.top+o.secondary:m(e,"center")&&(h(e,"top","bottom")?r.left=t.left+t.width/2-n.width/2:h(e,"left","right")&&(r.top=t.top+t.height/2-n.height/2)),r},n.prototype.getTailPosition=function(e,t,n){var r={left:0,top:0},o=this.getTailDimensions(),i=o.size,a=o.withChildren,s=a?i:i/2,c=this.getOffsets();if(h(e,"bottom")?r.top=-s:h(e,"top")?r.top=a?n.popupHeight:Math.floor(n.popupHeight-s):h(e,"left")?r.left=a?n.popupWidth:Math.floor(n.popupWidth-s):h(e,"right")&&(r.left=-s),m(e,"right"))r.left=n.popupWidth-Math.ceil(Math.min(n.popupWidth,t.width)/2)-s-c.tail;else if(m(e,"left"))r.left=Math.ceil(Math.min(n.popupWidth,t.width)/2)-s+c.tail;else if(m(e,"bottom"))r.top=n.popupHeight-Math.ceil(Math.min(n.popupHeight,t.height)/2)-s-c.tail;else if(m(e,"top"))r.top=Math.ceil(Math.min(n.popupHeight,t.height)/2)-s+c.tail;else if(m(e,"center")){var u=a?s/2:s;h(e,"top","bottom")?r.left=Math.ceil(n.popupWidth/2)-u+c.tail:r.top=Math.ceil(n.popupHeight/2)-u+c.tail}return r},n.prototype.getOffsets=function(){var e=this.props,t=e.mainOffset,n=e.secondaryOffset,r=e.tailOffset,o=e.viewportOffset,i=this.getTailDimensions();return{main:t>=0&&i.size>0?Math.max(t,Math.round(i.size*Math.SQRT1_2)):t,secondary:n,tail:r,viewport:o}},n.prototype.getViewportFactor=function(e,t,n){var r=0,o=this.getOffsets(),i=Math.max(e.left,t.left+o.viewport),a=Math.min(e.left+n.width,t.right-o.viewport),s=Math.max(e.top,t.top+o.viewport),c=Math.min(e.top+n.height,t.bottom-o.viewport);return i<a&&s<c&&(r=(a-i)*(c-s)/n.area),r},n.prototype.calcIsAnchorVisible=function(){if(!this.anchorScrollParents.length)return!0;for(var e=0;e<this.anchorScrollParents.length;e++){var t=this.anchorScrollParents[e].getBoundingClientRect(),n=Math.floor(t.top),r=Math.floor(t.height),o=this.props.anchor&&this.props.anchor.current;if(!o)return!1;var i=o.getBoundingClientRect(),a=Math.floor(i.top),s=Math.floor(i.height),c=Math.floor(h(this.state.direction,"top")?a:a+s);if(c<n||n+r<c)return!1;var u=Math.floor(t.left),l=Math.floor(t.width),d=Math.floor(i.left),p=Math.floor(i.width),f=Math.floor(h(this.state.direction,"left")?d:d+p);if(!(f>=u&&u+l>=f))return!1}return!0},n}(o.PureComponent)).defaultProps=v,t})},456:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(e){var t=Object(r.useRef)();return Object(r.useEffect)(function(){t.current=e}),t.current}},46:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n(3),o=n(0),i=n.n(o),a=n(2),s=n(4),c=(n(315),Object(s.cn)("Modal")),u=function(e){var t=e.children,n=e.className,s=e.contentVerticalAlign,u=void 0===s?"middle":s,l=e.hasAnimation,d=void 0===l||l,p=e.visible,f=e.onClick,h=Object(r.__rest)(e,["children","className","contentVerticalAlign","hasAnimation","visible","onClick"]),m=Object(o.useRef)(null),v=Object(a.useComponentRegistry)(c()).Popup;return i.a.createElement(v,Object(r.__assign)({},h,{className:c({visible:p,hasAnimation:d},[n]),visible:p,unstable_hostRef:m,onClick:f}),i.a.createElement("div",{className:c("Table")},i.a.createElement("div",{className:c("Cell",{align:u})},i.a.createElement("div",{ref:m,className:c("Content")},t))),i.a.createElement("div",{className:c("Overlay")}))};u.displayName=c()},47:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(179),o=n(43),i=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=function(e){void 0===e&&(e=!1);var t=i(Object(r.a)(e),2),n=t[0],a=t[1];return[n,Object(o.a)(a,!0),Object(o.a)(a,!1),a]}},48:function(e,t,n){"use strict";function r(e){return function(t,n){return n?t[e][n]:{data:void 0,isFailed:!1}}}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};return t.reduce(function(t,n){return n.reduce(function(t,n){var o=String(n[e]);return r[o]||(r[o]=!0,t.push(n)),t},t)},[])}function i(e){var t,n;return function(){if(!n||n.length!==arguments.length)return n=arguments,t=e.apply(this,arguments);for(var r=0;r<n.length;r++)if(n[r]!==arguments[r])return n=arguments,t=e.apply(this,arguments);return t}}function a(e,t){var n,r;return function(){var o=e.apply(this,arguments);if(!r||r.length!==o.length)return r=o,n=t.apply(this,o);for(var i=0;i<r.length;i++)if(r[i]!==o[i])return r=o,n=t.apply(this,o);return n}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return a})},49:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(316);var r={open:"images-viewer:open",beforeOpened:"images-viewer:beforeOpened",opened:"images-viewer:opened",close:"images-viewer:close",beforeClosed:"images-viewer:beforeClosed",closed:"images-viewer:closed",mounted:"images-viewer:mounted",unmounted:"images-viewer:unmounted",fill:"images-viewer:fill",cbirCrop:"images-viewer:cbirCrop",selectItem:"images-viewer:selectItem",imageShow:"images-viewer:imageShow",listOut:"images-viewer:listOut",rimClick:"images-viewer:rimClick",fullscreenEnter:"images-viewer:fullscreenEnter",fullscreenExit:"images-viewer:fullscreenExit"}},5:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(209)),r(n(210)),r(n(211)),r(n(137)),r(n(138)),r(n(212)),r(n(213)),r(n(139)),r(n(105)),r(n(218)),r(n(219)),r(n(104)),r(n(220)),r(n(221)),r(n(222)),r(n(51))},50:function(e,t,n){"use strict";function r(e){return e.displayName||e.name||"Component"}n.d(t,"a",function(){return r})},505:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markup=function(e,t){for(var n,r,o=t.delimiters,i=t.highlighter,a=t.textPreprocessor,s=o.start,c=o.end,u=[],l=[],d=0,p=0,f=0,h=function(t){var o=!1===r?n:e.indexOf(s,t),i=!0===r?n:e.indexOf(c,t);return o>-1&&(o<i||-1===i)?(n=i,r=!0,d=s.length,o):(n=o,r=!1,d=c.length,i)},m=h(0);m>-1;){if(p!==m&&l.push(a(e.substring(p,m))),r)u.push(l),l=[];else if(u.length){var v=l;l=u.pop(),v.length&&l.push(i(v,f++))}m=h(p=m+d)}var g=e.substring(p);for(g&&l.push(a(g));u.length;)v=l,l=u.pop(),v.length&&l.push(i(v,f++));return l}},51:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(214)),r(n(215)),r(n(216)),r(n(217))},52:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("CircleButton")},522:function(e,t,n){},523:function(e,t,n){},524:function(e,t,n){},525:function(e,t,n){},527:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(3),o=n(0),i=n.n(o),a=n(18),s=n(50),c=n(22),u=n(11),l="pointerdown",d="pointerup";Object(u.a)()&&(window.PointerEvent||(l="mousedown",d="mouseup",window.MouseEvent||(d="click")));var p={ignoreRefs:[]},f=function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetRef=Object(o.createRef)(),e.pointerDownEventSource=null,e.onPointerDown=function(t){e.pointerDownEventSource=t.target},e.onPointerUp=function(t){var n=Object(r.__spread)(e.props.ignoreRefs,[e.targetRef]);void 0!==e.props.onOutsideClick&&n.every(function(n){return null!==n.current&&!n.current.contains(e.pointerDownEventSource)&&!n.current.contains(t.target)})&&e.props.onOutsideClick(t),e.pointerDownEventSource=null},e.onKeyDown=function(t){void 0!==e.props.onEscapeKeyDown&&Object(a.b)(t.keyCode,[a.a.ESC])&&e.props.onEscapeKeyDown(t)},e}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.subscribeToEvents()},n.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents()},n.prototype.componentDidUpdate=function(e){!e.visible&&this.props.visible?this.subscribeToEvents():e.visible&&!this.props.visible&&this.unsubscribeFromEvents()},n.prototype.render=function(){var t=this.props,n=(t.ignoreRefs,Object(r.__rest)(t,["ignoreRefs"]));return i.a.createElement(e,Object(r.__assign)({},n,{targetRef:Object(c.a)(this.targetRef,this.props.targetRef)}))},n.prototype.subscribeToEvents=function(){document.addEventListener(l,this.onPointerDown),document.addEventListener(d,this.onPointerUp),document.addEventListener("keydown",this.onKeyDown)},n.prototype.unsubscribeFromEvents=function(){document.removeEventListener(l,this.onPointerDown),document.removeEventListener(d,this.onPointerUp),document.removeEventListener("keydown",this.onKeyDown)},n.displayName="withOutsideClick("+Object(s.a)(e)+")",n.defaultProps=p,n}(o.PureComponent)}},53:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("ProductCardVertical")},537:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(3),o=n(0),i=n.n(o),a=n(50),s=n(22),c={},u={zIndexGroupLevel:0},l=function(e){var t;return(t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentZIndex=0,e.innerRef=Object(o.createRef)(),e}return Object(r.__extends)(n,t),n.prototype.componentDidMount=function(){this.props.visible&&this.updateZIndexPosition()},n.prototype.componentDidUpdate=function(e){e.visible!==this.props.visible&&this.updateZIndexPosition()},n.prototype.componentWillUnmount=function(){0!==this.currentZIndex&&this.releaseZIndex(this.props.zIndexGroupLevel,this.currentZIndex)},n.prototype.render=function(){var t=this.props,n=(t.zIndexGroupLevel,Object(r.__rest)(t,["zIndexGroupLevel"]));return i.a.createElement(e,Object(r.__assign)({},n,{innerRef:Object(s.a)(this.innerRef,this.props.innerRef)}))},n.prototype.updateZIndexPosition=function(){var e=this;requestAnimationFrame(function(){var t=e.props,n=t.visible,r=t.zIndexGroupLevel;n&&0===e.currentZIndex?e.currentZIndex=e.captureZIndex(r):n||(e.currentZIndex=e.releaseZIndex(r,e.currentZIndex)),n&&(null!==e.innerRef.current?e.innerRef.current.style.zIndex=String(e.currentZIndex):e.updateZIndexPosition())})},n.prototype.captureZIndex=function(e){var t=c[e];void 0===t&&(t=[1e3*(e+1)],c[e]=t);var n=t[t.length-1]+1;return t.push(n),n},n.prototype.releaseZIndex=function(e,t){var n=c[e];return void 0!==n&&n.length>1&&n.splice(n.indexOf(t),1),0},n}(o.PureComponent)).displayName="withZIndex("+Object(a.a)(e)+")",t.defaultProps=u,t}},548:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(12),i=(n(314),Object(r.withBemMod)(Object(o.b)(),{width:"max"}))},55:function(e,t,n){"use strict"},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){},557:function(e,t,n){},558:function(e,t,n){},559:function(e,t,n){},56:function(e,t,n){"use strict";"function"===typeof Element&&(Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},560:function(e,t,n){},561:function(e,t,n){},562:function(e,t,n){},563:function(e,t,n){},564:function(e,t,n){},565:function(e,t,n){},566:function(e,t,n){},567:function(e,t,n){},568:function(e,t,n){},569:function(e,t,n){},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,n){var r,o=0,i=n&&n.delayedLastCall;function a(){o&&(clearTimeout(o),o=0)}var s=function(){var n=Date.now(),s=arguments,c=function(){e.apply(void 0,s),r=Date.now(),o=0};a(),void 0===r||n-r>t?c():i&&(o=setTimeout(c,t-(n-r)))};return s.cancel=a,s}},570:function(e,t,n){},571:function(e,t,n){},572:function(e,t,n){},573:function(e,t,n){},574:function(e,t,n){},575:function(e,t,n){},576:function(e,t,n){},577:function(e,t,n){},578:function(e,t,n){},579:function(e,t,n){},58:function(e,t,n){"use strict";e.exports=n(115)},580:function(e,t,n){},581:function(e,t,n){},582:function(e,t,n){},583:function(e,t,n){},584:function(e,t,n){},585:function(e,t,n){},586:function(e,t,n){},587:function(e,t,n){},588:function(e,t,n){},589:function(e,t,n){},59:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e){return function(t){var n;return(n=Array.isArray(e)?function(n){return function(e,t){return t.every(function(t){return void 0!==e[t]})}(n,e)?r.createElement(t,o({},n)):null}:function(n){return e(n)?r.createElement(t,o({},n)):null}).displayName=t.displayName||t.name||"Component",n}}},590:function(e,t,n){},591:function(e,t,n){},592:function(e,t,n){},593:function(e,t,n){},594:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){},597:function(e,t,n){},598:function(e,t,n){},599:function(e,t,n){},6:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(71),i=n(72),a=n(73),s=n(74),c=n(75),u=n(76),l=n(77),d=n(78),p=n(79),f={be:o.default,en:i.default,id:a.default,kk:s.default,ru:c.default,tr:u.default,tt:l.default,uk:d.default,uz:p.default},h=["ru"];function m(e){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(e)?"ru":"en"}function v(e,t){for(var n=[],r=e.length,o=0;o<r;){var i=e.indexOf("{",o);if(-1===i)return n.push(e.substring(o)),n;var a=e.indexOf("}",i);if(-1===a)return n.push(e.substring(o)),n;n.push(e.substring(o,i),t[e.substring(i+1,a)]),o=a+1}return n}function g(e,t,n){void 0===n&&(n={});var o=function(e,t){var n,o,i;try{for(var a=r(h),s=a.next();!s.done;s=a.next())if((i=e[s.value])&&t in i)return i[t]}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return t}(e,t);return"string"===typeof o?v(o,n):function(e,t){var n=h.find(function(e){return Boolean(f[e])})||m(h[0]);return v((0,f[n])(t.count,e),t)}(o,n)}t.default=function(e){return function(t,n){return void 0===n&&(n={}),g(e,t,n).join("")}},t.i18nRaw=function(e){return function(t,n){return void 0===n&&(n={}),g(e,t,n)}},t.setI18nLang=function(e){h="string"===typeof e?[e,m(e),"ru"]:e},t.getI18nLang=function(){return h[0]},t.resolveI18nLang=function(e,t,n){var r=t;if(-1===e.indexOf(r))switch(n){case"com":r="en";break;case"com.tr":r="tr";break;default:r="ru"}return r}},600:function(e,t,n){},601:function(e,t,n){},602:function(e,t,n){},603:function(e,t,n){},604:function(e,t,n){},605:function(e,t,n){},606:function(e,t,n){},607:function(e,t,n){},608:function(e,t,n){},609:function(e,t,n){},61:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(4),o=Object(r.cn)("MMSimilarOffers"),i="MMSimilarOffersId"},610:function(e,t,n){},611:function(e,t,n){},612:function(e,t){function n(e,t){this.agent=e,this.contrAgent=t||{},this._resultCallbacks={},this._resultCallbacksIndex=0,this._onMessage=this._onMessage.bind(this),this.agent.win.addEventListener("message",this._onMessage),this.pushMessagesToStack=!1,this._messagesStack=[]}n.prototype={invokeMethod:function(e,t,n){return t=[].concat(t),this._invokeMethod(e,t,n),this},clean:function(){this.agent.win.removeEventListener("message",this._onMessage),this.agent=void 0,this.contrAgent=void 0,this._resultCallbacks=void 0,this._resultCallbacksIndex=0},onIframeLoad:function(){this._messagesStack.reverse().forEach(this._onMessage),this._messagesStack=[],this.pushMessagesToStack=!1},_onMessage:function(e){if(this.contrAgent&&this.contrAgent.win&&e.source===this.contrAgent.win){var t,n=e.data;try{n=JSON.parse(n)}catch(e){return}if(n.methodCall){if(this.contrAgent.url||(this.contrAgent.url=e.origin),this.agent[n.methodCall]){var r,o=n.params;t=n.resultCallbackIndex?this._deInstrumentCallback(n.resultCallbackIndex):[],n.paramsCallbackIndex&&(o=[].concat(o,this._deInstrumentCallback(n.paramsCallbackIndex))),r=this.agent[n.methodCall].apply(this.agent,[].concat(o)),n.resultCallbackIndex&&t(r)}}else n.returnCall&&(t=this._idObjToCallback(n.resultCallbackIndex))&&t.apply(this.agent,[].concat(n.params))}else this.pushMessagesToStack&&this._messagesStack.push(e)},_invokeCallback:function(e,t){this._invokeMethod("",t,e)},_callbackToIdObj:function(e){var t=++this._resultCallbacksIndex;return this._resultCallbacks[t]=e,{__callbackId:t}},_idObjToCallback:function(e){var t=e,n=this._resultCallbacks[t];return delete this._resultCallbacks[t],n},_instrumentCallback:function(e){return this._callbackToIdObj(e)},_deInstrumentCallback:function(e){return function(){setTimeout(function(t){this.contrAgent&&this._invokeCallback(e.__callbackId,[].slice.call(t))}.bind(this,arguments),0)}.bind(this)},_invokeMethod:function(e,t,n){var r;if(e){var o,i=t&&t.pop();"function"===typeof i?o=this._instrumentCallback(i):t&&t.push(i),r={methodCall:e,params:t,paramsCallbackIndex:o,resultCallbackIndex:n&&this._instrumentCallback(n)}}else r={returnCall:!0,params:t,resultCallbackIndex:n};r=JSON.stringify(r),this.contrAgent.win.postMessage(r,this.contrAgent.url)}},e.exports=n},613:function(e,t,n){},614:function(e,t,n){},615:function(e,t,n){},616:function(e,t,n){},617:function(e){e.exports=JSON.parse('{"version":"2.1.0"}')},618:function(e,t,n){},619:function(e,t,n){},62:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r,o=n(0),i=n.n(o),a=n(5),s=n(38),c=n(124);function u(e,t,n,r){return e.parentNode?function(e,t,n){void 0===n&&(n={});var r=Object(a.createChildData)(e,t,n);return"title"===r.name&&(r.events||(r.events={}),r.events.onSearchinderSwipe=Object(a.logClick)({swipe:1})),r}(t,n,r):function(e,t,n,r){var o=Object(a.createChildData)(e,t,n);return o.attrs=o.attrs||{},o.attrs.service=o.attrs.service||r&&r.service,o.attrs.ui=o.attrs.ui||r&&r.ui,o.attrs.react=o.attrs.reactReady||r&&r.react,o}(t,n,r,{ui:e.logger.ui,service:e.logger.service,react:e.logger.reactReady})}!function(e){e[e.Partial=.5]="Partial",e[e.Full=1]="Full"}(r||(r={}));var l=function(e){return e.stopPropagation()};function d(e,t,n){if(t){var r=n&&n.indexOf("/jsredir")>0?"rc":"b";e["data-counter"]=e["data-counter"]||(n?'["'+r+'","'+n+'"]':'["b"]'),e["data-log-node"]=e["data-log-node"]||t.id,e.onMouseDown=function(e){return e?function(t){l(t),e(t)}:l}(e.onMouseDown)}return e}n(146);var p={theme:1,counter:1,children:1,url:1,logNode:1,fontWeight:1,baobabNode:1,baobabId:1,logHref:1},f=function(e){return function(t){var n=Object(o.useContext)(s.BaobabContext),r=i.a.useMemo(function(){return n?u(n,t,{name:"link"},t.logNode):{}},[]),l=Object(a.useBaobab)(r),f=l.nextContext,h=l.node,m=l.logEvent,v=Object(o.useMemo)(function(){return function(e){var n,o=null===(n=null===r||void 0===r?void 0:r.events)||void 0===n?void 0:n.onClick;if("boolean"!==typeof o||o)if("object"===typeof o&&o.data){var i=o.data;"function"===typeof i&&(i=i({props:t},e)),m(Object(a.logClick)(i),[e],t)}else m(Object(a.logClick)(),[e],t);t.onClick&&t.onClick(e)}},[m,t,r]),g=function(e,t){var n={};for(var r in e)r in t||(n[r]=e[r]);return n}(t,p),b=t.url,y=t.target;return d(g,h,t.logHref),g.className=Object(c.b)({theme:t.theme,fontWeight:t.fontWeight},[t.className]),g.href=b,g.target=void 0===y?"_blank":y,g.onClick=v,i.a.createElement(s.BaobabContext.Provider,{value:f},i.a.createElement(e,g,t.children))}},h=f(c.a);h.isBaobabNode=!0},620:function(e,t,n){},621:function(e,t,n){},622:function(e,t,n){},623:function(e,t,n){},624:function(e,t,n){},625:function(e,t,n){},626:function(e,t,n){},627:function(e,t,n){},628:function(e,t,n){},629:function(e,t,n){},630:function(e,t,n){},631:function(e,t,n){},632:function(e,t,n){},633:function(e,t,n){},634:function(e,t,n){},635:function(e,t,n){},636:function(e,t,n){},637:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){},641:function(e,t,n){},642:function(e,t,n){},643:function(e,t,n){},644:function(e,t,n){},645:function(e,t,n){},646:function(e,t,n){},647:function(e,t,n){},648:function(e,t,n){},649:function(e,t,n){},65:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});var r,o=n(0),i=n(4);n(584);!function(e){e.xs="xs",e.s="s",e.n="n",e.m="m",e.l="l",e.xl="xl"}(r||(r={}));var a=Object(i.cn)("Spinner");function s(e){var t=e.size,n=e.className,r=void 0===n?"":n,i=e.type,s=e.theme,c=void 0===s?"yellow":s;return o.createElement("div",{className:a({size:t,type:i,theme:c},[r])})}},650:function(e,t,n){},651:function(e,t,n){},652:function(e,t,n){},653:function(e,t,n){},654:function(e,t,n){},655:function(e,t,n){},656:function(e,t,n){},657:function(e,t,n){},658:function(e,t,n){},659:function(e,t,n){},66:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return s});var r=n(4),o=Object(r.cn)("Path"),i=o(),a=o("Item"),s=o("Separator")},660:function(e,t,n){},661:function(e,t,n){},662:function(e,t,n){},663:function(e,t,n){},664:function(e,t,n){},665:function(e,t,n){},666:function(e,t,n){},667:function(e,t,n){},668:function(e,t,n){},669:function(e,t,n){},67:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),o=Object(r.cn)("MMGallery")},670:function(e,t,n){},671:function(e,t,n){},672:function(e,t,n){},673:function(e,t,n){},677:function(e,t,n){n.r(t);var r=n(2391);n.d(t,"en",function(){return r.a})},678:function(e,t,n){n.r(t);var r=n(2409);n.d(t,"en",function(){return r.a})},679:function(e,t,n){n.r(t);var r=n(2427);n.d(t,"en",function(){return r.a})},680:function(e,t,n){n.r(t);var r=n(2445);n.d(t,"en",function(){return r.a})},681:function(e,t,n){n.r(t);var r=n(2463);n.d(t,"en",function(){return r.a})},682:function(e,t,n){n.r(t);var r=n(2481);n.d(t,"en",function(){return r.a})},683:function(e,t,n){n.r(t);var r=n(2490);n.d(t,"en",function(){return r.a})},684:function(e,t,n){n.r(t);var r=n(2536);n.d(t,"en",function(){return r.a})},685:function(e,t,n){n.r(t);var r=n(2545);n.d(t,"en",function(){return r.a})},7:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"i",function(){return h}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"l",function(){return y});var r=n(23),o=n(203),i=n(48),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var s=Object(i.d)(function(e){return c(e,e.currentItemIdx)});function c(e,t){return e.images[t]}Object(i.d)(function(e){return function(e,t){var n=c(e,t);if(n){if(n.loadedImage)return n.loadedImage;var r=e.loadedThumbs[n.id];return r&&(n.loadedImage=r),r}}(e,e.currentItemIdx)});var u=Object(i.d)(function(e){return Object(o.g)(e)||s(e)}),l=Object(i.a)("loadedThumbs"),d=Object(i.d)(function(e){var t=u(e),n=t&&t.id?l(e,t.id):void 0;return n&&n.data});var p=Object(i.a)("favicons");function f(e){var t=e&&e.snippet;if(t)return t.punycode?t.punycode.toLowerCase():t.domain&&t.domain.toLowerCase()}function h(e){return e.preloadImagesIndexes}function m(e,t){for(var n=Math.max(t-e.config.preloadLeftBorder,0),r=Math.min(t+e.config.preloadRightBorder,e.images.length),o=[],i=Math.max(t-n,r-t),a=1;a<=i;a++)t+a<=r&&o.push(t+a),t-a>=n&&o.push(t-a);return o}function v(e,t,n){return 1===e?t:t.slice(n)}function g(e){var t=Object(r.c)(e);return t&&t.__oldCounter__&&t.__oldCounter__.path||""}var b=function(e,t){var n=g(e);return a(a({},e),{__oldCounter__:a(a({},e.__oldCounter__),{path:n.replace(/\/$/,"")+"/"+t})})},y=function(e){var t=e.experiments,n=void 0===t?{}:t,r=e.globalContext,o=r.isCommercialEnabled||r.isCommercialQuery;if(n.commercialSideblockWidth&&o)return Number(n.commercialSideblockWidth)}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?1===e?t.one:t.some:t.none||""}},721:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(26),i=(n(353),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}))},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e?t.some:t.none||""}},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},755:function(e,t,n){"use strict";var r=n(233);n.d(t,"a",function(){return r.a});n(396)},756:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(37),i=(n(400),Object(r.createClassNameModifier)(Object(o.b)(),{type:"market-logo"}))},757:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),o=n(46),i=n(249),a=new r.Registry({id:Object(o.b)()});a.set("Popup",i.a);var s=Object(r.withRegistry)(a)(o.a)},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},763:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(46),i=(n(449),Object(r.withBemMod)(Object(o.b)(),{theme:"normal"}));n(450)},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},777:function(e,t,n){"use strict";var r=n(192);n.d(t,"a",function(){return r.a});n(417)},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},780:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(2),o=n(3),i=n(0),a=n.n(i),s=n(5),c=n(66),u=a.a.createElement("span",{className:c.d},"›"),l=Object(s.withBaobab)({name:"path"})(function(e){var t=e.items,n=e.boldCount,i=void 0===n?1:n,s=Object(r.useComponentRegistry)(c.c).Link,l=t&&t[t.length-1],d=e.link||l||{};return a.a.createElement("div",{className:Object(c.a)(null,[e.className])},a.a.createElement(s,{theme:"outer",className:c.b,url:d.url,logNode:Object(o.__assign)({name:"urlnav"},d.logNode),counter:d.counter,onClick:d.onClick},e.favicon,t.map(function(e,t){return a.a.createElement(a.a.Fragment,{key:t},t>0&&u,t<i?a.a.createElement("b",null,e.text):e.text)})))}),d=n(292),p=n(240),f=(n(411),new r.Registry({id:c.c}).set("Link",Object(p.a)(d.a))),h=(n(412),Object(r.withRegistry)(f)(l))},781:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n.n(r),i=n(3),a=n(6),s=(n(413),{en:",",id:",",tr:"."}),c=function(e){if(e.length<4)return e;var t=Object(a.getI18nLang)(),n=s[t],r=/\B(?=(?:\d{3})+(?!\d))/g;return n?e.replace(r,n):e.split(r)};var u=function(e){var t=function(e){var t=e.value,n=e.withCents,r=e.key,s=Object(i.__read)(Math.abs(t||0).toFixed(n?2:0).split("."),2),u=s[0],l=s[1],d=void 0===l?"":l;d=Number(d)?(-1!==["en","id"].indexOf(Object(a.getI18nLang)())?".":",")+d:"";var p=c(u);return Array.isArray(p)?o.a.createElement("span",{className:"PriceValue",key:r},p.map(function(e,t){return o.a.createElement("span",{key:t},e)}),d):p+d}(e);return"string"===typeof t?o.a.createElement(o.a.Fragment,null,t):t},l=n(206),d=n(4),p=Object(d.cn)("Price"),f=(n(415),p("OldValue")),h=function(e){return o.a.createElement("span",{className:p(null,[e.className])},o.a.createElement(u,{value:e.value,withCents:e.withCents})," ",o.a.createElement(l.PriceCurrency,{currency:e.currency,showAbbr:e.showAbbr,rurSymbolFont:e.rurSymbolFont}),e.oldValue?o.a.createElement("span",{className:f},o.a.createElement(u,{value:e.oldValue,withCents:e.withCents})," ",o.a.createElement(l.PriceCurrency,{currency:e.currency,showAbbr:e.showAbbr,rurSymbolFont:e.rurSymbolFont})):void 0)};h.displayName="Price"},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e%10,r=e%100;return e?1===n&&11!==r?t.one:n>1&&n<5&&(r<10||r>20)?t.some:t.many||"":t.none||""}},8:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return window.Ya.reactBus}},81:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},82:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(4),i=(n(287),function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),a=Object(o.cn)("MMFavicon"),s=function(e){var t=e.favicon,n=e.url,o=e.className,s=-1===t.indexOf("data:image/"),c={backgroundImage:"url("+t+")"},u=i(r.useState(s),2),l=u[0],d=u[1],p=l?a({hidden:!0}):"",f=a({},[o,p]),h=r.useRef(null);function m(e){e.target.height>1&&d(!1)}return r.useEffect(function(){var e=h&&h.current;if(s&&e)return e.naturalHeight>1&&d(!1),e.addEventListener("load",m),function(){e.removeEventListener("load",m)}},[h,s]),n?r.createElement("a",{href:n,className:f,rel:"noopener",target:"_blank",style:c,onClick:e.onClick}):s?r.createElement("img",{className:f,src:t,ref:h,onClick:e.onClick}):r.createElement("div",{className:f,style:c,onClick:e.onClick})}},83:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});function r(e,t){void 0===t&&(t=[]);var n=[].concat(t);return e.forEach(function(e){void 0===e.pos||n[e.pos]||(n[e.pos]=e)}),n}function o(e,t){void 0===t&&(t=[]);var n=[].concat(t);return e.forEach(function(e){e.pos&&((!n[e.pos]||n[e.pos].id!==e.id)&&(n[e.pos]=e))}),n}function i(e,t){return void 0===t&&(t={}),e&&e.forEach(function(e){e.rimid&&!t[e.rimid]&&(t[e.rimid]=e)}),t}},831:function(e,t,n){"use strict";var r=n(298);n.d(t,"a",function(){return r.a});n(447)},832:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(3),o=n(0),i=n.n(o),a=n(1),s=n(2),c=n(265),u=n(230),l=n(17),d=n(266),p=Object(a.compose)(Object(s.withRegistry)(d.a),c.a,u.a)(function(e){var t=e.className,n=e.hovered,o=Object(r.__rest)(e,["className","hovered"]);return i.a.createElement(l.a,Object(r.__assign)({},o,{className:Object(l.b)({hovered:n},[t])}))})},841:function(e,t,n){"use strict";var r=n(305);n.d(t,"a",function(){return r.a});n(505)},85:function(e,t,n){n.r(t);var r=n(6);Object(r.setI18nLang)("en")},857:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n.n(r),i=n(119),a=n(223);var s=o.a.memo(function(e){return o.a.createElement(o.a.Fragment,null,Object(i.markup)(e.children,function(e){var t={};return(e.end||e.start)&&(t.delimiters={start:e.start||i.HIGHLIGHT_OPEN,end:e.end||i.HIGHLIGHT_CLOSE}),e.highlighter&&(t.highlighter=e.highlighter),e.textPreprocessor?t.textPreprocessor=e.textPreprocessor:e.ignoreHTMLEntities||(t.textPreprocessor=a.decodeHTMLEntities),t}(e)))})},86:function(e,t,n){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var r=Object(e);return t.forEach(function(e){e&&Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);void 0!==n&&n.enumerable&&(r[t]=e[t])})}),r}})},87:function(e,t,n){"use strict";function r(e){var t=e.n||"",n=e.v||e.m;function r(r,o,i,a){var s=o?t+r+e.e+o:t+r,c=s;if(i){var u=" "+c+e.m;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];!0===d?c+=u+l:d&&(c+=u+l+n+d)}}if(void 0!==a)for(var p=0,f=a.length;p<f;p++){var h=a[p];if("string"==typeof h&&h)for(var m=h.split(" "),v=0;v<m.length;v++){var g=m[v];g!==s&&(c+=" "+g)}}return c}return function(e,t){return function(n,o,i){return"string"==typeof n?Array.isArray(o)?r(e,n,void 0,o):r(e,n,o,i):r(e,t,n,o)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r({e:"-",m:"_"});t.cn=o,t.withNaming=r},88:function(e,t,n){},89:function(e,t,n){},9:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement)},90:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b});var r=n(3),o=n(0),i=n.n(o),a=n(14),s=n(2),c=n(4),u=n(132),l=n(150);n(592);function d(e){var t=Object(o.useRef)();return Object(o.useEffect)(function(){t.current=e}),t.current}var p=function(){return{value:1}},f=p(),h=Object(o.createContext)(p()),m=function(e){return Object(r.__read)(Object(o.useState)(function(e,t){return void 0===t&&(t=""),""+t+function(e){return e.value++}(e||f)}(Object(o.useContext)(h),e)),1)[0]},v=function(e){var t=e.visible,n=e.onClose,a=e.children,s=e.essentialRefs,c=m("layer-"),u=d(t),l=d(n),p=Object(o.useCallback)(function(e){if("Escape"===e.key){var t=Object(r.__read)(v.stack[v.stack.length-1]||[],2),n=t[0],o=t[1];n===c&&void 0!==o&&o(e,"esc")}},[]),f=Object(o.useCallback)(function(e){var t=Object(r.__read)(v.stack[v.stack.length-1]||[],3),n=t[0],o=t[1],i=t[2];n===c&&void 0!==o&&void 0!==i&&(i.filter(function(e){return null!==e.current}).some(function(t){return t.current.contains(e.target)})||o(e,"click"))},[]);return Object(o.useEffect)(function(){(n!==l&&void 0!==n&&v.stack.forEach(function(e,t){Object(r.__read)(e,2)[1]===l&&(v.stack[t][1]=n)}),t!==u&&void 0!==n)&&(t?(v.stack.push([c,n,s]),document.addEventListener("keyup",p),document.addEventListener("mousedown",f)):(Object(r.__read)(v.stack[v.stack.length-1]||[],1)[0]===c&&requestAnimationFrame(function(){return v.stack.pop()}),document.removeEventListener("keyup",p),document.removeEventListener("mousedown",f)))},[u,t,n,l]),Object(o.useEffect)(function(){return function(){requestAnimationFrame(function(){return v.stack.pop()}),document.removeEventListener("keyup",p),document.removeEventListener("mousedown",f)}},[]),i.a.createElement(i.a.Fragment,null,a)};v.stack=[],v.displayName="LayerManager";var g=Object(c.cn)("Popup2"),b=function(e){var t=e.addonAfter,n=e.addonBefore,c=e.children,d=e.className,p=e.direction,f=e.forceRender,h=e.hasTail,m=e.innerRef,b=e.keepMounted,y=void 0===b||b,O=e.position,w=e.scope,C=void 0===w?{current:Object(u.a)()?document.body:null}:w,E=e.style,j=e.tailPosition,S=e.tailRef,_=e.tailSize,k=e.visible,I=e.zIndex,P=e.unstable_onRenderTail,x=e.onClose,M=e.unstable_essentialRefs,N=void 0===M?[]:M,R=e.unstable_hostRef,T=e.onOutsideClick,D=e.onEscapeKeyDown,L=e.onClick,A=(e.theme,e.view,e.nonvisual,Object(r.__rest)(e,["addonAfter","addonBefore","children","className","direction","forceRender","hasTail","innerRef","keepMounted","position","scope","style","tailPosition","tailRef","tailSize","visible","zIndex","unstable_onRenderTail","onClose","unstable_essentialRefs","unstable_hostRef","onOutsideClick","onEscapeKeyDown","onClick","theme","view","nonvisual"])),B=Object(r.__read)(Object(o.useState)(!0),2),F=B[0],U=B[1],H=Object(o.useRef)(null);!function(e,t){var n=Object(o.useRef)(!0);Object(o.useEffect)(function(){n.current?n.current=!1:e()},Object(r.__spread)([e],t))}(function(){F&&k&&U(!1)},[]),Object(o.useEffect)(function(){console.assert(void 0===T||void 0===D,'Использование функции "withOutsideClick" является устаревшим API. Для закрытия используйте свойство "onClose" без использования "withOutsideClick".'),F&&(f||k)&&U(!1)},[]);var z=Object(o.useCallback)(function(e,t){"esc"===t?void 0!==D&&D(e):void 0!==T&&T(e),void 0!==x&&x(e,t)},[D,T,x]),q=Object(s.useComponentRegistry)(g()).Tail,W=R||H;return!k&&!y||!Object(u.a)()||null===C.current||F?null:Object(a.createPortal)(i.a.createElement(v,{visible:k,onClose:z,essentialRefs:Object(r.__spread)([W],N)},i.a.createElement("div",Object(r.__assign)({},A,{className:g({visible:k,direction:p},[d]),ref:Object(l.a)(H,m),style:Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},E),O),{zIndex:I}),onClick:L}),n,"function"===typeof c?c({tailRef:S}):c,t,P&&P(i.a.createElement(q,{innerRef:S,style:Object(r.__assign)(Object(r.__assign)({},j),{height:_,width:_})})),!P&&h&&i.a.createElement(q,{innerRef:S,style:Object(r.__assign)(Object(r.__assign)({},j),{height:_,width:_})}))),C.current)};b.displayName=g()},901:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(17),i=(n(522),Object(r.withBemMod)(Object(o.b)(),{size:"m"}))},93:function(e,t,n){"use strict";n.d(t,"d",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return h});var r=n(6),o=n.n(r),i=n(168),a=n(152),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=o()(a);function u(e,t,n,r){!r.strictShow&&i.a&&window.sessionStorage.setItem(n,String(l(n)+1)),t(s({visible:!0,title:c("Войдите в Яндекс, и поиск станет лучше",{context:"Надпись в попапе, предлагающим авторизоваться или зарегистрироваться"})},r)),e&&e.preventDefault()}function l(e){return"undefined"===typeof window?0:Number(i.a&&window.sessionStorage.getItem(e))||0}function d(e,t){return void 0===t&&(t=1),l(e)<t}function p(){return encodeURIComponent(window.location.href)}function f(e,t){return"https://passport.yandex."+e+"/auth?retpath="+p()+"&origin="+t}function h(e,t){return"https://passport.yandex."+e+"/registration?retpath="+p()+"&origin="+t}},97:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e){return function(t){return function(n){var i=o(o({},e),n);return r.createElement(t,o({},i))}}}},98:function(e,t,n){e.exports=n(164)()},990:function(e,t,n){"use strict";n.d(t,"Favorites",function(){return p});var r=n(3),o=n(0),i=n.n(o),a=n(423),s=n(424),c=n(426),u=n(420),l=n(255),d=n(410);n.o(d,"FavoritesContextProvider")&&n.d(t,"FavoritesContextProvider",function(){return d.FavoritesContextProvider}),n.d(t,"FavoritesContextProvider",function(){return l.b});var p=function(e){return function(t){return i.a.createElement(l.a.Consumer,null,function(n){return i.a.createElement(e,Object(r.__assign)({},t,{cache:n.cache[t.card.doc_id]||{},onStatusChange:n.changeStatus}))})}}(function(e){function t(t){var n=e.call(this,t)||this;return n.addRef=i.a.createRef(),n.gotoRef=i.a.createRef(),n.state={statusPopup:"hidden",statusIframe:"hidden",cacheBoard:{}},n.counter=new u.a({logged:t.loggedIn,counterParams:t.counterParams}),n.onClickAdd=n.onClickAdd.bind(n),n.onClickEdit=n.onClickEdit.bind(n),n.showProgressPopup=n.showProgressPopup.bind(n),n.hidePopup=n.hidePopup.bind(n),n.hideIframe=n.hideIframe.bind(n),n.loadIframe=n.loadIframe.bind(n),n.readyIframe=n.readyIframe.bind(n),n.closeIframe=n.closeIframe.bind(n),n}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.controller=c.a.getInstance()},t.prototype.componentDidUpdate=function(e){e.card.doc_id!==this.props.card.doc_id&&(this.hidePopup(),this.hideIframe())},t.prototype.onClickAdd=function(){var e=this;this.showProgressPopup(),this.controller.createCard(this.props.card,this.props.loggedIn,this.state.cacheBoard,this.props.onStatusChange,this.props.sourceName).then(function(t){"saved"===t.eventName&&e.handlerFavoritesSaved(t),"iframe"===t.eventName&&e.loadIframe(t)})},t.prototype.onClickEdit=function(){this.state.card&&this.loadIframe({card:this.state.card,fav:!0})},t.prototype.showProgressPopup=function(){this.setState({statusPopup:"progress"})},t.prototype.hidePopup=function(){this.setState({statusPopup:"hidden"})},t.prototype.hideIframe=function(){this.setState({statusIframe:"hidden"})},t.prototype.loadIframe=function(e){this.setState({statusIframe:"load",card:e.card})},t.prototype.readyIframe=function(){this.setState({statusIframe:"ready",statusPopup:"hidden"})},t.prototype.closeIframe=function(e){if(this.setState({statusIframe:"hidden"}),"saved"===e.eventName){if(e.card&&e.card.id){var t=e.card.doc_id,n=e.card.id;this.props.onStatusChange(t,{cardId:n,isSaved:!0})}this.handlerFavoritesSaved(e)}},t.prototype.handlerFavoritesSaved=function(e){if(e&&e.card&&e.card.failed)this.setState({statusPopup:"error",card:void 0});else{var t=this.state.cacheBoard;e.card&&e.card.board&&e.card.content[0].source_type&&e.card.board.id&&(t[e.card.content[0].source_type]=e.card.board.id),this.setState({statusPopup:"saved",card:e.card,cacheBoard:t}),this.props.onStatusChange(this.props.card.doc_id,{isSaved:!0}),this.counter.send("1352.1382.2052","73312")}},t.prototype.render=function(){var e=this.props,t=e.goTo,n=e.add,r=e.isFavorite,o=e.loggedIn,c=e.tone,u=e.loginUrl,l=e.scope,d=e.popupMainOffset,p=e.popupClassName,f=e.popupZIndex,h=e.cache,m=this.state,v=m.statusPopup,g=m.statusIframe,b=m.card,y=r||h.isSaved,O=y?t({innerRef:this.gotoRef}):n({onClick:this.onClickAdd,innerRef:this.addRef});return i.a.createElement(i.a.Fragment,null,O,i.a.createElement(a.a,{className:p,anchor:y?this.gotoRef:this.addRef,scope:l,status:v,loggedIn:o,tone:c,loginUrl:u,board:b&&b.board,counter:this.counter,onClickEdit:this.onClickEdit,onClose:this.hidePopup,mainOffset:d,zIndex:f}),i.a.createElement(s.a,{status:g,card:b,sourceName:this.props.sourceName,counter:this.counter,readyIframe:this.readyIframe,closeIframe:this.closeIframe,onClose:this.hideIframe}))},t}(i.a.Component))},991:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(174),i=(n(599),Object(r.withBemMod)(Object(o.b)(),{view:"default"}))}});